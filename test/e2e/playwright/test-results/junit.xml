<testsuites id="" name="" tests="2" failures="0" skipped="0" errors="0" time="60.179206">
<testsuite name="upload.api.spec.js" timestamp="2025-12-09T10:51:22.380Z" hostname="chromium" tests="1" failures="0" skipped="0" time="31.276" errors="0">
<testcase name="API upload test - create content and check Firestore" classname="upload.api.spec.js" time="31.276">
<system-out>
<![CDATA[[diagnostic] google-gax@4.6.1 at C:\Users\asus\AutoPromte\AutoPromote\node_modules\google-gax\build\src\index.js; @grpc/grpc-js@1.14.0 at C:\Users\asus\AutoPromte\AutoPromote\node_modules\@grpc\grpc-js\package.json (has single-subchannel-channel: true)
[startup] Keep-alive agents enabled (max=50, free=10)
âœ… Auth routes loaded
âœ… User routes loaded
âœ… Content routes loaded
âœ… Analytics routes loaded
âœ… Admin routes loaded
âœ… Admin analytics routes loaded
âœ… Using top-level tiktokRoutes.js
âœ… Telegram routes loaded
âœ… Facebook routes loaded
âœ… YouTube routes loaded
âœ… Twitter auth routes loaded
âœ… Snapchat routes loaded
âœ… Generic platform routes loaded
âœ… Promotion task routes loaded
âœ… Notifications routes loaded
âœ… Captions routes loaded
âœ… Admin cache routes loaded
âœ… Metrics routes loaded
âœ… Instagram routes loaded
âœ… Platform connections routes loaded
âœ… Admin security routes loaded
âœ… Shortlink routes loaded
âœ… Billing routes loaded
âœ… Payments status routes loaded
âœ… Payments extended routes loaded
âœ… PayPal webhook routes loaded
âœ… PayPal subscription routes loaded
âœ… Viral boost routes loaded
âœ… Rewards routes loaded
âœ… Variant admin routes loaded
âœ… AB admin routes loaded
âœ… Admin config routes loaded
âœ… Admin dashboard routes loaded
âœ… Admin bandit routes loaded
âœ… Admin alerts routes loaded
âœ… Admin ops routes loaded
âœ… Admin email verification routes loaded
âœ… Discord routes loaded
[diagnostic] CORS allowAll: [33mtrue[39m allowedOrigins: https://www.autopromote.org,https://autopromote.org,https://autopromote-1.onrender.com,https://autopromote.onrender.com
âœ… Distributed rate limiter active
âœ… CodeQL general rate limiter applied at /api/
ðŸš TikTok routes mounted at /api/tiktok
ðŸš Telegram routes mounted at /api/telegram
ðŸš Facebook routes mounted at /api/facebook
ðŸš YouTube routes mounted at /api/youtube
ðŸš Twitter routes mounted at /api/twitter
ðŸš Snapchat routes mounted at /api/snapchat
ðŸš Platform connections routes mounted at /api/platform
ðŸš Community feed routes mounted at /api/community
ðŸš Viral growth routes mounted at /api/viral
ðŸš AI Clip generation routes mounted at /api/clips
ðŸš AI Chat routes mounted at /api/chat
ðŸš Generic platform routes mounted at /api/:platform/*
ðŸš Promotion task routes mounted at /api/promotion-tasks
ðŸš Metrics routes mounted at /api/metrics
ðŸš Instagram routes mounted at /api/instagram
ðŸš Notifications routes mounted at /api/notifications
ðŸš AI Caption generation routes mounted at /api/captions
ðŸ” System diagnostics routes mounted at /api/diagnostics
ðŸš Admin cache routes mounted at /api/admin/cache
ðŸ“¢ Ads routes mounted at /api/ads
âœ… Demo page available at /tiktok-demo
âœ… Mock TikTok OAuth frontend available at /mock/tiktok_oauth_frontend.html
â„¹ï¸ Background job runner disabled (set ENABLE_BACKGROUND_JOBS=true to enable).
[request.debug] method: POST path: /api/content/upload headers: {
  origin: [90mundefined[39m,
  host: [32m'127.0.0.1:52505'[39m,
  [32m'user-agent'[39m: [32m'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)'[39m,
  referer: [90mundefined[39m,
  [32m'content-type'[39m: [32m'application/json'[39m
}
[cors.origin] origin: [90mundefined[39m allowAll: [33mtrue[39m
[upload] origin: [90mundefined[39m auth: [33mtrue[39m
ðŸš€ [VIRAL UPLOAD] Content uploaded with complete viral optimization: {
  contentId: [32m'OHlwD77LWCjj4mrTp2W3'[39m,
  scheduleId: [32m'zhfCA0K6nTSHhnPIKdy4'[39m,
  platformTasks: [33m1[39m,
  viralScore: [33m0[39m,
  hashtagCount: [33m0[39m,
  boostChainId: [1mnull[22m
}
[trackUsage] Tracked upload for user testUser123 in month 2025-12
[ACCESS] ts=2025-12-09T10:52:04.029Z POST /api/content/upload status=201 requestID="miygnkpe-cc3107be-8fcf-400f-9f24-4fdead6e1583" clientIP="::ffff:127.0.0.1" responseTimeMS=8106 responseBytes=2351 userAgent="node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"
]]>
</system-out>
<system-err>
<![CDATA[âš ï¸ DISCORD_PUBLIC_KEY is not set. /api/discord/interactions endpoint is disabled.
[VideoClipping] âš ï¸ OPENAI_API_KEY not configured. Falling back to Google Cloud.
[VideoClipping] âš ï¸ GOOGLE_CLOUD_API_KEY not configured.
[VideoClipping] ðŸ’¡ Add OPENAI_API_KEY or GOOGLE_CLOUD_API_KEY for transcription.
[Chatbot] âš ï¸ OPENAI_API_KEY not configured. Chatbot will not work.
[Chatbot] ðŸ’¡ Add OPENAI_API_KEY to your environment variables.
[Chatbot] ðŸ“– See OPENAI_SETUP_GUIDE.md for setup instructions.
[CaptionGen] âš ï¸ OPENAI_API_KEY not configured. Caption generation will not work.
[Hashtag] âš ï¸ OPENAI_API_KEY not configured. Advanced hashtag generation will not work.
[slow] POST /api/content/upload 8106ms status=201
]]>
</system-err>
</testcase>
</testsuite>
<testsuite name="upload.spec.js" timestamp="2025-12-09T10:51:22.380Z" hostname="chromium" tests="1" failures="0" skipped="0" time="15.069" errors="0">
<testcase name="Upload flow creates content doc and sets spotify target" classname="upload.spec.js" time="15.069">
<system-out>
<![CDATA[[request.debug] method: POST path: /api/content/upload headers: {
  origin: [90mundefined[39m,
  host: [32m'127.0.0.1:56552'[39m,
  [32m'user-agent'[39m: [32m'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)'[39m,
  referer: [90mundefined[39m,
  [32m'content-type'[39m: [32m'application/json'[39m
}
[cors.origin] origin: [90mundefined[39m allowAll: [33mtrue[39m
[upload] origin: [90mundefined[39m auth: [33mtrue[39m
ðŸš€ [VIRAL UPLOAD] Content uploaded with complete viral optimization: {
  contentId: [32m'LByYT1vmZBl5euwr4Nrk'[39m,
  scheduleId: [32m'VPwcq2gEh7ofzHrEB0hr'[39m,
  platformTasks: [33m2[39m,
  viralScore: [33m0[39m,
  hashtagCount: [33m0[39m,
  boostChainId: [1mnull[22m
}
[trackUsage] Tracked upload for user testUser123 in month 2025-12
[ACCESS] ts=2025-12-09T10:52:17.142Z POST /api/content/upload status=201 requestID="miygnua0-e680ceb5-7974-4e85-94ee-fa3508660e6f" clientIP="::ffff:127.0.0.1" responseTimeMS=8813 responseBytes=3011 userAgent="node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"
]]>
</system-out>
<system-err>
<![CDATA[[slow] POST /api/content/upload 8814ms status=201
]]>
</system-err>
</testcase>
</testsuite>
</testsuites>