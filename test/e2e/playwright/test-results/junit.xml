<testsuites id="" name="" tests="26" failures="0" skipped="0" errors="0" time="308.45494999999994">
<testsuite name="admin-payouts.spec.js" timestamp="2025-12-14T09:14:36.442Z" hostname="chromium" tests="1" failures="0" skipped="0" time="56.389" errors="0">
<testcase name="admin payouts list and process single payout" classname="admin-payouts.spec.js" time="56.389">
<system-out>
<![CDATA[Static server started on port [33m5000[39m
[diagnostic] google-gax@4.6.1 at C:\Users\asus\AutoPromte\AutoPromote\node_modules\google-gax\build\src\index.js; @grpc/grpc-js@1.14.0 at C:\Users\asus\AutoPromte\AutoPromote\node_modules\@grpc\grpc-js\package.json (has single-subchannel-channel: true)
[startup] Keep-alive agents enabled (max=50, free=10)
âœ… Auth routes loaded
âœ… User routes loaded
âœ… Content routes loaded
âœ… Analytics routes loaded
âœ… Admin routes loaded
âœ… Admin analytics routes loaded
âœ… Using top-level tiktokRoutes.js
âœ… Telegram routes loaded
âœ… Facebook routes loaded
âœ… YouTube routes loaded
âœ… Twitter auth routes loaded
âœ… Snapchat routes loaded
âœ… Generic platform routes loaded
âœ… Promotion task routes loaded
âœ… Notifications routes loaded
âœ… Captions routes loaded
âœ… Admin cache routes loaded
âœ… Metrics routes loaded
âœ… Instagram routes loaded
âœ… Platform connections routes loaded
âœ… Admin security routes loaded
âœ… Shortlink routes loaded
âœ… Billing routes loaded
âœ… Payments status routes loaded
âœ… Payments extended routes loaded
âœ… PayPal webhook routes loaded
âœ… PayPal subscription routes loaded
âœ… Viral boost routes loaded
âœ… Rewards routes loaded
âœ… Variant admin routes loaded
âœ… AB admin routes loaded
âœ… Admin config routes loaded
âœ… Admin dashboard routes loaded
âœ… Admin bandit routes loaded
âœ… Admin alerts routes loaded
âœ… Admin ops routes loaded
âœ… Admin email verification routes loaded
âœ… Discord routes loaded
[diagnostic] CORS allowAll: [33mtrue[39m allowedOrigins: https://www.autopromote.org,https://autopromote.org,https://autopromote-1.onrender.com,https://autopromote.onrender.com
âœ… Distributed rate limiter active
âœ… CodeQL general rate limiter applied at /api/
ðŸš TikTok routes mounted at /api/tiktok
ðŸš Telegram routes mounted at /api/telegram
ðŸš Facebook routes mounted at /api/facebook
ðŸš YouTube routes mounted at /api/youtube
ðŸš Twitter routes mounted at /api/twitter
ðŸš Snapchat routes mounted at /api/snapchat
ðŸš Platform connections routes mounted at /api/platform
ðŸš Community feed routes mounted at /api/community
ðŸš Viral growth routes mounted at /api/viral
ðŸš AI Clip generation routes mounted at /api/clips
ðŸš AI Chat routes mounted at /api/chat
ðŸš Assistant routes mounted at /api/assistant (ASSISTANT_ENABLED must be true to respond)
ðŸš Generic platform routes mounted at /api/:platform/*
ðŸš Promotion task routes mounted at /api/promotion-tasks
ðŸš Metrics routes mounted at /api/metrics
ðŸš Instagram routes mounted at /api/instagram
ðŸš Notifications routes mounted at /api/notifications
ðŸš AI Caption generation routes mounted at /api/captions
ðŸ” System diagnostics routes mounted at /api/diagnostics
ðŸš Admin cache routes mounted at /api/admin/cache
ðŸ“¢ Ads routes mounted at /api/ads
âœ… Demo page available at /tiktok-demo
âœ… Mock TikTok OAuth frontend available at /mock/tiktok_oauth_frontend.html
â„¹ï¸ Background job runner disabled (set ENABLE_BACKGROUND_JOBS=true to enable).
[ROUTE FALLBACK] Proxying https://autopromote.onrender.com/api/content/my-content -> http://127.0.0.1:63713/api/content/my-content
[cors.origin] origin: [90mundefined[39m allowAll: [33mtrue[39m
[ROUTE FALLBACK] Proxying https://autopromote.onrender.com/api/admin/analytics/overview -> http://127.0.0.1:63713/api/admin/analytics/overview
[cors.origin] origin: [90mundefined[39m allowAll: [33mtrue[39m
[warmup] completed in 5319ms (trigger=lazy_request)
[requireAcceptedTerms.debug] isE2EHeader: [33mtrue[39m isLocalHost: [33mtrue[39m isNodeFetchUA: [33mfalse[39m isTestToken: [33mtrue[39m authHeaderPreview: Bearer test-token-for-adminUser

[DEBUG] Response for /api/admin/analytics/overview:
Status: [33m401[39m
Request headers: Authorization: Present
isMockData: [33mfalse[39m
[ACCESS] ts=2025-12-14T09:15:23.875Z GET /api/admin/analytics/overview status=401 requestID="mj5ien7w-3cfb9e25-f355-4a6a-a95a-bec2a31bb5e7" clientIP="::ffff:127.0.0.1" responseTimeMS=2135 responseBytes=131 userAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.7499.4 Safari/537.36"
[ACCESS] ts=2025-12-14T09:15:26.556Z GET /api/content/my-content status=200 requestID="mj5ieknw-a80b25f2-d3b0-42ab-aee6-f043fbf0d754" clientIP="::ffff:127.0.0.1" responseTimeMS=8128 responseBytes=14 userAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.7499.4 Safari/537.36"
[PAGE LOG] Failed to load resource: the server responded with a status of 401 (Unauthorized)
[PAGE LOG] Server analytics returned non-ok response; status: 401 error: undefined
[ROUTE FALLBACK] Proxying https://autopromote.onrender.com/api/content/my-promotion-schedules -> http://127.0.0.1:63713/api/content/my-promotion-schedules
[cors.origin] origin: [90mundefined[39m allowAll: [33mtrue[39m
[E2E] payouts rows [33m1[39m
[requireAcceptedTerms.debug] isE2EHeader: [33mtrue[39m isLocalHost: [33mtrue[39m isNodeFetchUA: [33mfalse[39m isTestToken: [33mtrue[39m authHeaderPreview: Bearer test-token-for-adminUser
[ACCESS] ts=2025-12-14T09:15:29.727Z GET /api/content/my-promotion-schedules status=200 requestID="mj5ier5t-8d855f79-5508-4dd9-baf9-c158cb39dc98" clientIP="::ffff:127.0.0.1" responseTimeMS=2878 responseBytes=16 userAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.7499.4 Safari/537.36"
]]>
</system-out>
<system-err>
<![CDATA[âš ï¸ DISCORD_PUBLIC_KEY is not set. /api/discord/interactions endpoint is disabled.
[VideoClipping] âš ï¸ OPENAI_API_KEY not configured. Falling back to Google Cloud.
[VideoClipping] âš ï¸ GOOGLE_CLOUD_API_KEY not configured.
[VideoClipping] ðŸ’¡ Add OPENAI_API_KEY or GOOGLE_CLOUD_API_KEY for transcription.
[Chatbot] âš ï¸ OPENAI_API_KEY not configured. Chatbot will not work.
[Chatbot] ðŸ’¡ Add OPENAI_API_KEY to your environment variables.
[Chatbot] ðŸ“– See OPENAI_SETUP_GUIDE.md for setup instructions.
[CaptionGen] âš ï¸ OPENAI_API_KEY not configured. Caption generation will not work.
[Hashtag] âš ï¸ OPENAI_API_KEY not configured. Advanced hashtag generation will not work.
[slow] GET /api/content/my-content 8128ms status=200
]]>
</system-err>
</testcase>
</testsuite>
<testsuite name="payout.api.spec.js" timestamp="2025-12-14T09:14:36.442Z" hostname="chromium" tests="1" failures="0" skipped="0" time="18.798" errors="0">
<testcase name="API payout request - create payout doc and update user pending earnings" classname="payout.api.spec.js" time="18.798">
<system-out>
<![CDATA[[cors.origin] origin: [90mundefined[39m allowAll: [33mtrue[39m
[ACCESS] ts=2025-12-14T09:15:45.986Z POST /api/monetization/earnings/payout/self status=200 requestID="mj5if33j-6b202b69-7a46-4ac9-8760-6df2f7dd91ed" clientIP="::ffff:127.0.0.1" responseTimeMS=3667 responseBytes=139 userAgent="node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"
[cors.origin] origin: [90mundefined[39m allowAll: [33mtrue[39m
[ACCESS] ts=2025-12-14T09:15:55.117Z GET /api/monetization/admin/payouts?status=pending&limit=20 status=200 requestID="mj5if68l-7b1c9323-5619-4159-95c8-9e2c69d29b88" clientIP="::ffff:127.0.0.1" responseTimeMS=8727 responseBytes=232 userAgent="node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"
]]>
</system-out>
<system-err>
<![CDATA[[slow] POST /api/monetization/earnings/payout/self 3667ms status=200
[E2E] Skipping DB assertion as Firestore not available: 9 FAILED_PRECONDITION: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/autopromote-cc6d3/firestore/indexes?create_composite=ClFwcm9qZWN0cy9hdXRvcHJvbW90ZS1jYzZkMy9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvcGF5b3V0cy9pbmRleGVzL18QARoKCgZ1c2VySWQQARoPCgtyZXF1ZXN0ZWRBdBACGgwKCF9fbmFtZV9fEAI
[AdminPayouts] ordered query failed, falling back to simple query: 9 FAILED_PRECONDITION: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/autopromote-cc6d3/firestore/indexes?create_composite=ClFwcm9qZWN0cy9hdXRvcHJvbW90ZS1jYzZkMy9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvcGF5b3V0cy9pbmRleGVzL18QARoKCgZzdGF0dXMQARoPCgtyZXF1ZXN0ZWRBdBACGgwKCF9fbmFtZV9fEAI
[slow] GET /api/monetization/admin/payouts?status=pending&limit=20 8728ms status=200
]]>
</system-err>
</testcase>
</testsuite>
<testsuite name="paypal.spec.js" timestamp="2025-12-14T09:14:36.442Z" hostname="chromium" tests="2" failures="0" skipped="0" time="20.541" errors="0">
<testcase name="upgrade flow opens PayPal and handles cancel return" classname="paypal.spec.js" time="16.86">
<system-out>
<![CDATA[Static server started on port [33m5000[39m
[REQUEST] GET http://localhost:5000/
[REQUEST] GET http://localhost:5000/static/js/main.9636d87c.js
[REQUEST] GET http://localhost:5000/static/css/main.5a09c61b.css
[DEBUG] Page title after goto: AutoPromote
[REQUEST] GET https://autopromote.onrender.com/api/paypal-subscriptions/plans
[ROUTE FALLBACK] Intercepting https://autopromote.onrender.com/api/paypal-subscriptions/plans
[REQUEST] GET https://autopromote.onrender.com/api/paypal-subscriptions/status
[REQUEST] GET https://autopromote.onrender.com/api/content/my-content
[ROUTE FALLBACK] Intercepting https://autopromote.onrender.com/api/content/my-content
[REQUEST] GET https://www.paypalobjects.com/webstatic/mktg/logo/PP_AcceptanceMarkTray_150x40.png
[REQUEST] GET https://autopromote.onrender.com/api/content/my-promotion-schedules
[ROUTE FALLBACK] Intercepting https://autopromote.onrender.com/api/content/my-promotion-schedules
[DEBUG] Plan card titles: [ [32m'Pro'[39m, [32m'Free'[39m ]
[DEBUG] Plan cards subscribe info: [
  { title: [32m'Pro'[39m, hasSubscribe: [33mtrue[39m, subscribeText: [32m'Upgrade to Pro'[39m },
  { title: [32m'Free'[39m, hasSubscribe: [33mfalse[39m, subscribeText: [32m''[39m }
]
[REQUEST] POST https://autopromote.onrender.com/api/paypal-subscriptions/create-subscription
[ROUTE FALLBACK] Intercepting https://autopromote.onrender.com/api/paypal-subscriptions/create-subscription
[REQUEST] GET http://localhost:5000/image.png
[REQUEST] GET https://autopromote.onrender.com/api/health
[ROUTE FALLBACK] Intercepting https://autopromote.onrender.com/api/health
]]>
</system-out>
</testcase>
<testcase name="activation flow after approval updates subscription state" classname="paypal.spec.js" time="3.681">
</testcase>
</testsuite>
<testsuite name="platform-cards.spec.js" timestamp="2025-12-14T09:14:36.442Z" hostname="chromium" tests="20" failures="0" skipped="0" time="185.743" errors="0">
<testcase name="Per-platform card: Spotify preview, quality, upload" classname="platform-cards.spec.js" time="2.527">
<system-out>
<![CDATA[Static server started on port [33m5000[39m
[ROUTE] intercept relative /api/content/upload POST {"title":"E2E","description":"desc","type":"video","isDryRun":true,"target_platforms":["spotify"],"platforms":["spotify"],"platform_options":{}}
[ROUTE] intercept relative /api/content/upload POST {"title":"E2E","description":"desc","type":"video","target_platforms":["spotify"],"platforms":["spotify"],"isDryRun":false,"platform_options":{}}
]]>
</system-out>
</testcase>
<testcase name="Per-platform card: Discord preview and upload" classname="platform-cards.spec.js" time="2.361">
</testcase>
<testcase name="Per-platform card: Telegram preview and upload" classname="platform-cards.spec.js" time="2.155">
</testcase>
<testcase name="Per-platform card: Reddit preview and upload" classname="platform-cards.spec.js" time="2.104">
</testcase>
<testcase name="Per-platform card: LinkedIn preview and upload" classname="platform-cards.spec.js" time="2.107">
</testcase>
<testcase name="Per-platform card: Twitter preview and upload" classname="platform-cards.spec.js" time="2.234">
</testcase>
<testcase name="Per-platform card: Snapchat preview and upload" classname="platform-cards.spec.js" time="2.077">
</testcase>
<testcase name="Per-platform card: Pinterest preview and upload" classname="platform-cards.spec.js" time="2.249">
</testcase>
<testcase name="Per-platform card: YouTube preview and upload" classname="platform-cards.spec.js" time="2.481">
</testcase>
<testcase name="Per-platform SPA: Spotify preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="11.495">
<system-out>
<![CDATA[[debug] localStorage user on SPA test: {"uid":"testUser","email":"test@local","name":"Test User","role":"user"}
[debug] nav innerHTML first 400 chars: <ul><li class="active">Profile</li><li class="">Upload</li><li class="">Schedules</li><li class="">Analytics</li><li class="">Rewards</li><li class="">Notifications</li><li class="">Earnings</li><li class="">ðŸ“¢ Ads</li><li class="">Connections</li><li class="">Admin Audit</li><li class="">Security</li><li class="">ðŸŽ¥ Feed</li><li class="">ðŸ’¬ Forum</li><li class="">AI Clips</li></ul>
[debug] document.title: AutoPromote readyState: complete
[debug] found script srcs: [ [32m'http://localhost:5000/static/js/main.9636d87c.js'[39m ]
[debug] file input files count: [33m1[39m
[debug] spotify tile class: platform-tile selected 
[debug] preview button disabled?: [33mfalse[39m
[PAGE LOG] [E2E] handlePlatformPreview called for platform: spotify
[PAGE LOG] [E2E] handlePlatformPreview called for platform: spotify
[PAGE LOG] [E2E] handlePlatformPreview called for platform: spotify
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[REQUEST] POST https://autopromote.onrender.com/api/content/upload
[REQUEST] POST https://autopromote.onrender.com/api/content/upload
[ROUTE] intercept absolute /api/content/upload POST {"isDryRun":true,"title":"test.mp4","type":"video","url":"preview://test.mp4","description":"","target_platforms":["spotify"],"platform_options":{},"schedule_hint":{"frequency":"once","timezone":"UTC"},"meta":{"trimStart":0,"trimEnd":0}}
[RESPONSE] [33m200[39m https://autopromote.onrender.com/api/content/upload
[REQUEST] GET http://localhost:5000/default-thumb.png
[REQUEST] GET http://localhost:5000/default-thumb.png
[RESPONSE] [33m200[39m http://localhost:5000/default-thumb.png
[REQUEST] POST http://localhost:5000/api/content/quality-check
[REQUEST] POST http://localhost:5000/api/content/quality-check
[RESPONSE] [33m200[39m http://localhost:5000/api/content/quality-check
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[REQUEST] POST https://firebasestorage.googleapis.com/v0/b/autopromote-cc6d3.firebasestorage.app/o?name=uploads%2Fvideos%2F1765703812913_test.mp4
[REQUEST] POST https://firebasestorage.googleapis.com/v0/b/autopromote-cc6d3.firebasestorage.app/o?name=uploads%2Fvideos%2F1765703812913_test.mp4
[RESPONSE] [33m200[39m https://firebasestorage.googleapis.com/v0/b/autopromote-cc6d3.firebasestorage.app/o?name=uploads%2Fvideos%2F1765703812913_test.mp4
[REQUEST] GET https://firebasestorage.googleapis.com/v0/b/autopromote-cc6d3.firebasestorage.app/o/uploads%2Fvideos%2F1765703812913_test.mp4
[REQUEST] GET https://firebasestorage.googleapis.com/v0/b/autopromote-cc6d3.firebasestorage.app/o/uploads%2Fvideos%2F1765703812913_test.mp4
[RESPONSE] [33m200[39m https://firebasestorage.googleapis.com/v0/b/autopromote-cc6d3.firebasestorage.app/o/uploads%2Fvideos%2F1765703812913_test.mp4
[PAGE LOG] [Upload] onUpload response: undefined
[PAGE LOG] [Upload] onUpload response: undefined
[PAGE LOG] [Upload] onUpload response: undefined
]]>
</system-out>
</testcase>
<testcase name="Per-platform SPA: YouTube preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="20.043">
<system-out>
<![CDATA[[PAGE LOG] [E2E] handlePlatformPreview called for platform: youtube
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: E2E YouTube Title, type: video, description: E2E YouTube description from SPA test, url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: E2E YouTube Title, type: video, url: preview://test.mp4, description: E2E YouTube description from SPA test} token? true
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[PAGE LOG] Failed to load resource: the server responded with a status of 403 ()
[PAGE LOG] [Upload] onUpload response: undefined
]]>
</system-out>
</testcase>
<testcase name="Per-platform SPA: TikTok preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="18.315">
<system-out>
<![CDATA[[DEBUG] platform-expanded HTML (short): <h4 style="margin: 0px 0px 8px;">Tiktok Options</h4><div style="margin-bottom: 8px; font-size: 13px; color: rgb(55, 65, 81);"><strong>Quick Guidelines:</strong><div style="font-size: 12px; color: rgb(107, 114, 128); margin-top: 4px;">9:16 â€¢ max: 60s â€¢ no watermarks</div><ul style="margin-top: 8px;"><li style="font-size: 13px; color: rgb(55, 65, 81);">Preferred aspect ratio: 9:16 (vertical)</li><li style="font-size: 13px; color: rgb(55, 65, 81);">Avoid watermarks or overlays; TikTok rejects watermarked content</li><li style="font-size: 13px; color: rgb(55, 65, 81);">Enable only allowed interactions (comments/duet/stitch) if the creator allows</li><li style="font-size: 13px; color: rgb(55, 65, 81);">Branded content cannot be private â€” choose public visibility</li><li style="font-size: 13px; color: rgb(55, 65, 81);">Creators may have custom max: 60s; the UI will enforce it if provided</li></ul></div><div style="display: flex; gap: 8px; align-items: center; margin-top: 8px;"><button type="button" class="preview-button">Preview</button><button type="button" class="quality-check-button">Quality Check</button><button type="button" class="submit-button">Upload to Tiktok</button></div><div style="display: grid; gap: 8px;"><div style="font-size: 12px; color: rgb(102, 102, 102);">Creator: Test Creator</div><div><label>Privacy (required)</label><select class="form-select"><option value="">Select privacy</option><option value="EVERYONE">EVERYONE</option><option value="FRIENDS">FRIENDS</option><option value="SELF_ONLY">SELF_ONLY</option></select></div><div><label>Interactions</label><div style="display: flex; gap: 8px; align-items: center;"><label><input type="checkbox"> Comments</label><label><input type="checkbox"> Duet</label><label><input type="checkbox" disabled=""> Stitch</label></div></div></div>
[DEBUG] platform-expanded labels: [ [32m'Privacy (required)'[39m, [32m'Interactions'[39m, [32m'Comments'[39m, [32m'Duet'[39m, [32m'Stitch'[39m ]
[DEBUG] TikTok consent label not present; relying on E2E flag
[PAGE LOG] [E2E] handlePlatformPreview called for platform: tiktok
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[PAGE LOG] Failed to load resource: the server responded with a status of 403 ()
[PAGE LOG] [Upload] onUpload response: undefined
]]>
</system-out>
</testcase>
<testcase name="Per-platform SPA: Snapchat preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="11.355">
<system-out>
<![CDATA[[PAGE LOG] [E2E] handlePlatformPreview called for platform: snapchat
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[PAGE LOG] Failed to load resource: the server responded with a status of 403 ()
[PAGE LOG] [Upload] onUpload response: undefined
]]>
</system-out>
</testcase>
<testcase name="Per-platform SPA: Pinterest preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="11.32">
<system-out>
<![CDATA[[PAGE LOG] [E2E] handlePlatformPreview called for platform: pinterest
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
]]>
</system-out>
</testcase>
<testcase name="Per-platform SPA: Discord preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="23.928">
<system-out>
<![CDATA[[PAGE LOG] [E2E] handlePlatformPreview called for platform: discord
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[PAGE LOG] Failed to load resource: the server responded with a status of 403 ()
[PAGE LOG] [Upload] onUpload response: undefined
]]>
</system-out>
</testcase>
<testcase name="Per-platform SPA: Telegram preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="15.392">
<system-out>
<![CDATA[[PAGE LOG] [E2E] handlePlatformPreview called for platform: telegram
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[PAGE LOG] Failed to load resource: the server responded with a status of 403 ()
[PAGE LOG] [Upload] onUpload response: undefined
]]>
</system-out>
</testcase>
<testcase name="Per-platform SPA: Reddit preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="17.259">
<system-out>
<![CDATA[[PAGE LOG] [E2E] handlePlatformPreview called for platform: reddit
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[PAGE LOG] Failed to load resource: the server responded with a status of 403 ()
[PAGE LOG] [Upload] onUpload response: undefined
]]>
</system-out>
</testcase>
<testcase name="Per-platform SPA: LinkedIn preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="12.353">
<system-out>
<![CDATA[[PAGE LOG] [E2E] handlePlatformPreview called for platform: linkedin
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
]]>
</system-out>
</testcase>
<testcase name="Per-platform SPA: Twitter preview &amp; upload (dashboard)" classname="platform-cards.spec.js" time="21.344">
<system-out>
<![CDATA[[PAGE LOG] [E2E] handlePlatformPreview called for platform: twitter
[PAGE LOG] [E2E] handlePlatformPreview contentData {title: test.mp4, type: video, description: , url: preview://test.mp4, file: Object}
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: true, platforms: Array(1)}
[PAGE LOG] [E2E] handleContentUpload: calling API https://autopromote.onrender.com/api/content/upload payload: {isDryRun: true, title: test.mp4, type: video, url: preview://test.mp4, description: } token? true
[PAGE LOG] [E2E] handleContentUpload called with params: {isDryRun: false, platforms: Array(1)}
[PAGE LOG] Failed to load resource: the server responded with a status of 403 ()
[PAGE LOG] [Upload] onUpload response: undefined
]]>
</system-out>
</testcase>
<testcase name="Per-platform card: TikTok respects creator_info and allows upload" classname="platform-cards.spec.js" time="2.644">
</testcase>
</testsuite>
<testsuite name="upload.api.spec.js" timestamp="2025-12-14T09:14:36.442Z" hostname="chromium" tests="1" failures="0" skipped="0" time="3.688" errors="0">
<testcase name="API upload test - create content and check Firestore" classname="upload.api.spec.js" time="3.688">
<system-out>
<![CDATA[[request.debug] method: POST path: /api/content/upload headers: {
  origin: [90mundefined[39m,
  host: [32m'127.0.0.1:49797'[39m,
  [32m'user-agent'[39m: [32m'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)'[39m,
  referer: [90mundefined[39m,
  [32m'content-type'[39m: [32m'application/json'[39m
}
[cors.origin] origin: [90mundefined[39m allowAll: [33mtrue[39m
[requireAcceptedTerms.debug] isE2EHeader: [33mtrue[39m isLocalHost: [33mtrue[39m isNodeFetchUA: [33mtrue[39m isTestToken: [33mtrue[39m authHeaderPreview: Bearer test-token-for-testUser123
[usageLimit] E2E/Test bypass applied {
  hostHeader: [32m'127.0.0.1:49797'[39m,
  isE2EDebugHeader: [33mtrue[39m,
  isLocalHost: [33mtrue[39m,
  isNodeFetchUA: [33mtrue[39m,
  isTestToken: [33mtrue[39m
}
[upload] origin: [90mundefined[39m auth: [33mtrue[39m
[upload.headers] x-playwright-e2e: 1 host 127.0.0.1:49797 user-agent node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
[upload.debug.headers] accept:*/* | accept-encoding:gzip,deflate | authorization:Bearer test-token-for-testUser123 | connection:keep-alive | content-length:172 | content-type:application/json | host:127.0.0.1:49797 | user-agent:node-fetch/1.0 (+https://github.com/bitinn/node-fetch) | x-playwright-e2e:1
[upload] userUsage: {
  limit: [33m10[39m,
  used: [33m0[39m,
  remaining: [33m10[39m,
  isPaid: [33mfalse[39m,
  monthKey: [32m'2025-12'[39m
}
[ACCESS] ts=2025-12-14T09:19:32.528Z POST /api/content/upload status=201 requestID="mj5ijyhn-c3516c4a-cb1f-452d-bc41-08f339541cd1" clientIP="::ffff:127.0.0.1" responseTimeMS=2901 responseBytes=71 userAgent="node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"
]]>
</system-out>
</testcase>
</testsuite>
<testsuite name="upload.spec.js" timestamp="2025-12-14T09:14:36.442Z" hostname="chromium" tests="1" failures="0" skipped="0" time="7.07" errors="0">
<testcase name="Upload flow creates content doc and sets spotify target" classname="upload.spec.js" time="7.07">
<system-out>
<![CDATA[[request.debug] method: POST path: /api/content/upload headers: {
  origin: [90mundefined[39m,
  host: [32m'127.0.0.1:49801'[39m,
  [32m'user-agent'[39m: [32m'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)'[39m,
  referer: [90mundefined[39m,
  [32m'content-type'[39m: [32m'application/json'[39m
}
[cors.origin] origin: [90mundefined[39m allowAll: [33mtrue[39m
[requireAcceptedTerms.debug] isE2EHeader: [33mtrue[39m isLocalHost: [33mtrue[39m isNodeFetchUA: [33mtrue[39m isTestToken: [33mtrue[39m authHeaderPreview: Bearer test-token-for-testUser123
[usageLimit] E2E/Test bypass applied {
  hostHeader: [32m'127.0.0.1:49801'[39m,
  isE2EDebugHeader: [33mtrue[39m,
  isLocalHost: [33mtrue[39m,
  isNodeFetchUA: [33mtrue[39m,
  isTestToken: [33mtrue[39m
}
[upload] origin: [90mundefined[39m auth: [33mtrue[39m
[upload.headers] x-playwright-e2e: 1 host 127.0.0.1:49801 user-agent node-fetch/1.0 (+https://github.com/bitinn/node-fetch)
[upload.debug.headers] accept:*/* | accept-encoding:gzip,deflate | authorization:Bearer test-token-for-testUser123 | connection:keep-alive | content-length:353 | content-type:application/json | host:127.0.0.1:49801 | user-agent:node-fetch/1.0 (+https://github.com/bitinn/node-fetch) | x-playwright-e2e:1
[upload] userUsage: {
  limit: [33m10[39m,
  used: [33m0[39m,
  remaining: [33m10[39m,
  isPaid: [33mfalse[39m,
  monthKey: [32m'2025-12'[39m
}
[ACCESS] ts=2025-12-14T09:19:38.516Z POST /api/content/upload status=201 requestID="mj5ik2nk-f128eab7-b8ec-470b-b047-93abb1a1d761" clientIP="::ffff:127.0.0.1" responseTimeMS=3492 responseBytes=71 userAgent="node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"
]]>
</system-out>
<system-err>
<![CDATA[[slow] POST /api/content/upload 3493ms status=201
[E2E] Skipping Firestore assertions; GOOGLE_APPLICATION_CREDENTIALS not set
]]>
</system-err>
</testcase>
</testsuite>
</testsuites>