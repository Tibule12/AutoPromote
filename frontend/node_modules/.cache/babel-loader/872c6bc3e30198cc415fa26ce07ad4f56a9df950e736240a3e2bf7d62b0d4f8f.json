{"ast":null,"code":"import _objectSpread from\"C:/Users/Tulani.Mtshwelo/Promo/AutoPromote/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./App.css';import{auth,db,storage}from'./firebaseClient';import{onAuthStateChanged}from'firebase/auth';import{ref,uploadBytes,getDownloadURL}from'firebase/storage';import LoginForm from'./LoginForm';import AdminLoginForm from'./AdminLoginForm';import RegisterForm from'./RegisterForm';import ContentUploadForm from'./ContentUploadForm';import ContentList from'./ContentList';import AdminDashboard from'./AdminDashboard';import EnvTest from'./components/EnvTest';import EnvChecker from'./components/EnvChecker';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(()=>{const stored=localStorage.getItem('user');return stored?JSON.parse(stored):null;});const[content,setContent]=useState([]);const[showLogin,setShowLogin]=useState(false);const[showAdminLogin,setShowAdminLogin]=useState(false);const[showRegister,setShowRegister]=useState(false);const[isAdmin,setIsAdmin]=useState(false);const[analytics,setAnalytics]=useState(null);// Authentication listener\nuseEffect(()=>{const unsubscribe=onAuthStateChanged(auth,async firebaseUser=>{if(!firebaseUser){// User is signed out of Firebase\nhandleLogout();return;}try{// Get a fresh token\nconst token=await firebaseUser.getIdToken(true);// Get the latest claims\nconst idTokenResult=await firebaseUser.getIdTokenResult(true);const hasAdminClaim=idTokenResult.claims.admin===true||idTokenResult.claims.role==='admin';// Check for stored user data\nconst storedUser=localStorage.getItem('user');const userData=storedUser?JSON.parse(storedUser):null;if(userData&&userData.email===firebaseUser.email){// Update the token and admin status in the stored data\nuserData.token=token;userData.isAdmin=hasAdminClaim;userData.role=hasAdminClaim?'admin':userData.role;localStorage.setItem('user',JSON.stringify(userData));setUser(userData);setIsAdmin(hasAdminClaim||userData.role==='admin');console.log('Updated user state with new token and claims:',{email:userData.email,role:userData.role,isAdmin:hasAdminClaim});}console.log('Firebase auth state changed:',firebaseUser.email,'Admin:',hasAdminClaim);}catch(error){console.error('Error refreshing token:',error);handleLogout();}});// Check if we need to show admin login form based on URL\nif(window.location.pathname==='/admin-login'){setShowAdminLogin(true);setShowLogin(false);setShowRegister(false);}// Cleanup subscription\nreturn()=>unsubscribe();},[]);useEffect(()=>{if(user&&user.token){setIsAdmin(user.role==='admin');if(user.role==='admin'){fetchAnalytics();}else{fetchUserContent();}}// eslint-disable-next-line\n},[user]);const fetchUserContent=async()=>{try{var _data$content;if(!user||!user.token){console.log('No user or token available');return;}console.log('Fetching user content with fresh token');// Get a fresh token\nconst currentUser=auth.currentUser;const freshToken=currentUser?await currentUser.getIdToken(true):user.token;// Try local API first, then remote as fallback\nlet res=null;let error=null;try{res=await fetch('http://localhost:5000/api/content/my-content',{method:'GET',headers:{'Authorization':\"Bearer \".concat(freshToken),'Content-Type':'application/json','Accept':'application/json','Origin':'http://localhost:3000'},mode:'cors'});console.log('Local content fetch response status:',res.status);}catch(localError){console.warn('Local content fetch API failed, trying remote:',localError);error=localError;}// If local fails or returns non-2xx, try remote\nif(!res||!res.ok){try{res=await fetch('https://autopromote.onrender.com/api/content/my-content',{method:'GET',headers:{'Authorization':\"Bearer \".concat(freshToken),'Content-Type':'application/json','Accept':'application/json','Origin':'http://localhost:3000'},mode:'cors'});console.log('Remote content fetch response status:',res.status);}catch(remoteError){console.error('Remote content fetch API also failed:',remoteError);error=error||remoteError;}}if(!res||!res.ok){if(res&&res.status===401){console.error('Content fetch authentication failed:',await res.text());// Don't immediately log out - user might still be valid but token expired\nalert('Authentication failed. Please try logging in again.');return;}console.error('Failed to fetch content:',res?res.status:'No response');return;}const data=await res.json();console.log('User content fetched successfully, items:',((_data$content=data.content)===null||_data$content===void 0?void 0:_data$content.length)||0);setContent(data.content||[]);}catch(error){console.error('Failed to fetch content:',error);}};const fetchAnalytics=async()=>{if(!user||!user.token){console.log('No user or token available for analytics');return;}// Check admin status again to be sure\nconst isAdminUser=user.role==='admin'||user.isAdmin===true;if(!isAdminUser){console.error('Non-admin user attempting to fetch analytics');return;}try{console.log('Fetching admin analytics with token');// Try both endpoints - first the local one, then the remote one if needed\nlet res=null;let error=null;try{res=await fetch('http://localhost:5000/api/admin/analytics/overview',{method:'GET',headers:{'Authorization':\"Bearer \".concat(user.token),'Content-Type':'application/json','Accept':'application/json'}});console.log('Local analytics API response status:',res.status);}catch(localError){console.warn('Local analytics API failed, trying remote:',localError);error=localError;}// If local fails or returns non-2xx, try remote\nif(!res||!res.ok){try{res=await fetch('https://autopromote.onrender.com/api/admin/analytics/overview',{method:'GET',headers:{'Authorization':\"Bearer \".concat(user.token),'Content-Type':'application/json','Accept':'application/json'}});console.log('Remote analytics API response status:',res.status);}catch(remoteError){console.error('Remote analytics API also failed:',remoteError);error=error||remoteError;}}if(!res||!res.ok){if(res&&res.status===401){console.error('Admin authentication failed:',await res.text());// Don't log out - user might still be valid but not admin\nsetIsAdmin(false);return;}console.error('Failed to fetch analytics:',res?res.status:'No response');return;}const data=await res.json();console.log('Analytics data received:',Object.keys(data).length,'fields');setAnalytics(data);}catch(error){console.error('Error in fetchAnalytics:',error);}};const loginUser=async(email,password)=>{try{// Sign in with Firebase\nconst userCredential=await signInWithEmailAndPassword(auth,email,password);const{user:firebaseUser}=userCredential;// Get the ID token\nconst idToken=await firebaseUser.getIdToken();console.log('Firebase ID token length:',idToken.length);// Verify token with our backend\nconst res=await fetch('https://autopromote.onrender.com/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json','Origin':'http://localhost:3000'},body:JSON.stringify({idToken})});if(res.ok){const data=await res.json();// Use the idToken directly instead of the one from the server\n// This ensures we're using the full Firebase ID token\nhandleLogin(_objectSpread(_objectSpread({},data.user),{},{token:idToken// Use the original Firebase token\n}));}else{const error=await res.json();throw new Error(error.message||'Login failed');}}catch(error){console.error('Login error:',error);alert(error.message||'Login failed');}};const registerUser=async(name,email,password)=>{try{const res=await fetch('https://autopromote.onrender.com/api/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,password})});if(res.ok){const data=await res.json();handleRegister(_objectSpread(_objectSpread({},data.user),{},{token:data.token}));}else{alert('Registration failed');}}catch(error){console.error('Registration error:',error);alert('Registration error');}};const handleLogin=async userData=>{try{// Clear any existing data\nlocalStorage.clear();// Ensure we have a token\nif(!userData.token){console.error('No token provided in user data');return;}// Log token info for debugging\nconsole.log('Token received, length:',userData.token.length);// Check for admin status from various sources\nconst isAdminRole=userData.role==='admin';const hasAdminClaim=userData.isAdmin===true;const isAdminUser=isAdminRole||hasAdminClaim;// Log the authentication data\nconsole.log('Logging in user:',{email:userData.email,role:userData.role,isAdmin:isAdminUser,hasToken:Boolean(userData.token),tokenLength:userData.token.length});// Update the user data with definitive admin status\nconst updatedUserData=_objectSpread(_objectSpread({},userData),{},{role:isAdminUser?'admin':userData.role,isAdmin:isAdminUser});// Store the complete user data\nlocalStorage.setItem('user',JSON.stringify(updatedUserData));// Update the state\nsetUser(updatedUserData);setIsAdmin(isAdminUser);setShowLogin(false);console.log('Login successful:',updatedUserData.role,'IsAdmin:',isAdminUser);// Fetch data based on user role\nif(isAdminUser){await fetchAnalytics();}else{await fetchUserContent();}}catch(error){console.error('Error during login:',error);handleLogout();}};const handleRegister=userData=>{setUser(userData);setShowRegister(false);};const handleLogout=async()=>{try{// Sign out from Firebase\nawait auth.signOut();// Clear local state\nsetUser(null);setContent([]);setAnalytics(null);setIsAdmin(false);// Clear local storage\nlocalStorage.removeItem('user');localStorage.removeItem('token');localStorage.removeItem('adminToken');}catch(error){console.error('Logout error:',error);}};// Firebase Storage upload with improved token handling\nconst handleUploadContent=async contentData=>{let retryCount=0;const maxRetries=2;const upload=async()=>{try{let url='';if(contentData.type==='article'){url=contentData.articleText||'';}else{const file=contentData.file;if(!file){alert('No file selected!');return;}console.log('Uploading file:',file);if(file.size>50*1024*1024){alert('File is too large. Max 50MB allowed.');return;}const currentUser=auth.currentUser;if(!currentUser){throw new Error('No authenticated user found');}const filePath=\"content/\".concat(Date.now(),\"_\").concat(file.name);const storageRef=ref(storage,filePath);console.log('Starting file upload to:',filePath);const uploadResult=await uploadBytes(storageRef,file);console.log('Upload completed:',uploadResult);url=await getDownloadURL(storageRef);console.log('Download URL obtained:',url);if(!url){alert('Could not get download URL for uploaded file.');return;}}const payload={title:contentData.title,type:contentData.type,url,description:contentData.description||''};// Ensure we have a fresh token for API call\nconst firebaseUser=auth.currentUser;if(!firebaseUser){throw new Error('User not authenticated for API call');}console.log('Getting fresh token for API call...');const freshToken=await firebaseUser.getIdToken(true);console.log('Fresh token obtained, length:',freshToken.length);console.log('Uploading content with fresh token');let res=null;let error=null;// Try local endpoint first\ntry{console.log('Attempting local upload...');res=await fetch('http://localhost:5000/api/content/upload',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(freshToken),'Accept':'application/json','Origin':'http://localhost:3000'},body:JSON.stringify(payload)});console.log('Local content upload response status:',res.status);// If local returns 401, try to get a completely fresh token\nif(res.status===401){console.log('Local auth failed, getting completely fresh token...');const completelyFreshToken=await firebaseUser.getIdToken(true);console.log('Completely fresh token obtained');res=await fetch('http://localhost:5000/api/content/upload',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(completelyFreshToken),'Accept':'application/json','Origin':'http://localhost:3000'},body:JSON.stringify(payload)});console.log('Retry local content upload response status:',res.status);}}catch(localError){console.warn('Local content upload API failed, trying remote:',localError);error=localError;}// If local fails or returns non-2xx, try remote\nif(!res||!res.ok){try{console.log('Attempting remote upload...');// Get another fresh token for remote call\nconst remoteFreshToken=await firebaseUser.getIdToken(true);res=await fetch('https://autopromote.onrender.com/api/content/upload',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(remoteFreshToken),'Accept':'application/json','Origin':'http://localhost:3000'},body:JSON.stringify(payload)});console.log('Remote content upload response status:',res.status);}catch(remoteError){console.error('Remote content upload API also failed:',remoteError);error=error||remoteError;}}if(!res||!res.ok){if(res&&res.status===401){console.error('Content upload authentication failed:',await res.text());alert('Authentication failed. Please try logging in again.');return;}console.error('Failed to upload content:',res?res.status:'No response');const errorText=res?await res.text():'Network error';console.error('Error details:',errorText);alert(\"Failed to upload content: \".concat(errorText));return;}const result=await res.json();console.log('Content uploaded successfully:',result);alert('Content uploaded successfully!');// Refresh content list\nfetchUserContent();}catch(error){console.error('Error uploading content:',error);if(retryCount<maxRetries){retryCount++;console.log(\"Retrying upload (\".concat(retryCount,\"/\").concat(maxRetries,\")...\"));await upload();}else{alert('Error uploading content: '+error.message);}}};await upload();};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(EnvTest,{}),/*#__PURE__*/_jsx(EnvChecker,{}),/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"AutoPromote\"}),/*#__PURE__*/_jsx(\"nav\",{children:user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Welcome, \",user.name,\"!\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowLogin(true);setShowRegister(false);setShowAdminLogin(false);},children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowRegister(true);setShowLogin(false);setShowAdminLogin(false);},children:\"Register\"})]})})]}),/*#__PURE__*/_jsxs(\"main\",{children:[showLogin&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(LoginForm,{onLogin:handleLogin,loginUser:loginUser})}),showAdminLogin&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AdminLoginForm,{onLogin:handleLogin}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',margin:'15px 0'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowLogin(true);setShowRegister(false);setShowAdminLogin(false);},style:{background:'none',border:'none',color:'#1976d2',textDecoration:'underline',cursor:'pointer'},children:\"Back to Login\"})})]}),showRegister&&/*#__PURE__*/_jsx(RegisterForm,{registerUser:registerUser}),user&&/*#__PURE__*/_jsx(_Fragment,{children:isAdmin||user.role==='admin'||user.isAdmin===true?/*#__PURE__*/_jsx(AdminDashboard,{analytics:analytics,user:user}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ContentUploadForm,{onUpload:handleUploadContent}),/*#__PURE__*/_jsx(ContentList,{content:content})]})}),!user&&!showLogin&&!showRegister&&/*#__PURE__*/_jsxs(\"div\",{className:\"WelcomeSection\",style:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',minHeight:'60vh',background:'linear-gradient(135deg, #1976d2 0%, #64b5f6 100%)',color:'#fff',borderRadius:'16px',boxShadow:'0 8px 32px rgba(25, 118, 210, 0.2)',padding:'48px 24px',margin:'32px auto',maxWidth:'500px'},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn-icons-png.flaticon.com/512/3135/3135715.png\",alt:\"AutoPromote Logo\",style:{width:80,marginBottom:24}}),/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'2.5rem',fontWeight:700,marginBottom:16},children:\"Welcome to AutoPromote\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'1.2rem',marginBottom:32,textAlign:'center',maxWidth:400},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:500},children:\"AI-powered platform\"}),\" for content promotion and monetization.\",/*#__PURE__*/_jsx(\"br\",{}),\"Grow your audience, boost your revenue, and automate your success.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowRegister(true),style:{background:'#fff',color:'#1976d2',fontWeight:600,fontSize:'1.1rem',padding:'12px 32px',borderRadius:'8px',border:'none',boxShadow:'0 2px 8px rgba(25, 118, 210, 0.15)',cursor:'pointer',transition:'background 0.2s'},onMouseOver:e=>e.target.style.background='#e3f2fd',onMouseOut:e=>e.target.style.background='#fff',children:\"Get Started\"})]})]})]});}// ...LoginForm, RegisterForm, ContentUploadForm, ContentList, AdminDashboard remain unchanged...\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","auth","db","storage","onAuthStateChanged","ref","uploadBytes","getDownloadURL","LoginForm","AdminLoginForm","RegisterForm","ContentUploadForm","ContentList","AdminDashboard","EnvTest","EnvChecker","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","user","setUser","stored","localStorage","getItem","JSON","parse","content","setContent","showLogin","setShowLogin","showAdminLogin","setShowAdminLogin","showRegister","setShowRegister","isAdmin","setIsAdmin","analytics","setAnalytics","unsubscribe","firebaseUser","handleLogout","token","getIdToken","idTokenResult","getIdTokenResult","hasAdminClaim","claims","admin","role","storedUser","userData","email","setItem","stringify","console","log","error","window","location","pathname","fetchAnalytics","fetchUserContent","_data$content","currentUser","freshToken","res","fetch","method","headers","concat","mode","status","localError","warn","ok","remoteError","text","alert","data","json","length","isAdminUser","Object","keys","loginUser","password","userCredential","signInWithEmailAndPassword","idToken","body","handleLogin","_objectSpread","Error","message","registerUser","name","handleRegister","clear","isAdminRole","hasToken","Boolean","tokenLength","updatedUserData","signOut","removeItem","handleUploadContent","contentData","retryCount","maxRetries","upload","url","type","articleText","file","size","filePath","Date","now","storageRef","uploadResult","payload","title","description","completelyFreshToken","remoteFreshToken","errorText","result","className","children","onClick","onLogin","style","textAlign","margin","background","border","color","textDecoration","cursor","onUpload","display","flexDirection","alignItems","justifyContent","minHeight","borderRadius","boxShadow","padding","maxWidth","src","alt","width","marginBottom","fontSize","fontWeight","transition","onMouseOver","e","target","onMouseOut"],"sources":["C:/Users/Tulani.Mtshwelo/Promo/AutoPromote/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { auth, db, storage } from './firebaseClient';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport LoginForm from './LoginForm';\nimport AdminLoginForm from './AdminLoginForm';\nimport RegisterForm from './RegisterForm';\nimport ContentUploadForm from './ContentUploadForm';\nimport ContentList from './ContentList';\nimport AdminDashboard from './AdminDashboard';\nimport EnvTest from './components/EnvTest';\nimport EnvChecker from './components/EnvChecker';\n\nfunction App() {\n  const [user, setUser] = useState(() => {\n    const stored = localStorage.getItem('user');\n    return stored ? JSON.parse(stored) : null;\n  });\n  const [content, setContent] = useState([]);\n  const [showLogin, setShowLogin] = useState(false);\n  const [showAdminLogin, setShowAdminLogin] = useState(false);\n  const [showRegister, setShowRegister] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [analytics, setAnalytics] = useState(null);\n\n  // Authentication listener\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      if (!firebaseUser) {\n        // User is signed out of Firebase\n        handleLogout();\n        return;\n      }\n\n      try {\n        // Get a fresh token\n        const token = await firebaseUser.getIdToken(true);\n        \n        // Get the latest claims\n        const idTokenResult = await firebaseUser.getIdTokenResult(true);\n        const hasAdminClaim = idTokenResult.claims.admin === true || idTokenResult.claims.role === 'admin';\n        \n        // Check for stored user data\n        const storedUser = localStorage.getItem('user');\n        const userData = storedUser ? JSON.parse(storedUser) : null;\n        \n        if (userData && userData.email === firebaseUser.email) {\n          // Update the token and admin status in the stored data\n          userData.token = token;\n          userData.isAdmin = hasAdminClaim;\n          userData.role = hasAdminClaim ? 'admin' : userData.role;\n          \n          localStorage.setItem('user', JSON.stringify(userData));\n          setUser(userData);\n          setIsAdmin(hasAdminClaim || userData.role === 'admin');\n          \n          console.log('Updated user state with new token and claims:', {\n            email: userData.email,\n            role: userData.role,\n            isAdmin: hasAdminClaim\n          });\n        }\n\n        console.log('Firebase auth state changed:', firebaseUser.email, 'Admin:', hasAdminClaim);\n      } catch (error) {\n        console.error('Error refreshing token:', error);\n        handleLogout();\n      }\n    });\n\n    // Check if we need to show admin login form based on URL\n    if (window.location.pathname === '/admin-login') {\n      setShowAdminLogin(true);\n      setShowLogin(false);\n      setShowRegister(false);\n    }\n\n    // Cleanup subscription\n    return () => unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    if (user && user.token) {\n      setIsAdmin(user.role === 'admin');\n      if (user.role === 'admin') {\n        fetchAnalytics();\n      } else {\n        fetchUserContent();\n      }\n    }\n    // eslint-disable-next-line\n  }, [user]);\n\n  const fetchUserContent = async () => {\n    try {\n      if (!user || !user.token) {\n        console.log('No user or token available');\n        return;\n      }\n\n      console.log('Fetching user content with fresh token');\n\n      // Get a fresh token\n      const currentUser = auth.currentUser;\n      const freshToken = currentUser ? await currentUser.getIdToken(true) : user.token;\n\n      // Try local API first, then remote as fallback\n      let res = null;\n      let error = null;\n\n      try {\n        res = await fetch('http://localhost:5000/api/content/my-content', {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${freshToken}`,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'Origin': 'http://localhost:3000'\n          },\n          mode: 'cors'\n        });\n        console.log('Local content fetch response status:', res.status);\n      } catch (localError) {\n        console.warn('Local content fetch API failed, trying remote:', localError);\n        error = localError;\n      }\n\n      // If local fails or returns non-2xx, try remote\n      if (!res || !res.ok) {\n        try {\n          res = await fetch('https://autopromote.onrender.com/api/content/my-content', {\n            method: 'GET',\n            headers: {\n              'Authorization': `Bearer ${freshToken}`,\n              'Content-Type': 'application/json',\n              'Accept': 'application/json',\n              'Origin': 'http://localhost:3000'\n            },\n            mode: 'cors'\n          });\n          console.log('Remote content fetch response status:', res.status);\n        } catch (remoteError) {\n          console.error('Remote content fetch API also failed:', remoteError);\n          error = error || remoteError;\n        }\n      }\n\n      if (!res || !res.ok) {\n        if (res && res.status === 401) {\n          console.error('Content fetch authentication failed:', await res.text());\n          // Don't immediately log out - user might still be valid but token expired\n          alert('Authentication failed. Please try logging in again.');\n          return;\n        }\n\n        console.error('Failed to fetch content:', res ? res.status : 'No response');\n        return;\n      }\n\n      const data = await res.json();\n      console.log('User content fetched successfully, items:', data.content?.length || 0);\n      setContent(data.content || []);\n    } catch (error) {\n      console.error('Failed to fetch content:', error);\n    }\n  };\n\n  const fetchAnalytics = async () => {\n    if (!user || !user.token) {\n      console.log('No user or token available for analytics');\n      return;\n    }\n    \n    // Check admin status again to be sure\n    const isAdminUser = user.role === 'admin' || user.isAdmin === true;\n    if (!isAdminUser) {\n      console.error('Non-admin user attempting to fetch analytics');\n      return;\n    }\n    \n    try {\n      console.log('Fetching admin analytics with token');\n      \n      // Try both endpoints - first the local one, then the remote one if needed\n      let res = null;\n      let error = null;\n      \n      try {\n        res = await fetch('http://localhost:5000/api/admin/analytics/overview', {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${user.token}`,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          }\n        });\n        console.log('Local analytics API response status:', res.status);\n      } catch (localError) {\n        console.warn('Local analytics API failed, trying remote:', localError);\n        error = localError;\n      }\n      \n      // If local fails or returns non-2xx, try remote\n      if (!res || !res.ok) {\n        try {\n          res = await fetch('https://autopromote.onrender.com/api/admin/analytics/overview', {\n            method: 'GET',\n            headers: {\n              'Authorization': `Bearer ${user.token}`,\n              'Content-Type': 'application/json',\n              'Accept': 'application/json'\n            }\n          });\n          console.log('Remote analytics API response status:', res.status);\n        } catch (remoteError) {\n          console.error('Remote analytics API also failed:', remoteError);\n          error = error || remoteError;\n        }\n      }\n      \n      if (!res || !res.ok) {\n        if (res && res.status === 401) {\n          console.error('Admin authentication failed:', await res.text());\n          // Don't log out - user might still be valid but not admin\n          setIsAdmin(false);\n          return;\n        }\n        \n        console.error('Failed to fetch analytics:', res ? res.status : 'No response');\n        return;\n      }\n      \n      const data = await res.json();\n      console.log('Analytics data received:', Object.keys(data).length, 'fields');\n      setAnalytics(data);\n    } catch (error) {\n      console.error('Error in fetchAnalytics:', error);\n    }\n  };\n\n  const loginUser = async (email, password) => {\n    try {\n      // Sign in with Firebase\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\n      const { user: firebaseUser } = userCredential;\n\n      // Get the ID token\n      const idToken = await firebaseUser.getIdToken();\n      console.log('Firebase ID token length:', idToken.length);\n\n      // Verify token with our backend\n      const res = await fetch('https://autopromote.onrender.com/api/auth/login', {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'Origin': 'http://localhost:3000'\n        },\n        body: JSON.stringify({ idToken }),\n      });\n\n      if (res.ok) {\n        const data = await res.json();\n        // Use the idToken directly instead of the one from the server\n        // This ensures we're using the full Firebase ID token\n        handleLogin({\n          ...data.user,\n          token: idToken // Use the original Firebase token\n        });\n      } else {\n        const error = await res.json();\n        throw new Error(error.message || 'Login failed');\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      alert(error.message || 'Login failed');\n    }\n  };\n\n  const registerUser = async (name, email, password) => {\n    try {\n      const res = await fetch('https://autopromote.onrender.com/api/auth/register', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name, email, password }),\n      });\n      if (res.ok) {\n        const data = await res.json();\n        handleRegister({ ...data.user, token: data.token });\n      } else {\n        alert('Registration failed');\n      }\n    } catch (error) {\n      console.error('Registration error:', error);\n      alert('Registration error');\n    }\n  };\n\n  const handleLogin = async (userData) => {\n    try {\n      // Clear any existing data\n      localStorage.clear();\n      \n      // Ensure we have a token\n      if (!userData.token) {\n        console.error('No token provided in user data');\n        return;\n      }\n      \n      // Log token info for debugging\n      console.log('Token received, length:', userData.token.length);\n      \n      // Check for admin status from various sources\n      const isAdminRole = userData.role === 'admin';\n      const hasAdminClaim = userData.isAdmin === true;\n      const isAdminUser = isAdminRole || hasAdminClaim;\n      \n      // Log the authentication data\n      console.log('Logging in user:', {\n        email: userData.email,\n        role: userData.role,\n        isAdmin: isAdminUser,\n        hasToken: Boolean(userData.token),\n        tokenLength: userData.token.length\n      });\n      \n      // Update the user data with definitive admin status\n      const updatedUserData = {\n        ...userData,\n        role: isAdminUser ? 'admin' : userData.role,\n        isAdmin: isAdminUser\n      };\n      \n      // Store the complete user data\n      localStorage.setItem('user', JSON.stringify(updatedUserData));\n      \n      // Update the state\n      setUser(updatedUserData);\n      setIsAdmin(isAdminUser);\n      setShowLogin(false);\n      \n      console.log('Login successful:', updatedUserData.role, 'IsAdmin:', isAdminUser);\n      \n      // Fetch data based on user role\n      if (isAdminUser) {\n        await fetchAnalytics();\n      } else {\n        await fetchUserContent();\n      }\n    } catch (error) {\n      console.error('Error during login:', error);\n      handleLogout();\n    }\n  };\n\n  const handleRegister = (userData) => {\n    setUser(userData);\n    setShowRegister(false);\n  };\n\n  const handleLogout = async () => {\n    try {\n      // Sign out from Firebase\n      await auth.signOut();\n      \n      // Clear local state\n      setUser(null);\n      setContent([]);\n      setAnalytics(null);\n      setIsAdmin(false);\n      \n      // Clear local storage\n      localStorage.removeItem('user');\n      localStorage.removeItem('token');\n      localStorage.removeItem('adminToken');\n    } catch (error) {\n      console.error('Logout error:', error);\n    }\n  };\n\n  // Firebase Storage upload with improved token handling\n  const handleUploadContent = async (contentData) => {\n    let retryCount = 0;\n    const maxRetries = 2;\n\n    const upload = async () => {\n      try {\n        let url = '';\n        if (contentData.type === 'article') {\n          url = contentData.articleText || '';\n        } else {\n          const file = contentData.file;\n          if (!file) {\n            alert('No file selected!');\n            return;\n          }\n\n          console.log('Uploading file:', file);\n\n          if (file.size > 50 * 1024 * 1024) {\n            alert('File is too large. Max 50MB allowed.');\n            return;\n          }\n\n          const currentUser = auth.currentUser;\n          if (!currentUser) {\n            throw new Error('No authenticated user found');\n          }\n\n          const filePath = `content/${Date.now()}_${file.name}`;\n          const storageRef = ref(storage, filePath);\n\n          console.log('Starting file upload to:', filePath);\n\n          const uploadResult = await uploadBytes(storageRef, file);\n          console.log('Upload completed:', uploadResult);\n\n          url = await getDownloadURL(storageRef);\n          console.log('Download URL obtained:', url);\n\n          if (!url) {\n            alert('Could not get download URL for uploaded file.');\n            return;\n          }\n        }\n\n        const payload = {\n          title: contentData.title,\n          type: contentData.type,\n          url,\n          description: contentData.description || '',\n        };\n\n        // Ensure we have a fresh token for API call\n        const firebaseUser = auth.currentUser;\n        if (!firebaseUser) {\n          throw new Error('User not authenticated for API call');\n        }\n\n        console.log('Getting fresh token for API call...');\n        const freshToken = await firebaseUser.getIdToken(true);\n        console.log('Fresh token obtained, length:', freshToken.length);\n\n        console.log('Uploading content with fresh token');\n\n        let res = null;\n        let error = null;\n\n        // Try local endpoint first\n        try {\n          console.log('Attempting local upload...');\n          res = await fetch('http://localhost:5000/api/content/upload', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${freshToken}`,\n              'Accept': 'application/json',\n              'Origin': 'http://localhost:3000'\n            },\n            body: JSON.stringify(payload),\n          });\n          console.log('Local content upload response status:', res.status);\n\n          // If local returns 401, try to get a completely fresh token\n          if (res.status === 401) {\n            console.log('Local auth failed, getting completely fresh token...');\n            const completelyFreshToken = await firebaseUser.getIdToken(true);\n            console.log('Completely fresh token obtained');\n\n            res = await fetch('http://localhost:5000/api/content/upload', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${completelyFreshToken}`,\n                'Accept': 'application/json',\n                'Origin': 'http://localhost:3000'\n              },\n              body: JSON.stringify(payload),\n            });\n            console.log('Retry local content upload response status:', res.status);\n          }\n        } catch (localError) {\n          console.warn('Local content upload API failed, trying remote:', localError);\n          error = localError;\n        }\n\n        // If local fails or returns non-2xx, try remote\n        if (!res || !res.ok) {\n          try {\n            console.log('Attempting remote upload...');\n            // Get another fresh token for remote call\n            const remoteFreshToken = await firebaseUser.getIdToken(true);\n            res = await fetch('https://autopromote.onrender.com/api/content/upload', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${remoteFreshToken}`,\n                'Accept': 'application/json',\n                'Origin': 'http://localhost:3000'\n              },\n              body: JSON.stringify(payload),\n            });\n            console.log('Remote content upload response status:', res.status);\n          } catch (remoteError) {\n            console.error('Remote content upload API also failed:', remoteError);\n            error = error || remoteError;\n          }\n        }\n\n        if (!res || !res.ok) {\n          if (res && res.status === 401) {\n            console.error('Content upload authentication failed:', await res.text());\n            alert('Authentication failed. Please try logging in again.');\n            return;\n          }\n\n          console.error('Failed to upload content:', res ? res.status : 'No response');\n          const errorText = res ? await res.text() : 'Network error';\n          console.error('Error details:', errorText);\n          alert(`Failed to upload content: ${errorText}`);\n          return;\n        }\n\n        const result = await res.json();\n        console.log('Content uploaded successfully:', result);\n        alert('Content uploaded successfully!');\n\n        // Refresh content list\n        fetchUserContent();\n      } catch (error) {\n        console.error('Error uploading content:', error);\n        if (retryCount < maxRetries) {\n          retryCount++;\n          console.log(`Retrying upload (${retryCount}/${maxRetries})...`);\n          await upload();\n        } else {\n          alert('Error uploading content: ' + error.message);\n        }\n      }\n    };\n\n    await upload();\n  };\n\n  return (\n    <div className=\"App\">\n      <EnvTest />\n      <EnvChecker />\n      <header className=\"App-header\">\n        <h1>AutoPromote</h1>\n        <nav>\n          {user ? (\n            <div>\n              <span>Welcome, {user.name}!</span>\n              <button onClick={handleLogout}>Logout</button>\n            </div>\n          ) : (\n            <div>\n              <button onClick={() => { setShowLogin(true); setShowRegister(false); setShowAdminLogin(false); }}>Login</button>\n              <button onClick={() => { setShowRegister(true); setShowLogin(false); setShowAdminLogin(false); }}>Register</button>\n            </div>\n          )}\n        </nav>\n      </header>\n\n      <main>\n        {showLogin && (\n          <div>\n            <LoginForm onLogin={handleLogin} loginUser={loginUser} />\n          </div>\n        )}\n        \n        {/* Admin login form is only rendered when showAdminLogin is true */}\n        {showAdminLogin && (\n          <div>\n            <AdminLoginForm onLogin={handleLogin} />\n            <div style={{ textAlign: 'center', margin: '15px 0' }}>\n              <button \n                onClick={() => { setShowLogin(true); setShowRegister(false); setShowAdminLogin(false); }}\n                style={{ \n                  background: 'none', \n                  border: 'none', \n                  color: '#1976d2', \n                  textDecoration: 'underline',\n                  cursor: 'pointer' \n                }}\n              >\n                Back to Login\n              </button>\n            </div>\n          </div>\n        )}\n        \n        {showRegister && <RegisterForm registerUser={registerUser} />}\n\n        {user && (\n          <>\n            {isAdmin || user.role === 'admin' || user.isAdmin === true ? (\n              <AdminDashboard analytics={analytics} user={user} />\n            ) : (\n              <div>\n                <ContentUploadForm onUpload={handleUploadContent} />\n                <ContentList content={content} />\n              </div>\n            )}\n          </>\n        )}\n\n        {!user && !showLogin && !showRegister && (\n          <div className=\"WelcomeSection\" style={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            minHeight: '60vh',\n            background: 'linear-gradient(135deg, #1976d2 0%, #64b5f6 100%)',\n            color: '#fff',\n            borderRadius: '16px',\n            boxShadow: '0 8px 32px rgba(25, 118, 210, 0.2)',\n            padding: '48px 24px',\n            margin: '32px auto',\n            maxWidth: '500px',\n          }}>\n            <img src=\"https://cdn-icons-png.flaticon.com/512/3135/3135715.png\" alt=\"AutoPromote Logo\" style={{ width: 80, marginBottom: 24 }} />\n            <h2 style={{ fontSize: '2.5rem', fontWeight: 700, marginBottom: 16 }}>Welcome to AutoPromote</h2>\n            <p style={{ fontSize: '1.2rem', marginBottom: 32, textAlign: 'center', maxWidth: 400 }}>\n              <span style={{ fontWeight: 500 }}>AI-powered platform</span> for content promotion and monetization.<br />\n              Grow your audience, boost your revenue, and automate your success.\n            </p>\n            <button \n              onClick={() => setShowRegister(true)}\n              style={{\n                background: '#fff',\n                color: '#1976d2',\n                fontWeight: 600,\n                fontSize: '1.1rem',\n                padding: '12px 32px',\n                borderRadius: '8px',\n                border: 'none',\n                boxShadow: '0 2px 8px rgba(25, 118, 210, 0.15)',\n                cursor: 'pointer',\n                transition: 'background 0.2s',\n              }}\n              onMouseOver={e => e.target.style.background = '#e3f2fd'}\n              onMouseOut={e => e.target.style.background = '#fff'}\n            >\n              Get Started\n            </button>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\n// ...LoginForm, RegisterForm, ContentUploadForm, ContentList, AdminDashboard remain unchanged...\n\nexport default App;"],"mappings":"wIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,WAAW,CAClB,OAASC,IAAI,CAAEC,EAAE,CAAEC,OAAO,KAAQ,kBAAkB,CACpD,OAASC,kBAAkB,KAAQ,eAAe,CAClD,OAASC,GAAG,CAAEC,WAAW,CAAEC,cAAc,KAAQ,kBAAkB,CACnE,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,CAAAC,iBAAiB,KAAM,qBAAqB,CACnD,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEjD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGzB,QAAQ,CAAC,IAAM,CACrC,KAAM,CAAA0B,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC3C,MAAO,CAAAF,MAAM,CAAGG,IAAI,CAACC,KAAK,CAACJ,MAAM,CAAC,CAAG,IAAI,CAC3C,CAAC,CAAC,CACF,KAAM,CAACK,OAAO,CAAEC,UAAU,CAAC,CAAGhC,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACiC,SAAS,CAAEC,YAAY,CAAC,CAAGlC,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACmC,cAAc,CAAEC,iBAAiB,CAAC,CAAGpC,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACqC,YAAY,CAAEC,eAAe,CAAC,CAAGtC,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACuC,OAAO,CAAEC,UAAU,CAAC,CAAGxC,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACyC,SAAS,CAAEC,YAAY,CAAC,CAAG1C,QAAQ,CAAC,IAAI,CAAC,CAEhD;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA0C,WAAW,CAAGtC,kBAAkB,CAACH,IAAI,CAAE,KAAO,CAAA0C,YAAY,EAAK,CACnE,GAAI,CAACA,YAAY,CAAE,CACjB;AACAC,YAAY,CAAC,CAAC,CACd,OACF,CAEA,GAAI,CACF;AACA,KAAM,CAAAC,KAAK,CAAG,KAAM,CAAAF,YAAY,CAACG,UAAU,CAAC,IAAI,CAAC,CAEjD;AACA,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAAJ,YAAY,CAACK,gBAAgB,CAAC,IAAI,CAAC,CAC/D,KAAM,CAAAC,aAAa,CAAGF,aAAa,CAACG,MAAM,CAACC,KAAK,GAAK,IAAI,EAAIJ,aAAa,CAACG,MAAM,CAACE,IAAI,GAAK,OAAO,CAElG;AACA,KAAM,CAAAC,UAAU,CAAG3B,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,KAAM,CAAA2B,QAAQ,CAAGD,UAAU,CAAGzB,IAAI,CAACC,KAAK,CAACwB,UAAU,CAAC,CAAG,IAAI,CAE3D,GAAIC,QAAQ,EAAIA,QAAQ,CAACC,KAAK,GAAKZ,YAAY,CAACY,KAAK,CAAE,CACrD;AACAD,QAAQ,CAACT,KAAK,CAAGA,KAAK,CACtBS,QAAQ,CAAChB,OAAO,CAAGW,aAAa,CAChCK,QAAQ,CAACF,IAAI,CAAGH,aAAa,CAAG,OAAO,CAAGK,QAAQ,CAACF,IAAI,CAEvD1B,YAAY,CAAC8B,OAAO,CAAC,MAAM,CAAE5B,IAAI,CAAC6B,SAAS,CAACH,QAAQ,CAAC,CAAC,CACtD9B,OAAO,CAAC8B,QAAQ,CAAC,CACjBf,UAAU,CAACU,aAAa,EAAIK,QAAQ,CAACF,IAAI,GAAK,OAAO,CAAC,CAEtDM,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAE,CAC3DJ,KAAK,CAAED,QAAQ,CAACC,KAAK,CACrBH,IAAI,CAAEE,QAAQ,CAACF,IAAI,CACnBd,OAAO,CAAEW,aACX,CAAC,CAAC,CACJ,CAEAS,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAEhB,YAAY,CAACY,KAAK,CAAE,QAAQ,CAAEN,aAAa,CAAC,CAC1F,CAAE,MAAOW,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/ChB,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAAC,CAEF;AACA,GAAIiB,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAK,cAAc,CAAE,CAC/C5B,iBAAiB,CAAC,IAAI,CAAC,CACvBF,YAAY,CAAC,KAAK,CAAC,CACnBI,eAAe,CAAC,KAAK,CAAC,CACxB,CAEA;AACA,MAAO,IAAMK,WAAW,CAAC,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAEN1C,SAAS,CAAC,IAAM,CACd,GAAIuB,IAAI,EAAIA,IAAI,CAACsB,KAAK,CAAE,CACtBN,UAAU,CAAChB,IAAI,CAAC6B,IAAI,GAAK,OAAO,CAAC,CACjC,GAAI7B,IAAI,CAAC6B,IAAI,GAAK,OAAO,CAAE,CACzBY,cAAc,CAAC,CAAC,CAClB,CAAC,IAAM,CACLC,gBAAgB,CAAC,CAAC,CACpB,CACF,CACA;AACF,CAAC,CAAE,CAAC1C,IAAI,CAAC,CAAC,CAEV,KAAM,CAAA0C,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,KAAAC,aAAA,CACF,GAAI,CAAC3C,IAAI,EAAI,CAACA,IAAI,CAACsB,KAAK,CAAE,CACxBa,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC,CACzC,OACF,CAEAD,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CAErD;AACA,KAAM,CAAAQ,WAAW,CAAGlE,IAAI,CAACkE,WAAW,CACpC,KAAM,CAAAC,UAAU,CAAGD,WAAW,CAAG,KAAM,CAAAA,WAAW,CAACrB,UAAU,CAAC,IAAI,CAAC,CAAGvB,IAAI,CAACsB,KAAK,CAEhF;AACA,GAAI,CAAAwB,GAAG,CAAG,IAAI,CACd,GAAI,CAAAT,KAAK,CAAG,IAAI,CAEhB,GAAI,CACFS,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,8CAA8C,CAAE,CAChEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYL,UAAU,CAAE,CACvC,cAAc,CAAE,kBAAkB,CAClC,QAAQ,CAAE,kBAAkB,CAC5B,QAAQ,CAAE,uBACZ,CAAC,CACDM,IAAI,CAAE,MACR,CAAC,CAAC,CACFhB,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAEU,GAAG,CAACM,MAAM,CAAC,CACjE,CAAE,MAAOC,UAAU,CAAE,CACnBlB,OAAO,CAACmB,IAAI,CAAC,gDAAgD,CAAED,UAAU,CAAC,CAC1EhB,KAAK,CAAGgB,UAAU,CACpB,CAEA;AACA,GAAI,CAACP,GAAG,EAAI,CAACA,GAAG,CAACS,EAAE,CAAE,CACnB,GAAI,CACFT,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,yDAAyD,CAAE,CAC3EC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYL,UAAU,CAAE,CACvC,cAAc,CAAE,kBAAkB,CAClC,QAAQ,CAAE,kBAAkB,CAC5B,QAAQ,CAAE,uBACZ,CAAC,CACDM,IAAI,CAAE,MACR,CAAC,CAAC,CACFhB,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAEU,GAAG,CAACM,MAAM,CAAC,CAClE,CAAE,MAAOI,WAAW,CAAE,CACpBrB,OAAO,CAACE,KAAK,CAAC,uCAAuC,CAAEmB,WAAW,CAAC,CACnEnB,KAAK,CAAGA,KAAK,EAAImB,WAAW,CAC9B,CACF,CAEA,GAAI,CAACV,GAAG,EAAI,CAACA,GAAG,CAACS,EAAE,CAAE,CACnB,GAAIT,GAAG,EAAIA,GAAG,CAACM,MAAM,GAAK,GAAG,CAAE,CAC7BjB,OAAO,CAACE,KAAK,CAAC,sCAAsC,CAAE,KAAM,CAAAS,GAAG,CAACW,IAAI,CAAC,CAAC,CAAC,CACvE;AACAC,KAAK,CAAC,qDAAqD,CAAC,CAC5D,OACF,CAEAvB,OAAO,CAACE,KAAK,CAAC,0BAA0B,CAAES,GAAG,CAAGA,GAAG,CAACM,MAAM,CAAG,aAAa,CAAC,CAC3E,OACF,CAEA,KAAM,CAAAO,IAAI,CAAG,KAAM,CAAAb,GAAG,CAACc,IAAI,CAAC,CAAC,CAC7BzB,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAE,EAAAO,aAAA,CAAAgB,IAAI,CAACpD,OAAO,UAAAoC,aAAA,iBAAZA,aAAA,CAAckB,MAAM,GAAI,CAAC,CAAC,CACnFrD,UAAU,CAACmD,IAAI,CAACpD,OAAO,EAAI,EAAE,CAAC,CAChC,CAAE,MAAO8B,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CACF,CAAC,CAED,KAAM,CAAAI,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CAACzC,IAAI,EAAI,CAACA,IAAI,CAACsB,KAAK,CAAE,CACxBa,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC,CACvD,OACF,CAEA;AACA,KAAM,CAAA0B,WAAW,CAAG9D,IAAI,CAAC6B,IAAI,GAAK,OAAO,EAAI7B,IAAI,CAACe,OAAO,GAAK,IAAI,CAClE,GAAI,CAAC+C,WAAW,CAAE,CAChB3B,OAAO,CAACE,KAAK,CAAC,8CAA8C,CAAC,CAC7D,OACF,CAEA,GAAI,CACFF,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAElD;AACA,GAAI,CAAAU,GAAG,CAAG,IAAI,CACd,GAAI,CAAAT,KAAK,CAAG,IAAI,CAEhB,GAAI,CACFS,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,oDAAoD,CAAE,CACtEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYlD,IAAI,CAACsB,KAAK,CAAE,CACvC,cAAc,CAAE,kBAAkB,CAClC,QAAQ,CAAE,kBACZ,CACF,CAAC,CAAC,CACFa,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAEU,GAAG,CAACM,MAAM,CAAC,CACjE,CAAE,MAAOC,UAAU,CAAE,CACnBlB,OAAO,CAACmB,IAAI,CAAC,4CAA4C,CAAED,UAAU,CAAC,CACtEhB,KAAK,CAAGgB,UAAU,CACpB,CAEA;AACA,GAAI,CAACP,GAAG,EAAI,CAACA,GAAG,CAACS,EAAE,CAAE,CACnB,GAAI,CACFT,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,+DAA+D,CAAE,CACjFC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYlD,IAAI,CAACsB,KAAK,CAAE,CACvC,cAAc,CAAE,kBAAkB,CAClC,QAAQ,CAAE,kBACZ,CACF,CAAC,CAAC,CACFa,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAEU,GAAG,CAACM,MAAM,CAAC,CAClE,CAAE,MAAOI,WAAW,CAAE,CACpBrB,OAAO,CAACE,KAAK,CAAC,mCAAmC,CAAEmB,WAAW,CAAC,CAC/DnB,KAAK,CAAGA,KAAK,EAAImB,WAAW,CAC9B,CACF,CAEA,GAAI,CAACV,GAAG,EAAI,CAACA,GAAG,CAACS,EAAE,CAAE,CACnB,GAAIT,GAAG,EAAIA,GAAG,CAACM,MAAM,GAAK,GAAG,CAAE,CAC7BjB,OAAO,CAACE,KAAK,CAAC,8BAA8B,CAAE,KAAM,CAAAS,GAAG,CAACW,IAAI,CAAC,CAAC,CAAC,CAC/D;AACAzC,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEAmB,OAAO,CAACE,KAAK,CAAC,4BAA4B,CAAES,GAAG,CAAGA,GAAG,CAACM,MAAM,CAAG,aAAa,CAAC,CAC7E,OACF,CAEA,KAAM,CAAAO,IAAI,CAAG,KAAM,CAAAb,GAAG,CAACc,IAAI,CAAC,CAAC,CAC7BzB,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAE2B,MAAM,CAACC,IAAI,CAACL,IAAI,CAAC,CAACE,MAAM,CAAE,QAAQ,CAAC,CAC3E3C,YAAY,CAACyC,IAAI,CAAC,CACpB,CAAE,MAAOtB,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CACF,CAAC,CAED,KAAM,CAAA4B,SAAS,CAAG,KAAAA,CAAOjC,KAAK,CAAEkC,QAAQ,GAAK,CAC3C,GAAI,CACF;AACA,KAAM,CAAAC,cAAc,CAAG,KAAM,CAAAC,0BAA0B,CAAC1F,IAAI,CAAEsD,KAAK,CAAEkC,QAAQ,CAAC,CAC9E,KAAM,CAAElE,IAAI,CAAEoB,YAAa,CAAC,CAAG+C,cAAc,CAE7C;AACA,KAAM,CAAAE,OAAO,CAAG,KAAM,CAAAjD,YAAY,CAACG,UAAU,CAAC,CAAC,CAC/CY,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEiC,OAAO,CAACR,MAAM,CAAC,CAExD;AACA,KAAM,CAAAf,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,iDAAiD,CAAE,CACzEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,QAAQ,CAAE,kBAAkB,CAC5B,QAAQ,CAAE,uBACZ,CAAC,CACDqB,IAAI,CAAEjE,IAAI,CAAC6B,SAAS,CAAC,CAAEmC,OAAQ,CAAC,CAClC,CAAC,CAAC,CAEF,GAAIvB,GAAG,CAACS,EAAE,CAAE,CACV,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAb,GAAG,CAACc,IAAI,CAAC,CAAC,CAC7B;AACA;AACAW,WAAW,CAAAC,aAAA,CAAAA,aAAA,IACNb,IAAI,CAAC3D,IAAI,MACZsB,KAAK,CAAE+C,OAAQ;AAAA,EAChB,CAAC,CACJ,CAAC,IAAM,CACL,KAAM,CAAAhC,KAAK,CAAG,KAAM,CAAAS,GAAG,CAACc,IAAI,CAAC,CAAC,CAC9B,KAAM,IAAI,CAAAa,KAAK,CAACpC,KAAK,CAACqC,OAAO,EAAI,cAAc,CAAC,CAClD,CACF,CAAE,MAAOrC,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACpCqB,KAAK,CAACrB,KAAK,CAACqC,OAAO,EAAI,cAAc,CAAC,CACxC,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAOC,IAAI,CAAE5C,KAAK,CAAEkC,QAAQ,GAAK,CACpD,GAAI,CACF,KAAM,CAAApB,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,oDAAoD,CAAE,CAC5EC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CqB,IAAI,CAAEjE,IAAI,CAAC6B,SAAS,CAAC,CAAE0C,IAAI,CAAE5C,KAAK,CAAEkC,QAAS,CAAC,CAChD,CAAC,CAAC,CACF,GAAIpB,GAAG,CAACS,EAAE,CAAE,CACV,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAb,GAAG,CAACc,IAAI,CAAC,CAAC,CAC7BiB,cAAc,CAAAL,aAAA,CAAAA,aAAA,IAAMb,IAAI,CAAC3D,IAAI,MAAEsB,KAAK,CAAEqC,IAAI,CAACrC,KAAK,EAAE,CAAC,CACrD,CAAC,IAAM,CACLoC,KAAK,CAAC,qBAAqB,CAAC,CAC9B,CACF,CAAE,MAAOrB,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3CqB,KAAK,CAAC,oBAAoB,CAAC,CAC7B,CACF,CAAC,CAED,KAAM,CAAAa,WAAW,CAAG,KAAO,CAAAxC,QAAQ,EAAK,CACtC,GAAI,CACF;AACA5B,YAAY,CAAC2E,KAAK,CAAC,CAAC,CAEpB;AACA,GAAI,CAAC/C,QAAQ,CAACT,KAAK,CAAE,CACnBa,OAAO,CAACE,KAAK,CAAC,gCAAgC,CAAC,CAC/C,OACF,CAEA;AACAF,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEL,QAAQ,CAACT,KAAK,CAACuC,MAAM,CAAC,CAE7D;AACA,KAAM,CAAAkB,WAAW,CAAGhD,QAAQ,CAACF,IAAI,GAAK,OAAO,CAC7C,KAAM,CAAAH,aAAa,CAAGK,QAAQ,CAAChB,OAAO,GAAK,IAAI,CAC/C,KAAM,CAAA+C,WAAW,CAAGiB,WAAW,EAAIrD,aAAa,CAEhD;AACAS,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAE,CAC9BJ,KAAK,CAAED,QAAQ,CAACC,KAAK,CACrBH,IAAI,CAAEE,QAAQ,CAACF,IAAI,CACnBd,OAAO,CAAE+C,WAAW,CACpBkB,QAAQ,CAAEC,OAAO,CAAClD,QAAQ,CAACT,KAAK,CAAC,CACjC4D,WAAW,CAAEnD,QAAQ,CAACT,KAAK,CAACuC,MAC9B,CAAC,CAAC,CAEF;AACA,KAAM,CAAAsB,eAAe,CAAAX,aAAA,CAAAA,aAAA,IAChBzC,QAAQ,MACXF,IAAI,CAAEiC,WAAW,CAAG,OAAO,CAAG/B,QAAQ,CAACF,IAAI,CAC3Cd,OAAO,CAAE+C,WAAW,EACrB,CAED;AACA3D,YAAY,CAAC8B,OAAO,CAAC,MAAM,CAAE5B,IAAI,CAAC6B,SAAS,CAACiD,eAAe,CAAC,CAAC,CAE7D;AACAlF,OAAO,CAACkF,eAAe,CAAC,CACxBnE,UAAU,CAAC8C,WAAW,CAAC,CACvBpD,YAAY,CAAC,KAAK,CAAC,CAEnByB,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAE+C,eAAe,CAACtD,IAAI,CAAE,UAAU,CAAEiC,WAAW,CAAC,CAE/E;AACA,GAAIA,WAAW,CAAE,CACf,KAAM,CAAArB,cAAc,CAAC,CAAC,CACxB,CAAC,IAAM,CACL,KAAM,CAAAC,gBAAgB,CAAC,CAAC,CAC1B,CACF,CAAE,MAAOL,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3ChB,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAED,KAAM,CAAAwD,cAAc,CAAI9C,QAAQ,EAAK,CACnC9B,OAAO,CAAC8B,QAAQ,CAAC,CACjBjB,eAAe,CAAC,KAAK,CAAC,CACxB,CAAC,CAED,KAAM,CAAAO,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF;AACA,KAAM,CAAA3C,IAAI,CAAC0G,OAAO,CAAC,CAAC,CAEpB;AACAnF,OAAO,CAAC,IAAI,CAAC,CACbO,UAAU,CAAC,EAAE,CAAC,CACdU,YAAY,CAAC,IAAI,CAAC,CAClBF,UAAU,CAAC,KAAK,CAAC,CAEjB;AACAb,YAAY,CAACkF,UAAU,CAAC,MAAM,CAAC,CAC/BlF,YAAY,CAACkF,UAAU,CAAC,OAAO,CAAC,CAChClF,YAAY,CAACkF,UAAU,CAAC,YAAY,CAAC,CACvC,CAAE,MAAOhD,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACvC,CACF,CAAC,CAED;AACA,KAAM,CAAAiD,mBAAmB,CAAG,KAAO,CAAAC,WAAW,EAAK,CACjD,GAAI,CAAAC,UAAU,CAAG,CAAC,CAClB,KAAM,CAAAC,UAAU,CAAG,CAAC,CAEpB,KAAM,CAAAC,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACF,GAAI,CAAAC,GAAG,CAAG,EAAE,CACZ,GAAIJ,WAAW,CAACK,IAAI,GAAK,SAAS,CAAE,CAClCD,GAAG,CAAGJ,WAAW,CAACM,WAAW,EAAI,EAAE,CACrC,CAAC,IAAM,CACL,KAAM,CAAAC,IAAI,CAAGP,WAAW,CAACO,IAAI,CAC7B,GAAI,CAACA,IAAI,CAAE,CACTpC,KAAK,CAAC,mBAAmB,CAAC,CAC1B,OACF,CAEAvB,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAE0D,IAAI,CAAC,CAEpC,GAAIA,IAAI,CAACC,IAAI,CAAG,EAAE,CAAG,IAAI,CAAG,IAAI,CAAE,CAChCrC,KAAK,CAAC,sCAAsC,CAAC,CAC7C,OACF,CAEA,KAAM,CAAAd,WAAW,CAAGlE,IAAI,CAACkE,WAAW,CACpC,GAAI,CAACA,WAAW,CAAE,CAChB,KAAM,IAAI,CAAA6B,KAAK,CAAC,6BAA6B,CAAC,CAChD,CAEA,KAAM,CAAAuB,QAAQ,YAAA9C,MAAA,CAAc+C,IAAI,CAACC,GAAG,CAAC,CAAC,MAAAhD,MAAA,CAAI4C,IAAI,CAAClB,IAAI,CAAE,CACrD,KAAM,CAAAuB,UAAU,CAAGrH,GAAG,CAACF,OAAO,CAAEoH,QAAQ,CAAC,CAEzC7D,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAE4D,QAAQ,CAAC,CAEjD,KAAM,CAAAI,YAAY,CAAG,KAAM,CAAArH,WAAW,CAACoH,UAAU,CAAEL,IAAI,CAAC,CACxD3D,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEgE,YAAY,CAAC,CAE9CT,GAAG,CAAG,KAAM,CAAA3G,cAAc,CAACmH,UAAU,CAAC,CACtChE,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEuD,GAAG,CAAC,CAE1C,GAAI,CAACA,GAAG,CAAE,CACRjC,KAAK,CAAC,+CAA+C,CAAC,CACtD,OACF,CACF,CAEA,KAAM,CAAA2C,OAAO,CAAG,CACdC,KAAK,CAAEf,WAAW,CAACe,KAAK,CACxBV,IAAI,CAAEL,WAAW,CAACK,IAAI,CACtBD,GAAG,CACHY,WAAW,CAAEhB,WAAW,CAACgB,WAAW,EAAI,EAC1C,CAAC,CAED;AACA,KAAM,CAAAnF,YAAY,CAAG1C,IAAI,CAACkE,WAAW,CACrC,GAAI,CAACxB,YAAY,CAAE,CACjB,KAAM,IAAI,CAAAqD,KAAK,CAAC,qCAAqC,CAAC,CACxD,CAEAtC,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAClD,KAAM,CAAAS,UAAU,CAAG,KAAM,CAAAzB,YAAY,CAACG,UAAU,CAAC,IAAI,CAAC,CACtDY,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAES,UAAU,CAACgB,MAAM,CAAC,CAE/D1B,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC,CAEjD,GAAI,CAAAU,GAAG,CAAG,IAAI,CACd,GAAI,CAAAT,KAAK,CAAG,IAAI,CAEhB;AACA,GAAI,CACFF,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC,CACzCU,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,0CAA0C,CAAE,CAC5DC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYL,UAAU,CAAE,CACvC,QAAQ,CAAE,kBAAkB,CAC5B,QAAQ,CAAE,uBACZ,CAAC,CACDyB,IAAI,CAAEjE,IAAI,CAAC6B,SAAS,CAACmE,OAAO,CAC9B,CAAC,CAAC,CACFlE,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAEU,GAAG,CAACM,MAAM,CAAC,CAEhE;AACA,GAAIN,GAAG,CAACM,MAAM,GAAK,GAAG,CAAE,CACtBjB,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC,CACnE,KAAM,CAAAoE,oBAAoB,CAAG,KAAM,CAAApF,YAAY,CAACG,UAAU,CAAC,IAAI,CAAC,CAChEY,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAE9CU,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,0CAA0C,CAAE,CAC5DC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYsD,oBAAoB,CAAE,CACjD,QAAQ,CAAE,kBAAkB,CAC5B,QAAQ,CAAE,uBACZ,CAAC,CACDlC,IAAI,CAAEjE,IAAI,CAAC6B,SAAS,CAACmE,OAAO,CAC9B,CAAC,CAAC,CACFlE,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAEU,GAAG,CAACM,MAAM,CAAC,CACxE,CACF,CAAE,MAAOC,UAAU,CAAE,CACnBlB,OAAO,CAACmB,IAAI,CAAC,iDAAiD,CAAED,UAAU,CAAC,CAC3EhB,KAAK,CAAGgB,UAAU,CACpB,CAEA;AACA,GAAI,CAACP,GAAG,EAAI,CAACA,GAAG,CAACS,EAAE,CAAE,CACnB,GAAI,CACFpB,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC1C;AACA,KAAM,CAAAqE,gBAAgB,CAAG,KAAM,CAAArF,YAAY,CAACG,UAAU,CAAC,IAAI,CAAC,CAC5DuB,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,qDAAqD,CAAE,CACvEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYuD,gBAAgB,CAAE,CAC7C,QAAQ,CAAE,kBAAkB,CAC5B,QAAQ,CAAE,uBACZ,CAAC,CACDnC,IAAI,CAAEjE,IAAI,CAAC6B,SAAS,CAACmE,OAAO,CAC9B,CAAC,CAAC,CACFlE,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAEU,GAAG,CAACM,MAAM,CAAC,CACnE,CAAE,MAAOI,WAAW,CAAE,CACpBrB,OAAO,CAACE,KAAK,CAAC,wCAAwC,CAAEmB,WAAW,CAAC,CACpEnB,KAAK,CAAGA,KAAK,EAAImB,WAAW,CAC9B,CACF,CAEA,GAAI,CAACV,GAAG,EAAI,CAACA,GAAG,CAACS,EAAE,CAAE,CACnB,GAAIT,GAAG,EAAIA,GAAG,CAACM,MAAM,GAAK,GAAG,CAAE,CAC7BjB,OAAO,CAACE,KAAK,CAAC,uCAAuC,CAAE,KAAM,CAAAS,GAAG,CAACW,IAAI,CAAC,CAAC,CAAC,CACxEC,KAAK,CAAC,qDAAqD,CAAC,CAC5D,OACF,CAEAvB,OAAO,CAACE,KAAK,CAAC,2BAA2B,CAAES,GAAG,CAAGA,GAAG,CAACM,MAAM,CAAG,aAAa,CAAC,CAC5E,KAAM,CAAAsD,SAAS,CAAG5D,GAAG,CAAG,KAAM,CAAAA,GAAG,CAACW,IAAI,CAAC,CAAC,CAAG,eAAe,CAC1DtB,OAAO,CAACE,KAAK,CAAC,gBAAgB,CAAEqE,SAAS,CAAC,CAC1ChD,KAAK,8BAAAR,MAAA,CAA8BwD,SAAS,CAAE,CAAC,CAC/C,OACF,CAEA,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAA7D,GAAG,CAACc,IAAI,CAAC,CAAC,CAC/BzB,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAEuE,MAAM,CAAC,CACrDjD,KAAK,CAAC,gCAAgC,CAAC,CAEvC;AACAhB,gBAAgB,CAAC,CAAC,CACpB,CAAE,MAAOL,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChD,GAAImD,UAAU,CAAGC,UAAU,CAAE,CAC3BD,UAAU,EAAE,CACZrD,OAAO,CAACC,GAAG,qBAAAc,MAAA,CAAqBsC,UAAU,MAAAtC,MAAA,CAAIuC,UAAU,QAAM,CAAC,CAC/D,KAAM,CAAAC,MAAM,CAAC,CAAC,CAChB,CAAC,IAAM,CACLhC,KAAK,CAAC,2BAA2B,CAAGrB,KAAK,CAACqC,OAAO,CAAC,CACpD,CACF,CACF,CAAC,CAED,KAAM,CAAAgB,MAAM,CAAC,CAAC,CAChB,CAAC,CAED,mBACE9F,KAAA,QAAKgH,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBnH,IAAA,CAACH,OAAO,GAAE,CAAC,cACXG,IAAA,CAACF,UAAU,GAAE,CAAC,cACdI,KAAA,WAAQgH,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC5BnH,IAAA,OAAAmH,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBnH,IAAA,QAAAmH,QAAA,CACG7G,IAAI,cACHJ,KAAA,QAAAiH,QAAA,eACEjH,KAAA,SAAAiH,QAAA,EAAM,WAAS,CAAC7G,IAAI,CAAC4E,IAAI,CAAC,GAAC,EAAM,CAAC,cAClClF,IAAA,WAAQoH,OAAO,CAAEzF,YAAa,CAAAwF,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC3C,CAAC,cAENjH,KAAA,QAAAiH,QAAA,eACEnH,IAAA,WAAQoH,OAAO,CAAEA,CAAA,GAAM,CAAEpG,YAAY,CAAC,IAAI,CAAC,CAAEI,eAAe,CAAC,KAAK,CAAC,CAAEF,iBAAiB,CAAC,KAAK,CAAC,CAAE,CAAE,CAAAiG,QAAA,CAAC,OAAK,CAAQ,CAAC,cAChHnH,IAAA,WAAQoH,OAAO,CAAEA,CAAA,GAAM,CAAEhG,eAAe,CAAC,IAAI,CAAC,CAAEJ,YAAY,CAAC,KAAK,CAAC,CAAEE,iBAAiB,CAAC,KAAK,CAAC,CAAE,CAAE,CAAAiG,QAAA,CAAC,UAAQ,CAAQ,CAAC,EAChH,CACN,CACE,CAAC,EACA,CAAC,cAETjH,KAAA,SAAAiH,QAAA,EACGpG,SAAS,eACRf,IAAA,QAAAmH,QAAA,cACEnH,IAAA,CAACT,SAAS,EAAC8H,OAAO,CAAExC,WAAY,CAACN,SAAS,CAAEA,SAAU,CAAE,CAAC,CACtD,CACN,CAGAtD,cAAc,eACbf,KAAA,QAAAiH,QAAA,eACEnH,IAAA,CAACR,cAAc,EAAC6H,OAAO,CAAExC,WAAY,CAAE,CAAC,cACxC7E,IAAA,QAAKsH,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAL,QAAA,cACpDnH,IAAA,WACEoH,OAAO,CAAEA,CAAA,GAAM,CAAEpG,YAAY,CAAC,IAAI,CAAC,CAAEI,eAAe,CAAC,KAAK,CAAC,CAAEF,iBAAiB,CAAC,KAAK,CAAC,CAAE,CAAE,CACzFoG,KAAK,CAAE,CACLG,UAAU,CAAE,MAAM,CAClBC,MAAM,CAAE,MAAM,CACdC,KAAK,CAAE,SAAS,CAChBC,cAAc,CAAE,WAAW,CAC3BC,MAAM,CAAE,SACV,CAAE,CAAAV,QAAA,CACH,eAED,CAAQ,CAAC,CACN,CAAC,EACH,CACN,CAEAhG,YAAY,eAAInB,IAAA,CAACP,YAAY,EAACwF,YAAY,CAAEA,YAAa,CAAE,CAAC,CAE5D3E,IAAI,eACHN,IAAA,CAAAI,SAAA,EAAA+G,QAAA,CACG9F,OAAO,EAAIf,IAAI,CAAC6B,IAAI,GAAK,OAAO,EAAI7B,IAAI,CAACe,OAAO,GAAK,IAAI,cACxDrB,IAAA,CAACJ,cAAc,EAAC2B,SAAS,CAAEA,SAAU,CAACjB,IAAI,CAAEA,IAAK,CAAE,CAAC,cAEpDJ,KAAA,QAAAiH,QAAA,eACEnH,IAAA,CAACN,iBAAiB,EAACoI,QAAQ,CAAElC,mBAAoB,CAAE,CAAC,cACpD5F,IAAA,CAACL,WAAW,EAACkB,OAAO,CAAEA,OAAQ,CAAE,CAAC,EAC9B,CACN,CACD,CACH,CAEA,CAACP,IAAI,EAAI,CAACS,SAAS,EAAI,CAACI,YAAY,eACnCjB,KAAA,QAAKgH,SAAS,CAAC,gBAAgB,CAACI,KAAK,CAAE,CACrCS,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAAQ,CACxBC,SAAS,CAAE,MAAM,CACjBV,UAAU,CAAE,mDAAmD,CAC/DE,KAAK,CAAE,MAAM,CACbS,YAAY,CAAE,MAAM,CACpBC,SAAS,CAAE,oCAAoC,CAC/CC,OAAO,CAAE,WAAW,CACpBd,MAAM,CAAE,WAAW,CACnBe,QAAQ,CAAE,OACZ,CAAE,CAAApB,QAAA,eACAnH,IAAA,QAAKwI,GAAG,CAAC,yDAAyD,CAACC,GAAG,CAAC,kBAAkB,CAACnB,KAAK,CAAE,CAAEoB,KAAK,CAAE,EAAE,CAAEC,YAAY,CAAE,EAAG,CAAE,CAAE,CAAC,cACpI3I,IAAA,OAAIsH,KAAK,CAAE,CAAEsB,QAAQ,CAAE,QAAQ,CAAEC,UAAU,CAAE,GAAG,CAAEF,YAAY,CAAE,EAAG,CAAE,CAAAxB,QAAA,CAAC,wBAAsB,CAAI,CAAC,cACjGjH,KAAA,MAAGoH,KAAK,CAAE,CAAEsB,QAAQ,CAAE,QAAQ,CAAED,YAAY,CAAE,EAAE,CAAEpB,SAAS,CAAE,QAAQ,CAAEgB,QAAQ,CAAE,GAAI,CAAE,CAAApB,QAAA,eACrFnH,IAAA,SAAMsH,KAAK,CAAE,CAAEuB,UAAU,CAAE,GAAI,CAAE,CAAA1B,QAAA,CAAC,qBAAmB,CAAM,CAAC,2CAAwC,cAAAnH,IAAA,QAAK,CAAC,qEAE5G,EAAG,CAAC,cACJA,IAAA,WACEoH,OAAO,CAAEA,CAAA,GAAMhG,eAAe,CAAC,IAAI,CAAE,CACrCkG,KAAK,CAAE,CACLG,UAAU,CAAE,MAAM,CAClBE,KAAK,CAAE,SAAS,CAChBkB,UAAU,CAAE,GAAG,CACfD,QAAQ,CAAE,QAAQ,CAClBN,OAAO,CAAE,WAAW,CACpBF,YAAY,CAAE,KAAK,CACnBV,MAAM,CAAE,MAAM,CACdW,SAAS,CAAE,oCAAoC,CAC/CR,MAAM,CAAE,SAAS,CACjBiB,UAAU,CAAE,iBACd,CAAE,CACFC,WAAW,CAAEC,CAAC,EAAIA,CAAC,CAACC,MAAM,CAAC3B,KAAK,CAACG,UAAU,CAAG,SAAU,CACxDyB,UAAU,CAAEF,CAAC,EAAIA,CAAC,CAACC,MAAM,CAAC3B,KAAK,CAACG,UAAU,CAAG,MAAO,CAAAN,QAAA,CACrD,aAED,CAAQ,CAAC,EACN,CACN,EACG,CAAC,EACJ,CAAC,CAEV,CAEA;AAEA,cAAe,CAAA9G,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}