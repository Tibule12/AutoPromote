/*! For license information please see main.700a76ad.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},68:(e,t,n)=>{n.d(t,{qk:()=>_e,c7:()=>ke,KR:()=>Te,D:()=>Se});var r=n(232),i=n(776),s=n(606);const a="firebasestorage.googleapis.com",o="storageBucket";class l extends i.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(d(e),"Firebase Storage: ".concat(t," (").concat(d(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,l.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return d(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var c,u;function d(e){return"storage/"+e}function h(){return new l(c.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function f(){return new l(c.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p(){return new l(c.CANCELED,"User canceled the upload/download.")}function m(){return new l(c.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g(e){return new l(c.INVALID_ARGUMENT,e)}function v(){return new l(c.APP_DELETED,"The Firebase app was deleted.")}function y(e,t){return new l(c.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function w(e){throw new l(c.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(c||(c={}));class b{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=b.makeFromUrl(e,t)}catch(i){return new b(e,"")}if(""===n.path)return n;throw r=e,new l(c.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),u=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===a?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let a=0;a<u.length;a++){const t=u[a],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new b(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new l(c.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class x{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function S(e){return"string"===typeof e||e instanceof String}function _(e){return T()&&e instanceof Blob}function T(){return"undefined"!==typeof Blob}function k(e,t,n,r){if(r<t)throw g("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw g("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function E(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function C(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function A(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(u||(u={}));class I{constructor(e,t,n,r,i,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new N(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===u.NO_ERROR,i=n.getStatus();if(!t||A(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===u.ABORT;return void e(!1,new N(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new N(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(s){r(s)}else if(null!==i){const e=h();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?v():p())}else{r(f())}};this.canceled_?t(0,new N(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class N{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function j(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function R(){const e=j();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(T())return new Blob(n);throw new l(c.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function P(e){if("undefined"===typeof atob)throw t="base-64",new l(c.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const D="raw",O="base64",L="base64url",U="data_url";class M{constructor(e,t){this.data=e,this.contentType=t||null}}function F(e,t){switch(e){case D:return new M(V(t));case O:case L:return new M(z(e,t));case U:return new M(function(e){const t=new B(e);return t.base64?z(O,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw y(U,"Malformed data URL.")}return V(t)}(t.rest)}(t),new B(t).contentType)}throw h()}function V(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function z(e,t){switch(e){case O:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw y(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case L:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw y(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=P(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw y(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class B{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw y(U,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class q{constructor(e,t){let n=0,r="";_(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(_(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new q(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new q(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(T()){const e=t.map(e=>e instanceof q?e.data_:e);return new q(R.apply(null,e))}{const e=t.map(e=>S(e)?F(D,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new q(r,!0)}}uploadData(){return this.data_}}function H(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function W(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function K(e,t){return t}class G{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||K}}let Q=null;function Y(){if(Q)return Q;const e=[];e.push(new G("bucket")),e.push(new G("generation")),e.push(new G("metageneration")),e.push(new G("name","fullPath",!0));const t=new G("name");t.xform=function(e,t){return function(e){return!S(e)||e.length<2?e:W(e)}(t)},e.push(t);const n=new G("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new G("timeCreated")),e.push(new G("updated")),e.push(new G("md5Hash",null,!0)),e.push(new G("cacheControl",null,!0)),e.push(new G("contentDisposition",null,!0)),e.push(new G("contentEncoding",null,!0)),e.push(new G("contentLanguage",null,!0)),e.push(new G("contentType",null,!0)),e.push(new G("metadata","customMetadata",!0)),Q=e,Q}function J(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new b(n,r);return t._makeStorageReference(i)}})}(r,e),r}function X(e,t,n){const r=H(t);if(null===r)return null;return J(e,r,n)}function $(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Z{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ee(e){if(!e)throw h()}function te(e,t){return function(n,r){const i=X(e,r,t);return ee(null!==i),i}}function ne(e,t){return function(n,r){const i=X(e,r,t);return ee(null!==i),function(e,t,n,r){const i=H(t);if(null===i)return null;if(!S(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map(t=>{const i=e.bucket,s=e.fullPath;return E("/b/"+a(i)+"/o/"+a(s),n,r)+C({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function re(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new l(c.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new l(c.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new l(c.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new l(c.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function ie(e){const t=re(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new l(c.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function se(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ae(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=se(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=q.getBlob(c,r,u);if(null===d)throw m();const h={name:l.fullPath},f=E(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new Z(f,"POST",te(e,n),p);return g.urlParams=h,g.headers=a,g.body=d.uploadData(),g.errorHandler=re(t),g}let oe=null;class le{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=u.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=u.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=u.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,s){if(this.sent_)throw w("cannot .send() more than once");if((0,i.zJ)(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw w("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw w("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw w("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw w("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ce extends le{initXhr(){this.xhr_.responseType="text"}}function ue(){return oe?oe():new ce}class de{constructor(e,t){this._service=e,this._location=t instanceof b?t:b.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new de(e,t)}get root(){const e=new b(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new b(this._location.bucket,e);return new de(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new l(c.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function he(e,t,n){e._throwIfRoot("uploadBytes");const r=ae(e.storage,e._location,Y(),new q(t,!0),n);return e.storage.makeRequestWithTokens(r,ue).then(t=>({metadata:t,ref:e}))}function fe(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=E(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Z(r,"GET",ne(e,n),i);return s.errorHandler=ie(t),s}(e.storage,e._location,Y());return e.storage.makeRequestWithTokens(t,ue).then(e=>{if(null===e)throw new l(c.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function pe(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new b(e._location.bucket,n);return new de(e.storage,r)}function me(e,t){if(e instanceof ye){const n=e;if(null==n._bucket)throw new l(c.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+o+"' property when initializing the app?");const r=new de(n,n._bucket);return null!=t?me(r,t):r}return void 0!==t?pe(e,t):e}function ge(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof ye)return new de(e,t);throw g("To use ref(service, url), the first argument must be a Storage instance.")}return me(e,t)}function ve(e,t){const n=null===t||void 0===t?void 0:t[o];return null==n?null:b.makeFromBucketSpec(n,e)}class ye{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=a,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?b.makeFromBucketSpec(r,this._host):ve(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=b.makeFromBucketSpec(this._url,e):this._bucket=ve(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new de(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new x(v());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=C(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new I(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a,o)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const we="@firebase/storage",be="0.14.0",xe="storage";function Se(e,t,n){return he(e=(0,i.Ku)(e),t,n)}function _e(e){return fe(e=(0,i.Ku)(e))}function Te(e,t){return ge(e=(0,i.Ku)(e),t)}function ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,i.Ku)(e);const n=(0,r.j6)(e,xe).getImmediate({identifier:t}),s=(0,i.yU)("storage");return s&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const s=(0,i.zJ)(t);s&&((0,i.gE)("https://".concat(e.host,"/b")),(0,i.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(e._overrideAuthToken="string"===typeof a?a:(0,i.Fy)(a,e.app.options.projectId))}(e,t,n,r)}(n,...s),n}function Ee(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new ye(i,s,a,n,r.MF)}(0,r.om)(new s.uA(xe,Ee,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(we,be,""),(0,r.KO)(we,be,"esm2020")},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!T.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+A(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+A(o=e[c],c);l+=I(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,u=s+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=_.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},232:(e,t,n)=>{n.d(t,{MF:()=>de,j6:()=>ae,xZ:()=>oe,om:()=>se,Sx:()=>fe,Wp:()=>he,KO:()=>pe});var r=n(555),i=n(606),s=n(965),a=n(776);let o,l;const c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(y(this),t,...r);return d.set(s,t.sort?t.sort():[t]),v(s)}}function g(e){return"function"===typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});u.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,p):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(v(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),f.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),f.set(t,e)),t}const y=e=>f.get(e);const w=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],x=new Map;function S(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(x.get(t))return x.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!w.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return x.set(t,s),s}p=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>S(t,n)||e.get(t,n,r),has:(t,n)=>!!S(t,n)||e.has(t,n)}))(p);class _{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const T="@firebase/app",k="0.14.2",E=new s.Vy("@firebase/app"),C="@firebase/app-compat",A="@firebase/analytics-compat",I="@firebase/analytics",N="@firebase/app-check-compat",j="@firebase/app-check",R="@firebase/auth",P="@firebase/auth-compat",D="@firebase/database",O="@firebase/data-connect",L="@firebase/database-compat",U="@firebase/functions",M="@firebase/functions-compat",F="@firebase/installations",V="@firebase/installations-compat",z="@firebase/messaging",B="@firebase/messaging-compat",q="@firebase/performance",H="@firebase/performance-compat",W="@firebase/remote-config",K="@firebase/remote-config-compat",G="@firebase/storage",Q="@firebase/storage-compat",Y="@firebase/firestore",J="@firebase/ai",X="@firebase/firestore-compat",$="firebase",Z="[DEFAULT]",ee={[T]:"fire-core",[C]:"fire-core-compat",[I]:"fire-analytics",[A]:"fire-analytics-compat",[j]:"fire-app-check",[N]:"fire-app-check-compat",[R]:"fire-auth",[P]:"fire-auth-compat",[D]:"fire-rtdb",[O]:"fire-data-connect",[L]:"fire-rtdb-compat",[U]:"fire-fn",[M]:"fire-fn-compat",[F]:"fire-iid",[V]:"fire-iid-compat",[z]:"fire-fcm",[B]:"fire-fcm-compat",[q]:"fire-perf",[H]:"fire-perf-compat",[W]:"fire-rc",[K]:"fire-rc-compat",[G]:"fire-gcs",[Q]:"fire-gcs-compat",[Y]:"fire-fst",[X]:"fire-fst-compat",[J]:"fire-vertex","fire-js":"fire-js",[$]:"fire-js-all"},te=new Map,ne=new Map,re=new Map;function ie(e,t){try{e.container.addComponent(t)}catch(n){E.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function se(e){const t=e.name;if(re.has(t))return E.debug("There were multiple attempts to register component ".concat(t,".")),!1;re.set(t,e);for(const n of te.values())ie(n,e);for(const n of ne.values())ie(n,e);return!0}function ae(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new a.FA("app","Firebase",le);class ue{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const de="12.2.0";function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=(0,r.A)({name:Z,automaticDataCollectionEnabled:!0},t),o=s.name;if("string"!==typeof o||!o)throw ce.create("bad-app-name",{appName:String(o)});if(n||(n=(0,a.T9)()),!n)throw ce.create("no-options");const l=te.get(o);if(l){if((0,a.bD)(n,l.options)&&(0,a.bD)(s,l.config))return l;throw ce.create("duplicate-app",{appName:o})}const c=new i.h1(o);for(const r of re.values())c.addComponent(r);const u=new ue(n,s,c);return te.set(o,u),u}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;const t=te.get(e);if(!t&&e===Z&&(0,a.T9)())return he();if(!t)throw ce.create("no-app",{appName:e});return t}function pe(e,t,n){var r;let s=null!==(r=ee[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void E.warn(e.join(" "))}se(new i.uA("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const me="firebase-heartbeat-store";let ge=null;function ve(){return ge||(ge=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=v(a);return r&&a.addEventListener("upgradeneeded",e=>{r(v(a.result),e.oldVersion,e.newVersion,v(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(me)}catch(n){console.warn(n)}}}).catch(e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})})),ge}async function ye(e,t){try{const n=(await ve()).transaction(me,"readwrite"),r=n.objectStore(me);await r.put(t,we(e)),await n.done}catch(n){if(n instanceof a.g)E.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});E.warn(e.message)}}}function we(e){return"".concat(e.name,"!").concat(e.options.appId)}class be{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Se(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xe();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){E.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=xe(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),_e(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_e(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,a.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return E.warn(t),""}}}function xe(){return(new Date).toISOString().substring(0,10)}class Se{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.zW)()&&(0,a.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ve()).transaction(me),n=await t.objectStore(me).get(we(e));return await t.done,n}catch(t){if(t instanceof a.g)E.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});E.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function _e(e){return(0,a.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Te;Te="",se(new i.uA("platform-logger",e=>new _(e),"PRIVATE")),se(new i.uA("heartbeat",e=>new be(e),"PRIVATE")),pe(T,k,Te),pe(T,k,"esm2020"),pe("fire-js","")},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,P(S);else{var t=r(u);null!==t&&D(x,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var s=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,T=!1,k=null,E=-1,C=5,A=-1;function I(){return!(t.unstable_now()-A<C)}function N(){if(null!==k){var e=t.unstable_now();A=e;var n=!0;try{n=k(!0,e)}finally{n?_():(T=!1,k=null)}}else T=!1}if("function"===typeof w)_=function(){w(N)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,R=j.port2;j.port1.onmessage=N,_=function(){R.postMessage(null)}}else _=function(){v(N,0)};function P(e){k=e,T||(T=!0,_())}function D(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(E),E=-1):g=!0,D(x,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},339:(e,t,n)=>{function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{l$:()=>we,Ay:()=>be});var i=n(555),s=n(43);let a={data:""},o=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||a},l=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,c=/\/\*[^]*?\*\/|  +/g,u=/\n+/g,d=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];"@"==s[0]?"i"==s[1]?n=s+" "+a+";":r+="f"==s[1]?d(a,s):s+"{"+d(a,"k"==s[1]?"":t)+"}":"object"==typeof a?r+=d(a,t?t.replace(/([^,])+/g,e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):s):null!=a&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=d.p?d.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},h={},f=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+f(e[n]);return t}return e},p=(e,t,n,r,i)=>{let s=f(e),a=h[s]||(h[s]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(s));if(!h[a]){let t=s!==e?e:(e=>{let t,n,r=[{}];for(;t=l.exec(e.replace(c,""));)t[4]?r.shift():t[3]?(n=t[3].replace(u," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(u," ").trim();return r[0]})(e);h[a]=d(i?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&h.g?h.g:null;return n&&(h.g=h[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(h[a],t,r,o),a};function m(e){let t=this||{},n=e.call?e(t.p):e;return p(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,i)=>{let s=t[i];if(s&&s.call){let e=s(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":d(e,""):!1===e?"":e}return e+r+(null==s?"":s)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,o(t.target),t.g,t.o,t.k)}m.bind({g:1});let g,v,y,w=m.bind({k:1});function b(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let o=Object.assign({},s),l=o.className||i.className;n.p=Object.assign({theme:v&&v()},o),n.o=/ *go\d+/.test(l),o.className=m.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),y&&c[0]&&y(o),g(c,o)}return t?t(i):i}}var x,S,_,T,k,E,C,A,I,N,j,R,P,D,O,L,U=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,M=(()=>{let e=0;return()=>(++e).toString()})(),F=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),V="default",z=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return(0,i.A)((0,i.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return(0,i.A)((0,i.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,i.A)((0,i.A)({},e),t.toast):e)});case 2:let{toast:r}=t;return z(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return(0,i.A)((0,i.A)({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?(0,i.A)((0,i.A)({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?(0,i.A)((0,i.A)({},e),{},{toasts:[]}):(0,i.A)((0,i.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return(0,i.A)((0,i.A)({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return(0,i.A)((0,i.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>(0,i.A)((0,i.A)({},e),{},{pauseDuration:e.pauseDuration+a}))})}},B=[],q={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},H={},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V;H[t]=z(H[t]||q,e),B.forEach(e=>{let[n,r]=e;n===t&&r(H[t])})},K=e=>Object.keys(H).forEach(t=>W(e,t)),G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return t=>{W(t,e)}},Q={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Y=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return(0,i.A)((0,i.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||M()})}(t,e,n);return G(r.toasterId||(e=>Object.keys(H).find(t=>H[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},J=(e,t)=>Y("blank")(e,t);J.error=Y("error"),J.success=Y("success"),J.loading=Y("loading"),J.custom=Y("custom"),J.dismiss=(e,t)=>{let n={type:3,toastId:e};t?G(t)(n):K(n)},J.dismissAll=e=>J.dismiss(void 0,e),J.remove=(e,t)=>{let n={type:4,toastId:e};t?G(t)(n):K(n)},J.removeAll=e=>J.remove(void 0,e),J.promise=(e,t,n)=>{let r=J.loading(t.loading,(0,i.A)((0,i.A)({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?U(t.success,e):void 0;return s?J.success(s,(0,i.A)((0,i.A)({id:r},n),null==n?void 0:n.success)):J.dismiss(r),e}).catch(e=>{let s=t.error?U(t.error,e):void 0;s?J.error(s,(0,i.A)((0,i.A)({id:r},n),null==n?void 0:n.error)):J.dismiss(r)}),e};var X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:n,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,[n,r]=(0,s.useState)(H[t]||q),a=(0,s.useRef)(H[t]);(0,s.useEffect)(()=>(a.current!==H[t]&&r(H[t]),B.push([t,r]),()=>{let e=B.findIndex(e=>{let[n]=e;return n===t});e>-1&&B.splice(e,1)}),[t]);let o=n.toasts.map(t=>{var n,r,s;return(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||Q[t.type],style:(0,i.A)((0,i.A)((0,i.A)({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return(0,i.A)((0,i.A)({},n),{},{toasts:o})}(e,t),a=(0,s.useRef)(new Map).current,o=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(a.has(e))return;let n=setTimeout(()=>{a.delete(e),l({type:4,toastId:e})},t);a.set(e,n)},[]);(0,s.useEffect)(()=>{if(r)return;let e=Date.now(),i=n.map(n=>{if(n.duration===1/0)return;let r=(n.duration||0)+n.pauseDuration-(e-n.createdAt);if(!(r<0))return setTimeout(()=>J.dismiss(n.id,t),r);n.visible&&J.dismiss(n.id)});return()=>{i.forEach(e=>e&&clearTimeout(e))}},[n,r,t]);let l=(0,s.useCallback)(G(t),[t]),c=(0,s.useCallback)(()=>{l({type:5,time:Date.now()})},[l]),u=(0,s.useCallback)((e,t)=>{l({type:1,toast:{id:e,height:t}})},[l]),d=(0,s.useCallback)(()=>{r&&l({type:6,time:Date.now()})},[r,l]),h=(0,s.useCallback)((e,t)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:s}=t||{},a=n.filter(t=>(t.position||s)===(e.position||s)&&t.height),o=a.findIndex(t=>t.id===e.id),l=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+i,0)},[n]);return(0,s.useEffect)(()=>{n.forEach(e=>{if(e.dismissed)o(e.id,e.removeDelay);else{let t=a.get(e.id);t&&(clearTimeout(t),a.delete(e.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:u,startPause:c,endPause:d,calculateOffset:h}}},$=w(x||(x=r(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Z=w(S||(S=r(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),ee=w(_||(_=r(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),te=b("div")(T||(T=r(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",$,Z,e=>e.secondary||"#fff",ee),ne=w(k||(k=r(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),re=b("div")(E||(E=r(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",ne),ie=w(C||(C=r(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),se=w(A||(A=r(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),ae=b("div")(I||(I=r(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",ie,se,e=>e.secondary||"#fff"),oe=b("div")(N||(N=r(["\n  position: absolute;\n"]))),le=b("div")(j||(j=r(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),ce=w(R||(R=r(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),ue=b("div")(P||(P=r(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),ce),de=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:a}=t;return void 0!==n?"string"==typeof n?s.createElement(ue,null,n):n:"blank"===r?null:s.createElement(le,null,s.createElement(re,(0,i.A)({},a)),"loading"!==r&&s.createElement(oe,null,"error"===r?s.createElement(te,(0,i.A)({},a)):s.createElement(ae,(0,i.A)({},a))))},he=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),fe=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),pe=b("div")(D||(D=r(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),me=b("div")(O||(O=r(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),ge=s.memo(e=>{let{toast:t,position:n,style:r,children:a}=e,o=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=F()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[he(n),fe(n)];return{animation:t?"".concat(w(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(w(i)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},l=s.createElement(de,{toast:t}),c=s.createElement(me,(0,i.A)({},t.ariaProps),U(t.message,t));return s.createElement(pe,{className:t.className,style:(0,i.A)((0,i.A)((0,i.A)({},o),r),t.style)},"function"==typeof a?a({icon:l,message:c}):s.createElement(s.Fragment,null,l,c))});!function(e,t,n,r){d.p=t,g=e,v=n,y=r}(s.createElement);var ve=e=>{let{id:t,className:n,style:r,onHeightUpdate:i,children:a}=e,o=s.useCallback(e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;i(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,i]);return s.createElement("div",{ref:o,className:n,style:r},a)},ye=m(L||(L=r(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),we=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:r,gutter:a,children:o,toasterId:l,containerStyle:c,containerClassName:u}=e,{toasts:d,handlers:h}=X(r,l);return s.createElement("div",{"data-rht-toaster":l||"",style:(0,i.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},c),className:u,onMouseEnter:h.startPause,onMouseLeave:h.endPause},d.map(e=>{let r=e.position||n,l=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return(0,i.A)((0,i.A)({left:0,right:0,display:"flex",position:"absolute",transition:F()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),s)})(r,h.calculateOffset(e,{reverseOrder:t,gutter:a,defaultPosition:n}));return s.createElement(ve,{id:e.id,key:e.id,onHeightUpdate:h.updateHeight,className:e.visible?ye:"",style:l},"custom"===e.type?U(e.message,e):o?o(e):s.createElement(ge,{toast:e,position:r}))}))},be=J},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},412:(e,t,n)=>{n.d(t,{A:()=>B});var r=n(555),i=n(43),s=n(579);const a=e=>{var t,n,r;let{user:i,stats:a,tiktokStatus:o,facebookStatus:l,youtubeStatus:c,twitterStatus:u,snapchatStatus:d,spotifyStatus:h,redditStatus:f,discordStatus:p,linkedinStatus:m,telegramStatus:g,pinterestStatus:v,tz:y,defaultsPlatforms:w,defaultsFrequency:b,toggleDefaultPlatform:x,setDefaultsFrequency:S,setTz:_,handleSaveDefaults:T,handleConnectTikTok:k,handleConnectFacebook:E,handleConnectYouTube:C,handleConnectTwitter:A,handleConnectSnapchat:I,handleConnectSpotify:N,handleConnectReddit:j,handleConnectDiscord:R,handleConnectLinkedin:P,handleConnectTelegram:D,handleConnectPinterest:O}=e;const L="".concat("","/image.png");return(0,s.jsxs)("section",{className:"profile-details",children:[(0,s.jsx)("h3",{children:"Landing Page Preview"}),(0,s.jsxs)("div",{className:"landing-preview",children:[(0,s.jsx)("img",{className:"landing-thumbnail",src:(null===i||void 0===i?void 0:i.thumbnailUrl)||L,alt:"Landing Thumbnail"}),(0,s.jsxs)("div",{style:{color:"#9aa4b2",marginTop:".5rem"},children:["Welcome back, ",(null===i||void 0===i?void 0:i.name)||"User","."]})]}),(0,s.jsxs)("div",{className:"performance-summary",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Views:"})," ",null!==(t=null===a||void 0===a?void 0:a.views)&&void 0!==t?t:0]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Clicks:"})," ",null!==(n=null===a||void 0===a?void 0:a.clicks)&&void 0!==n?n:0]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"CTR:"})," ",null!==(r=null===a||void 0===a?void 0:a.ctr)&&void 0!==r?r:0,"%"]})]}),(0,s.jsxs)("div",{className:"platform-connections",style:{marginTop:"1rem"},children:[(0,s.jsx)("h4",{children:"Platform Connections"}),(0,s.jsx)("div",{style:{display:"grid",gap:".5rem"},children:["tiktok","facebook","youtube","twitter","snapchat","spotify","reddit","discord","linkedin","telegram","pinterest"].map(e=>{const t={tiktok:o,facebook:l,youtube:c,twitter:u,snapchat:d,spotify:h,reddit:f,discord:p,linkedin:m,telegram:g,pinterest:v}[e]||{},n={tiktok:k,facebook:E,youtube:C,twitter:A,snapchat:I,spotify:N,reddit:j,discord:R,linkedin:P,telegram:D,pinterest:O}[e],r=e.charAt(0).toUpperCase()+e.slice(1),i={tiktok:"Connect to link your TikTok account for future posting and analytics.",facebook:"Connect to manage Pages and Instagram.",youtube:"Connect to upload videos directly.",twitter:"Connect to post tweets and schedule posts.",snapchat:"Connect to post Snaps (if enabled).",spotify:"Connect to manage Spotify tracks and playlists.",reddit:"Connect to post to subreddits.",discord:"Connect to manage Discord channels/webhooks.",linkedin:"Connect to post to LinkedIn.",telegram:"Connect to send messages to Telegram channels.",pinterest:"Connect to create pins and boards."}[e]||"";return(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==t&&void 0!==t&&t.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{style:{color:"#cbd5e1"},children:[r," connected"]}),(0,s.jsx)("button",{className:"check-quality",onClick:n,children:"Reconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"check-quality",onClick:n,children:["Connect ",r]}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:i})]})},e)})})]}),(0,s.jsxs)("div",{className:"profile-defaults",style:{marginTop:"1rem"},children:[(0,s.jsx)("h4",{children:"Profile Defaults"}),(0,s.jsxs)("div",{style:{display:"grid",gap:".5rem",maxWidth:520},children:[(0,s.jsxs)("label",{style:{color:"#9aa4b2"},children:["Timezone",(0,s.jsx)("input",{type:"text",value:y,onChange:e=>_&&_(e.target.value),style:{display:"block",width:"100%",marginTop:".25rem",padding:".4rem",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.05)",color:"#eef2ff"}})]}),(0,s.jsx)("div",{style:{color:"#9aa4b2"},children:"Default Platforms"}),(0,s.jsx)("div",{className:"platform-toggles",children:["youtube","twitter","linkedin","discord","reddit","spotify","telegram","tiktok","facebook","instagram","snapchat","pinterest"].map(e=>(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:!!Array.isArray(w)&&w.includes(e),onChange:()=>x&&x(e)})," ",e.charAt(0).toUpperCase()+e.slice(1),"tiktok"===e||"facebook"===e||"instagram"===e||"snapchat"===e||"pinterest"===e?" \u23f3":" \u2705"]},e))}),(0,s.jsxs)("label",{style:{color:"#9aa4b2"},children:["Default Frequency",(0,s.jsxs)("select",{value:b,onChange:e=>S&&S(e.target.value),style:{display:"block",width:"100%",marginTop:".25rem",background:"rgba(255,255,255,0.05)",color:"#eef2ff",border:"1px solid rgba(255,255,255,0.15)",borderRadius:"8px",padding:".3rem .5rem"},children:[(0,s.jsx)("option",{value:"once",children:"Once"}),(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"})]})]}),(0,s.jsx)("div",{style:{display:"flex",gap:".5rem"},children:(0,s.jsx)("button",{className:"check-quality",onClick:T,children:"Save Defaults"})})]})]})]})};var o=n(834),l=n(488),c=n(68);const u=function(e){let{selectedTracks:t=[],onChangeTracks:n}=e;const[r,a]=(0,i.useState)(""),[o,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)([]);return(0,s.jsxs)("div",{className:"spotify-search",children:[(0,s.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,s.jsx)("input",{value:r,onChange:e=>a(e.target.value),placeholder:"Search Spotify Tracks",style:{padding:".4rem",borderRadius:8,flex:1}}),(0,s.jsx)("button",{className:"check-quality",onClick:async()=>{if(r&&!(r.trim().length<1)){c(!0);try{const e=await fetch("".concat(l.Sn.SPOTIFY_SEARCH,"?q=").concat(encodeURIComponent(r))),t=await e.json();e.ok&&t&&t.results?d(t.results):d([])}catch(e){console.error("Spotify search error",e),d([])}finally{c(!1)}}},disabled:o||!r,children:"Search"})]}),(0,s.jsx)("div",{style:{marginTop:8},children:o?(0,s.jsx)("div",{children:"Searching..."}):(0,s.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:u.map(e=>(0,s.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",padding:".25rem 0",borderBottom:"1px dashed rgba(0,0,0,0.05)"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,s.jsx)("div",{style:{fontSize:12,color:"#666"},children:Array.isArray(e.artists)?e.artists.join(", "):""})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"check-quality",onClick:()=>(e=>{const r=e.uri||e.id||e.uri;if(!r)return;if(t.find(e=>e.uri===r))return;const i=[...t,{uri:r,id:e.id,name:e.name,artists:e.artists}];n&&n(i)})(e),children:"Add"})})]},e.id))})}),(0,s.jsxs)("div",{style:{marginTop:8},children:[(0,s.jsx)("strong",{children:"Selected Tracks"}),(0,s.jsx)("ul",{style:{listStyle:"none",padding:0},children:t.map(e=>(0,s.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",padding:".25rem 0"},children:[(0,s.jsxs)("div",{children:[e.name," ",(0,s.jsxs)("span",{style:{fontSize:12,color:"#666"},children:["by ",Array.isArray(e.artists)?e.artists.join(", "):""]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"logout-btn",onClick:()=>(e=>{const r=t.filter(t=>t.uri!==e);n&&n(r)})(e.uri),children:"Remove"})})]},e.uri))})]})]})};const d=function(e){let{imageUrl:t,onChangeCrop:n,onClose:a}=e;const o=(0,i.useRef)(null),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(!1),[h,f]=(0,i.useState)({x:20,y:20,w:160,h:160}),p=(0,i.useRef)(null);function m(e){const t=o.current.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}return(0,i.useEffect)(()=>{const e=new Image;e.crossOrigin="anonymous",e.onload=()=>c(e),e.src=t},[t]),(0,i.useEffect)(()=>{l&&function(){const e=o.current;if(!e||!l)return;const t=e.getContext("2d");e.width=Math.min(l.width,800),e.height=Math.min(l.height,600),t.clearRect(0,0,e.width,e.height);const n=Math.min(e.width/l.width,e.height/l.height),r=l.width*n,i=l.height*n;t.drawImage(l,0,0,r,i),t.strokeStyle="rgba(255,0,0,0.9)",t.lineWidth=2,t.strokeRect(h.x,h.y,h.w,h.h)}()},[l,h]),(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.5)",zIndex:9999},children:(0,s.jsxs)("div",{style:{background:"#fff",borderRadius:8,padding:16,maxWidth:"90vw",maxHeight:"90vh"},children:[(0,s.jsx)("canvas",{ref:o,style:{border:"1px solid #ddd",display:"block"},onMouseDown:function(e){d(!0),p.current=m(e)},onMouseMove:function(e){if(!u)return;const t=m(e),n=t.x-p.current.x,i=t.y-p.current.y;f(e=>(0,r.A)((0,r.A)({},e),{},{x:e.x+n,y:e.y+i})),p.current=t},onMouseUp:function(){d(!1),n&&n(h)}}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:8},children:[(0,s.jsx)("button",{onClick:()=>{n&&n(null),a&&a()},children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{n(h),a&&a()},children:"Apply"})]})]})})};const h=function(e){let{file:t,trimStart:n,trimEnd:r,onChange:a}=e;const o=(0,i.useRef)(null),[l,c]=(0,i.useState)(0),[u,d]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!t)return;const e=URL.createObjectURL(t),n=new(window.AudioContext||window.webkitAudioContext);(async()=>{const t=await fetch(e),r=await t.arrayBuffer(),i=await n.decodeAudioData(r);d(i),c(i.duration)})().catch(e=>console.warn(e))},[t]),(0,i.useEffect)(()=>{u&&function(){const e=o.current;if(!e||!u)return;const t=e.getContext("2d");e.width=800,e.height=120,t.fillStyle="#fafafa",t.fillRect(0,0,e.width,e.height);const i=u.getChannelData(0),s=Math.ceil(i.length/e.width);t.fillStyle="#888";for(let n=0;n<e.width;n++){let r=0;for(let e=0;e<s;e++){const t=n*s+e;t<i.length&&(r+=Math.abs(i[t]))}const a=r/s*e.height;t.fillRect(n,(e.height-a)/2,1,a)}t.fillStyle="rgba(0,0,0,0.12)";const a=n/l*e.width||0,c=r/l*e.width||e.width;t.fillRect(0,0,a,e.height),t.fillRect(c,0,e.width-c,e.height)}()},[u,n,r]),(0,s.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,s.jsx)("canvas",{ref:o,style:{width:"100%",maxWidth:800}}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,s.jsx)("label",{children:"Trim start"}),(0,s.jsx)("input",{type:"range",min:"0",max:"100",value:100*(n/l||0),onChange:e=>function(e){const t=e.target.value;a&&a({trimStart:t/100*l,trimEnd:r})}(e)}),(0,s.jsxs)("label",{children:[n.toFixed(2),"s"]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,s.jsx)("label",{children:"Trim end"}),(0,s.jsx)("input",{type:"range",min:"0",max:"100",value:r/l||100,onChange:e=>function(e){const t=e.target.value;a&&a({trimStart:n,trimEnd:t/100*l})}(e)}),(0,s.jsxs)("label",{children:[r.toFixed(2),"s"]})]})]})},f={Smileys:["\ud83d\ude00","\ud83d\ude03","\ud83d\ude04","\ud83d\ude01","\ud83d\ude06","\ud83d\ude05","\ud83e\udd23","\ud83d\ude02","\ud83d\ude42","\ud83d\ude43","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude07","\ud83e\udd70","\ud83d\ude0d","\ud83e\udd29","\ud83d\ude18","\ud83d\ude17","\u263a\ufe0f","\ud83d\ude1a","\ud83d\ude19","\ud83e\udd72","\ud83d\ude0b","\ud83d\ude1b","\ud83d\ude1c","\ud83e\udd2a","\ud83d\ude1d","\ud83e\udd11","\ud83e\udd17","\ud83e\udd2d","\ud83e\udd2b","\ud83e\udd14","\ud83e\udd10","\ud83e\udd28","\ud83d\ude10","\ud83d\ude11","\ud83d\ude36","\ud83d\ude0f","\ud83d\ude12","\ud83d\ude44","\ud83d\ude2c","\ud83e\udd25","\ud83d\ude0c","\ud83d\ude14","\ud83d\ude2a","\ud83e\udd24","\ud83d\ude34","\ud83d\ude37","\ud83e\udd12","\ud83e\udd15","\ud83e\udd22","\ud83e\udd2e","\ud83e\udd27","\ud83e\udd75","\ud83e\udd76","\ud83e\udd74","\ud83d\ude35","\ud83e\udd2f","\ud83e\udd20","\ud83e\udd73","\ud83e\udd78","\ud83d\ude0e","\ud83e\udd13","\ud83e\uddd0"],Gestures:["\ud83d\udc4b","\ud83e\udd1a","\ud83d\udd90\ufe0f","\u270b","\ud83d\udd96","\ud83d\udc4c","\ud83e\udd0c","\ud83e\udd0f","\u270c\ufe0f","\ud83e\udd1e","\ud83e\udd1f","\ud83e\udd18","\ud83e\udd19","\ud83d\udc48","\ud83d\udc49","\ud83d\udc46","\ud83d\udd95","\ud83d\udc47","\u261d\ufe0f","\ud83d\udc4d","\ud83d\udc4e","\u270a","\ud83d\udc4a","\ud83e\udd1b","\ud83e\udd1c","\ud83d\udc4f","\ud83d\ude4c","\ud83d\udc50","\ud83e\udd32","\ud83e\udd1d","\ud83d\ude4f","\u270d\ufe0f","\ud83d\udc85","\ud83e\udd33","\ud83d\udcaa","\ud83e\uddbe","\ud83e\uddbf","\ud83e\uddb5","\ud83e\uddb6"],Hearts:["\u2764\ufe0f","\ud83e\udde1","\ud83d\udc9b","\ud83d\udc9a","\ud83d\udc99","\ud83d\udc9c","\ud83d\udda4","\ud83e\udd0d","\ud83e\udd0e","\ud83d\udc94","\u2763\ufe0f","\ud83d\udc95","\ud83d\udc9e","\ud83d\udc93","\ud83d\udc97","\ud83d\udc96","\ud83d\udc98","\ud83d\udc9d","\ud83d\udc9f","\u2665\ufe0f","\ud83d\udc8c","\ud83d\udc8b","\ud83d\udc8f","\ud83d\udc91"],Symbols:["\u2728","\u2b50","\ud83c\udf1f","\ud83d\udcab","\u2705","\u274c","\u26a0\ufe0f","\ud83d\udd25","\ud83d\udcaf","\ud83d\udca2","\ud83d\udca5","\ud83d\udca6","\ud83d\udca8","\ud83d\udd73\ufe0f","\ud83d\udcac","\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f","\ud83d\udde8\ufe0f","\ud83d\uddef\ufe0f","\ud83d\udcad","\ud83d\ude80","\ud83c\udf89","\ud83c\udf8a","\ud83c\udf88","\ud83c\udf81","\ud83c\udfc6","\ud83e\udd47","\ud83e\udd48","\ud83e\udd49","\u26a1","\ud83c\udf08","\u2600\ufe0f","\ud83c\udf19","\u2b50","\ud83d\udc8e","\ud83d\udc51","\ud83d\udd31"],Objects:["\ud83d\udcf1","\ud83d\udcbb","\u2328\ufe0f","\ud83d\udda5\ufe0f","\ud83d\udda8\ufe0f","\ud83d\uddb1\ufe0f","\ud83c\udfae","\ud83d\udd79\ufe0f","\ud83c\udfa7","\ud83c\udf99\ufe0f","\ud83c\udf9a\ufe0f","\ud83c\udf9b\ufe0f","\ud83d\udcf7","\ud83d\udcf8","\ud83d\udcf9","\ud83c\udfa5","\ud83d\udcfd\ufe0f","\ud83c\udfac","\ud83d\udcfa","\ud83d\udcfb","\ud83c\udfb5","\ud83c\udfb6","\ud83c\udfbc","\ud83c\udfb9","\ud83c\udfa4","\ud83c\udfaa","\ud83c\udfa8","\ud83d\uddbc\ufe0f","\ud83d\udce2","\ud83d\udce3","\ud83d\udcef","\ud83d\udd14","\ud83d\udd15","\ud83c\udfba","\ud83d\udcef"]};const p=function(e){let{onSelect:t,onClose:n}=e;const[r,a]=(0,i.useState)("Smileys"),[o,l]=(0,i.useState)(""),c=o?Object.values(f).flat().filter(e=>e.includes(o)):f[r];return(0,s.jsx)("div",{className:"emoji-picker-overlay",onClick:n,children:(0,s.jsxs)("div",{className:"emoji-picker",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"emoji-picker-header",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search emojis...",value:o,onChange:e=>l(e.target.value),className:"emoji-search"}),(0,s.jsx)("button",{onClick:n,className:"emoji-close",children:"\u2715"})]}),!o&&(0,s.jsx)("div",{className:"emoji-categories",children:Object.keys(f).map(e=>(0,s.jsx)("button",{className:"emoji-category ".concat(r===e?"active":""),onClick:()=>a(e),children:e},e))}),(0,s.jsx)("div",{className:"emoji-grid",children:c.map((e,n)=>(0,s.jsx)("button",{className:"emoji-item",onClick:()=>(e=>{t(e)})(e),children:e},n))})]})})},m=[{name:"None",class:"filter-none",css:""},{name:"Vintage",class:"filter-vintage",css:"sepia(0.5) contrast(1.2) brightness(0.9)"},{name:"B&W",class:"filter-bw",css:"grayscale(1) contrast(1.1)"},{name:"Vibrant",class:"filter-vibrant",css:"saturate(1.8) contrast(1.1)"},{name:"Neon",class:"filter-neon",css:"saturate(2) contrast(1.3) hue-rotate(15deg)"},{name:"Cool",class:"filter-cool",css:"saturate(0.8) hue-rotate(180deg) brightness(1.1)"},{name:"Warm",class:"filter-warm",css:"saturate(1.3) sepia(0.3) brightness(1.05)"},{name:"Fade",class:"filter-fade",css:"contrast(0.85) brightness(1.2) saturate(0.8)"},{name:"Sharp",class:"filter-sharp",css:"contrast(1.4) saturate(1.2)"},{name:"Dream",class:"filter-dream",css:"blur(0.5px) brightness(1.15) saturate(1.3)"}];const g=function(e){let{imageUrl:t,onApplyFilter:n}=e;const[r,a]=(0,i.useState)("None");return(0,i.useRef)(null),(0,s.jsxs)("div",{className:"filter-effects",children:[(0,s.jsx)("div",{className:"filter-header",children:(0,s.jsx)("h4",{children:"Filters & Effects"})}),(0,s.jsx)("div",{className:"filter-grid",children:m.map(e=>(0,s.jsxs)("button",{className:"filter-option ".concat(r===e.name?"active":""),onClick:()=>(e=>{a(e.name),n(e)})(e),children:[(0,s.jsx)("div",{className:"filter-preview",style:{backgroundImage:"url(".concat(t,")"),filter:e.css}}),(0,s.jsx)("span",{className:"filter-name",children:e.name})]},e.name))})]})},v={general:["AutoPromote","ContentCreator","SocialMediaMarketing","viral","trending","fyp","foryou","explore","instagood","photooftheday","DigitalMarketing","GrowYourBrand"],video:["AutoPromote","VideoMarketing","ContentCreation","reels","tiktok","viral","trending","videooftheday","shortsvideo","contentcreator","videography","SocialMediaGrowth"],image:["AutoPromote","VisualContent","BrandMarketing","photography","photooftheday","picoftheday","instadaily","aesthetic","art","beautiful","nature","ContentStrategy"],audio:["AutoPromote","MusicMarketing","AudioContent","music","newmusic","musician","producer","beats","spotify","soundcloud","audio","MusicPromotion"]};const y=function(e){let{contentType:t,title:n,description:r,onAddHashtag:a}=e;const[o,l]=(0,i.useState)([]),[c,u]=(0,i.useState)("");(0,i.useEffect)(()=>{d()},[t,n,r]);const d=()=>{const e=v[t]||v.general,i=n.toLowerCase().split(" ").filter(e=>e.length>3),s=r.toLowerCase().split(" ").filter(e=>e.length>3),a=[...new Set([...i,...s])].slice(0,5),o=[...e.slice(0,10),...a].slice(0,15);l(o)},h=()=>{if(c.trim()){const e=c.trim().replace(/^#/,"");a(e),u("")}};return(0,s.jsxs)("div",{className:"hashtag-suggestions",children:[(0,s.jsxs)("div",{className:"hashtag-header",children:[(0,s.jsx)("h4",{children:"\u2728 Trending Hashtags"}),(0,s.jsx)("span",{className:"hashtag-hint",children:"Tap to add"})]}),(0,s.jsx)("div",{className:"hashtag-chips",children:o.map((e,t)=>(0,s.jsxs)("button",{className:"hashtag-chip",onClick:()=>a(e),children:["#",e]},t))}),(0,s.jsxs)("div",{className:"custom-hashtag",children:[(0,s.jsx)("input",{type:"text",placeholder:"Add custom hashtag...",value:c,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&h(),className:"custom-hashtag-input"}),(0,s.jsx)("button",{onClick:h,className:"add-hashtag-btn",children:"+"})]})]})};const w=function(e){let{onLoadDraft:t,currentDraft:n}=e;const[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(!1);(0,i.useEffect)(()=>{u()},[]);const u=()=>{const e=localStorage.getItem("contentDrafts");if(e)try{o(JSON.parse(e))}catch(t){console.error("Failed to load drafts:",t)}};return(0,s.jsxs)("div",{className:"draft-manager",children:[(0,s.jsxs)("div",{className:"draft-actions",children:[(0,s.jsx)("button",{onClick:()=>{if(!n||!n.title)return void alert("Please add a title before saving draft");const e=[(0,r.A)((0,r.A)({},n),{},{id:Date.now(),savedAt:(new Date).toISOString()}),...a].slice(0,10);localStorage.setItem("contentDrafts",JSON.stringify(e)),o(e),alert("Draft saved! \ud83d\udcbe")},className:"save-draft-btn",children:"\ud83d\udcbe Save Draft"}),(0,s.jsxs)("button",{onClick:()=>c(!l),className:"view-drafts-btn",children:["\ud83d\udcc2 Drafts (",a.length,")"]})]}),l&&a.length>0&&(0,s.jsxs)("div",{className:"drafts-list",children:[(0,s.jsxs)("div",{className:"drafts-header",children:[(0,s.jsx)("h4",{children:"Saved Drafts"}),(0,s.jsx)("button",{onClick:()=>c(!1),className:"close-drafts",children:"\u2715"})]}),a.map(e=>(0,s.jsxs)("div",{className:"draft-item",children:[(0,s.jsxs)("div",{className:"draft-info",children:[(0,s.jsx)("div",{className:"draft-title",children:e.title}),(0,s.jsxs)("div",{className:"draft-meta",children:[e.type&&(0,s.jsx)("span",{className:"draft-type",children:e.type}),(0,s.jsx)("span",{className:"draft-date",children:new Date(e.savedAt).toLocaleDateString()})]})]}),(0,s.jsxs)("div",{className:"draft-actions-btn",children:[(0,s.jsx)("button",{onClick:()=>(e=>{t(e),c(!1)})(e),className:"load-draft",children:"Load"}),(0,s.jsx)("button",{onClick:()=>(e=>{const t=a.filter(t=>t.id!==e);localStorage.setItem("contentDrafts",JSON.stringify(t)),o(t)})(e.id),className:"delete-draft",children:"\ud83d\uddd1\ufe0f"})]})]},e.id))]})]})};const b=function(e){let{progress:t,status:n,fileName:r}=e;return(0,s.jsxs)("div",{className:"progress-indicator",children:[(0,s.jsxs)("div",{className:"progress-header",children:[(0,s.jsx)("div",{className:"upload-icon",children:100===t?"\u2713":"\u2b06\ufe0f"}),(0,s.jsxs)("div",{className:"progress-info",children:[(0,s.jsx)("div",{className:"progress-title",children:n||"Uploading..."}),r&&(0,s.jsx)("div",{className:"progress-file",children:r})]})]}),(0,s.jsx)("div",{className:"progress-bar-container",children:(0,s.jsx)("div",{className:"progress-bar",style:{width:"".concat(t,"%")},children:(0,s.jsx)("div",{className:"progress-shimmer"})})}),(0,s.jsxs)("div",{className:"progress-percentage",children:[t,"%"]})]})},x={youtube:{days:["Thursday","Friday","Saturday"],hours:[14,15,16,17,18]},tiktok:{days:["Tuesday","Thursday","Friday"],hours:[15,16,17,18,19,20]},instagram:{days:["Wednesday","Friday"],hours:[11,13,14,17,18,19]},facebook:{days:["Wednesday","Thursday","Friday"],hours:[13,14,15]},twitter:{days:["Monday","Tuesday","Wednesday"],hours:[8,9,12,17,18]},linkedin:{days:["Tuesday","Wednesday","Thursday"],hours:[7,8,9,12,17]},reddit:{days:["Sunday","Monday"],hours:[6,7,8,9,20,21]},pinterest:{days:["Friday","Saturday"],hours:[20,21,22]},snapchat:{days:["Friday","Saturday","Sunday"],hours:[19,20,21,22]}};const S=function(e){let{selectedPlatforms:t}=e;const[n,r]=(0,i.useState)(null);(0,i.useEffect)(()=>{a()},[t]);const a=()=>{if(!t||0===t.length)return void r(null);const e=new Date,n=e.toLocaleDateString("en-US",{weekday:"long"}),i=e.getHours();let s=null,a=0;if(t.forEach(e=>{const t=x[e];if(!t)return;const r=(t.days.includes(n)?1:0)+(t.hours.includes(i)?1:0);r>a&&(a=r,s={platform:e,optimal:t,score:r})}),s&&s.score>0)r({type:"now",platform:s.platform,message:"\ud83d\udd25 Great time to post on ".concat(s.platform.charAt(0).toUpperCase()+s.platform.slice(1),"!")});else{var c;const e=o(t[0]),n=(null===(c=x[t[0]])||void 0===c?void 0:c.hours[0])||12;r({type:"later",message:"\u23f0 Best time: ".concat(e," at ").concat(l(n)),details:"Optimal engagement window for your selected platforms"})}},o=e=>{const t=x[e];return t&&t.days[0]||"Tomorrow"},l=e=>{const t=e>=12?"PM":"AM";return"".concat(e>12?e-12:0===e?12:e,":00 ").concat(t)};return n?(0,s.jsxs)("div",{className:"best-time-to-post ".concat(n.type),children:[(0,s.jsx)("div",{className:"best-time-icon",children:"now"===n.type?"\ud83d\ude80":"\ud83d\udcc5"}),(0,s.jsxs)("div",{className:"best-time-content",children:[(0,s.jsx)("div",{className:"best-time-message",children:n.message}),n.details&&(0,s.jsx)("div",{className:"best-time-details",children:n.details})]})]}):null},_=e=>{if(!e)return"";let t=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");return t=t.replace(/javascript:/gi,"").replace(/data:/gi,"").replace(/vbscript:/gi,"").replace(/file:/gi,"").replace(/on\w+\s*=/gi,""),t},T=e=>{if(!e)return"";const t=String(e).trim();if(/url\s*\(/i.test(t)||/expression\s*\(/i.test(t)||/@import/i.test(t))return"";const n=["blur","brightness","contrast","grayscale","hue-rotate","invert","opacity","saturate","sepia"],r=t.split(/\s+/),i=[];for(const s of r){const e=s.match(/^([a-z-]+)\(([\d.]+)(px|deg|%)?\)$/i);e&&n.includes(e[1].toLowerCase())&&i.push(s)}return i.join(" ")};const k=function(e){var t,n,a,l,f,m,v;let{onUpload:x,platformMetadata:k,platformOptions:E,setPlatformOption:C,selectedPlatforms:A,setSelectedPlatforms:I,spotifySelectedTracks:N,setSpotifySelectedTracks:j}=e;const[R,P]=(0,i.useState)(""),[D,O]=(0,i.useState)("video"),[L,U]=(0,i.useState)(""),[M,F]=(0,i.useState)(null),[V,z]=(0,i.useState)(""),[B,q]=(0,i.useState)(0),[H,W]=(0,i.useState)(!1),[K,G]=(0,i.useState)(!1),[Q,Y]=(0,i.useState)("none"),[J,X]=(0,i.useState)(0),[$,Z]=(0,i.useState)(0),[ee,te]=(0,i.useState)(0),ne=(0,i.useRef)(null),[re,ie]=(0,i.useState)(!1),[se,ae]=(0,i.useState)(null),[oe,le]=(0,i.useState)(N||[]),[ce,ue]=(0,i.useState)(""),[de,he]=(0,i.useState)("bottom"),[fe,pe]=(0,i.useState)(!1),[me,ge]=(0,i.useState)(null),[ve,ye]=(0,i.useState)(null),[we,be]=(0,i.useState)([]),[xe,Se]=(0,i.useState)(0),[_e,Te]=(0,i.useState)(!1),[ke,Ee]=(0,i.useState)(""),[Ce,Ae]=(0,i.useState)({fontSize:16,color:"#ffffff",fontWeight:"bold",shadow:!0}),[Ie,Ne]=(0,i.useState)(!1),[je,Re]=(0,i.useState)(!1),[Pe,De]=(0,i.useState)(""),[Oe,Le]=(0,i.useState)([]),[Ue,Me]=(0,i.useState)(null),[Fe,Ve]=(0,i.useState)([]),[ze,Be]=(0,i.useState)(null),qe=(0,i.useRef)(null),He=(0,i.useRef)(null);(0,i.useEffect)(()=>()=>{if(V)try{URL.revokeObjectURL(V)}catch(e){}},[V]),(0,i.useEffect)(()=>{const e=e=>{if(!e.ctrlKey&&!e.metaKey||"Enter"!==e.key||Ie||(e.preventDefault(),wt(e)),!e.ctrlKey&&!e.metaKey||"p"!==e.key||je||(e.preventDefault(),yt(e)),(e.ctrlKey||e.metaKey)&&"s"===e.key){e.preventDefault();const t=xt();if(t.title){const e=JSON.parse(localStorage.getItem("contentDrafts")||"[]"),n=(0,r.A)((0,r.A)({},t),{},{id:Date.now(),savedAt:(new Date).toISOString()});localStorage.setItem("contentDrafts",JSON.stringify([n,...e].slice(0,10))),alert("\u2705 Draft saved!")}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[Ie,je,R,L]),(0,i.useEffect)(()=>{var e;k&&Array.isArray(null===(e=k.pinterest)||void 0===e?void 0:e.boards)?nt(k.pinterest.boards):nt([])},[k]);const[We,Ke]=(0,i.useState)([]),[Ge,Qe]=(0,i.useState)(""),[Ye,Je]=(0,i.useState)("");(0,i.useEffect)(()=>{var e;k&&Array.isArray(null===(e=k.spotify)||void 0===e?void 0:e.playlists)?Ke(k.spotify.playlists):Ke([])},[k]);const[Xe,$e]=(0,i.useState)((null===E||void 0===E||null===(t=E.pinterest)||void 0===t?void 0:t.boardId)||""),[Ze,et]=(0,i.useState)((null===E||void 0===E||null===(n=E.pinterest)||void 0===n?void 0:n.note)||""),[tt,nt]=(0,i.useState)([]),[rt,it]=(0,i.useState)(A||[]),st=Array.isArray(A)?A:rt;(0,i.useEffect)(()=>{Array.isArray(A)&&it(A||[])},[A]);const[at,ot]=(0,i.useState)((null===E||void 0===E||null===(a=E.discord)||void 0===a?void 0:a.channelId)||""),[lt,ct]=(0,i.useState)((null===E||void 0===E||null===(l=E.telegram)||void 0===l?void 0:l.chatId)||""),[ut,dt]=(0,i.useState)((null===E||void 0===E||null===(f=E.reddit)||void 0===f?void 0:f.subreddit)||""),[ht,ft]=(0,i.useState)((null===E||void 0===E||null===(m=E.linkedin)||void 0===m?void 0:m.companyId)||""),[pt,mt]=(0,i.useState)((null===E||void 0===E||null===(v=E.twitter)||void 0===v?void 0:v.message)||""),[gt,vt]=(0,i.useState)(!1);(0,i.useEffect)(()=>{var e,t,n,r,i,s,a,o,l;E&&(ot((null===E||void 0===E||null===(e=E.discord)||void 0===e?void 0:e.channelId)||""),ct((null===E||void 0===E||null===(t=E.telegram)||void 0===t?void 0:t.chatId)||""),dt((null===E||void 0===E||null===(n=E.reddit)||void 0===n?void 0:n.subreddit)||""),ft((null===E||void 0===E||null===(r=E.linkedin)||void 0===r?void 0:r.companyId)||""),mt((null===E||void 0===E||null===(i=E.twitter)||void 0===i?void 0:i.message)||""),$e((null===E||void 0===E||null===(s=E.pinterest)||void 0===s?void 0:s.boardId)||""),et((null===E||void 0===E||null===(a=E.pinterest)||void 0===a?void 0:a.note)||""),Qe((null===E||void 0===E||null===(o=E.spotify)||void 0===o?void 0:o.playlistId)||""),Je((null===E||void 0===E||null===(l=E.spotify)||void 0===l?void 0:l.name)||""))},[E]);const yt=async e=>{if(e.preventDefault(),De(""),Re(!0),Le([]),M)try{const e=URL.createObjectURL(M);z(e)}catch(t){console.error("[Preview] failed to generate local preview URL",t)}try{let e="";M&&(e="preview://".concat(M.name));const t={title:R,type:D,description:L,url:e,platforms:st,isDryRun:!0,meta:{trimStart:"video"===D||"audio"===D?J:void 0,trimEnd:"video"===D||"audio"===D?$:void 0,rotate:"image"===D?B:void 0,flipH:"image"===D?H:void 0,flipV:"image"===D?K:void 0,duration:ee||void 0,crop:se||void 0,template:"none"!==Q?Q:void 0}};ce&&(t.meta.overlay={text:ce,position:de}),t.platform_options={pinterest:Xe||Ze?{boardId:Xe||void 0,note:Ze||void 0}:void 0,spotify:oe&&oe.length||Ge||Ye?{trackUris:oe&&oe.length?oe.map(e=>e.uri):void 0,playlistId:Ge||void 0,name:Ye||void 0}:void 0},st.includes("discord")&&(t.platform_options.discord={channelId:at||void 0}),st.includes("telegram")&&(t.platform_options.telegram={chatId:lt||void 0}),st.includes("reddit")&&(t.platform_options.reddit={subreddit:ut||void 0}),st.includes("linkedin")&&(t.platform_options.linkedin={companyId:ht||void 0}),st.includes("twitter")&&(t.platform_options.twitter={message:pt||void 0});const n=await x(t);n&&n.previews?Le(n.previews):n&&n.content_preview?Le([n.content_preview]):De("No preview data returned.")}catch(t){De(t.message||"Failed to generate preview.")}finally{Re(!1)}},wt=async e=>{e.preventDefault(),De(""),Ne(!0),Te(!0),Se(0),Ee("Preparing upload..."),console.log("[Upload] Starting upload process");try{if(console.log("[Upload] Content type:",D),!M)throw console.error("[Upload] No file selected"),new Error("Please select a file to upload.");let e="";console.log("[Upload] File selected:",M),Se(10),Ee("Uploading to cloud...");const n="uploads/".concat(D,"s/").concat(Date.now(),"_").concat(M.name);console.log("[Upload] Firebase Storage filePath:",n);const r=(0,c.KR)(o.IG,n);console.log("[Upload] Storage ref created:",r);try{Se(30);const t=await(0,c.D)(r,M);console.log("[Upload] uploadBytes result:",t),Se(60),Ee("Processing file..."),e=await(0,c.qk)(r),console.log("[Upload] File available at URL:",e),Se(80)}catch(t){throw console.error("[Upload] Error uploading to Firebase Storage:",t),t}const i=R||M.name,s=[];if(st.includes("discord")&&!at&&s.push("Discord Channel ID"),st.includes("telegram")&&!lt&&s.push("Telegram Chat ID"),st.includes("reddit")&&!ut&&s.push("Reddit subreddit"),st.includes("linkedin")&&!ht&&s.push("LinkedIn company id"),!st.includes("spotify")||oe&&oe.length||Ge||Ye||s.push("Spotify playlist or track"),s.length)throw new Error("Missing: "+s.join(", "));const a={title:i,type:D,description:L,url:e,platforms:st,template:"none"!==Q?Q:void 0,meta:{trimStart:"video"===D||"audio"===D?J:void 0,trimEnd:"video"===D||"audio"===D?$:void 0,rotate:"image"===D?B:void 0,flipH:"image"===D?H:void 0,flipV:"image"===D?K:void 0,duration:ee||void 0,crop:se||void 0,template:"none"!==Q?Q:void 0},platform_options:{pinterest:Xe||Ze?{boardId:Xe||void 0,note:Ze||void 0}:void 0,spotify:oe&&oe.length||Ge||Ye?{trackUris:oe&&oe.length?oe.map(e=>e.uri):void 0,playlistId:Ge||void 0,name:Ye||void 0}:void 0,discord:st.includes("discord")?{channelId:at||void 0}:void 0,telegram:st.includes("telegram")?{chatId:lt||void 0}:void 0,reddit:st.includes("reddit")?{subreddit:ut||void 0}:void 0,linkedin:st.includes("linkedin")?{companyId:ht||void 0}:void 0,twitter:st.includes("twitter")?{message:pt||void 0}:void 0}};ce&&(a.meta.overlay={text:ce,position:de}),console.log("[Upload] Content data to send:",a),Ee("Publishing to platforms..."),Se(90),await x(a),console.log("[Upload] onUpload callback completed"),Se(100),Ee("\u2713 Upload complete!"),setTimeout(()=>{P(""),U(""),F(null),be([]),ue(""),Te(!1),console.log("[Upload] Form cleared after successful upload")},1500)}catch(n){console.error("[Upload] Upload error:",n),De(n.message||"Failed to upload content. Please try again."),Te(!1)}finally{Ne(!1),console.log("[Upload] Upload process finished")}},bt=e=>{ge(e),pe(!0)},xt=()=>({title:R,description:L,type:D,overlayText:ce,hashtags:we,selectedPlatforms:st}),St=e=>{if(F(e),q(0),W(!1),G(!1),X(0),Z(0),te(0),ye(null),e)try{const t=URL.createObjectURL(e);z(t)}catch(t){console.error("[Preview] Error creating local preview:",t)}else z("")},[_t,Tt]=(0,i.useState)(!1),kt=e=>{const t=Array.isArray(A)?A:rt,n=t.includes(e)?t.filter(t=>t!==e):[...t,e];"function"===typeof I?I(n):it(n)},Et=e=>{switch(e){case"youtube":return(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"4",fill:"#FF0000"}),(0,s.jsx)("path",{d:"M10 9l6 3-6 3V9z",fill:"#fff"})]});case"tiktok":return(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M12 2v10.5C11.33 12.5 10.5 12 9.5 12 7 12 5 14 5 16.5S7 21 9.5 21 14 19 14 16.5V7h3V4h-5z",fill:"#000"}),(0,s.jsx)("path",{d:"M18 2v6h-2V3.9c0 .1-2 .1-2 0V4l-2-.5",fill:"#25F4EE"})]});case"instagram":return(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"5",fill:"#E1306C"}),(0,s.jsx)("circle",{cx:"12",cy:"12",r:"4",fill:"#fff"})]});case"facebook":return(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,s.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3",fill:"#1877F2"}),(0,s.jsx)("path",{d:"M14 7h-2c-.8 0-1 .4-1 1v2H14l-.5 2H11v6H9v-6H7v-2h2V8.5C9 6.6 10 5 12 5h2v2z",fill:"#fff"})]});case"twitter":return(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,s.jsx)("path",{d:"M23 3.5s-1 1.2-2 1.7c0 0-1.4-1-2 .4 0 0-.8 2 1 2.8 0 0-2.2-.2-3 1 0 0-1 1.8 1 3 0 0-3.4 0-4 1 0 0-1.2 2.4 2 3.2 0 0-4 .6-6-.5 0 0 .2 5 6.5 4.5 0 0 7 0 9-7 0 0 1.7-3.8-1.5-6.2z",fill:"#1DA1F2"})});case"linkedin":return(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,s.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",fill:"#0A66C2"}),(0,s.jsx)("path",{d:"M8 10H6v8h2v-8zM7 8a1 1 0 110-2 1 1 0 010 2zM18 16c0-3-2-3.5-2-3.5s0 1 0 3.5h2zM12 9H10v9h2v-4c0-1.6 2-1.7 2 0v4h2v-5c0-3-2-3.8-4-3.8z",fill:"#fff"})]});case"discord":return(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:"#495B8C",d:"M19 2A2 2 0 0121 4v13a2 2 0 01-2 2H5a2 2 0 01-2-2V4a2 2 0 012-2h14z"})});case"reddit":return(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("circle",{cx:"12",cy:"11",r:"8",fill:"#FF4500"})});case"telegram":return(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M21 3L3 10l5 2 2 5 8-14z",fill:"#37AEE2"})});case"pinterest":return(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:"#E60023",d:"M12 2C6.5 2 2 6.5 2 12c0 3.8 2.4 7.1 5.9 8.4-.1-.7-.1-1.9 0-2.7.1-.6.6-3.8.6-3.8s-.2-.4-.2-1.1c0-1 .6-1.8 1.3-1.8.6 0 .9.4.9.9 0 .6-.4 1.5-.6 2.4-.2.7.4 1.3 1.1 1.3 1.3 0 2.5-1.3 3-2.1.8-1.2 1.2-2.7 1.2-4.1C17.1 5.3 14.1 3 10.4 3 7 3 4.2 5 4.2 8.1c0 1.6.7 2.7.7 2.7l-.2 1.1c0 .2-.2.6-.4.7C4 14 3.7 13.7 3.7 13.4 3.7 10 5 6.4 9.4 6.4c2.6 0 4.1 1.7 4.1 4 0 3.1-1.6 4.5-2.9 4.5-.9 0-1.4-.6-1 3.5 0 1.1-.1 1.9-.2 2.7 1.9.5 3.8-.2 4.8-1.9 1.5-2.5 1.8-6 1-8.4C18.6 6 17 3 13 3s-8 3-8 9c0 4.8 3.4 7.6 7 7.6 1.5 0 2.8-.1 4-.4.3-.8.5-1.8.5-2.9C17.9 15.1 16.6 14 16.6 14c-.8.9-1.8 1.4-2.9 1.4-1.6 0-2.6-1.4-2.6-3.2 0-1.5.9-2.4 1.9-2.4 1 0 1.8.7 1.8 1.7 0 1.1-.7 2.2-1.6 2.2-.4 0-.7-.2-.7-.6 0-.4.1-.9.3-1.2.3-.4 1.2-1.6 1.2-2.9 0-1.3-.9-2.6-3.1-2.6-3 0-5.1 3-5.1 6 0 1.5.3 2.6 1 3.5 1.1 1.5 3 1.2 3.8.6 1.4-1.1 2.2-4.3 2.2-6.6C18 6.8 15 4 12 4z"})});case"spotify":return(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#1DB954"})});case"snapchat":return(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:"#FFFC00",d:"M12 2s3.08.42 4 1.5C19 6.5 20 8 18 10s-6 4-6 4-3-1-6-4c-2-2 0-3.5 2-6.5C8.92 2.43 12 2 12 2z"})});default:return(0,s.jsx)("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,background:"#eee"},children:e.charAt(0).toUpperCase()})}};return(0,s.jsxs)("div",{className:"content-upload-container",children:[(0,s.jsxs)("form",{onSubmit:wt,className:"content-upload-form",children:[(0,s.jsx)("h3",{children:"\u2728 Create Content"}),(0,s.jsx)(w,{onLoadDraft:e=>{P(e.title||""),U(e.description||""),O(e.type||"video"),ue(e.overlayText||""),e.hashtags&&be(e.hashtags),e.selectedPlatforms&&it(e.selectedPlatforms)},currentDraft:xt()}),Pe&&(0,s.jsx)("div",{className:"error-message",children:Pe}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Content Type"}),(0,s.jsxs)("select",{value:D,onChange:e=>O(e.target.value),className:"form-select",children:[(0,s.jsx)("option",{value:"video",children:"Video"}),(0,s.jsx)("option",{value:"image",children:"Image"}),(0,s.jsx)("option",{value:"audio",children:"Audio"})]})]}),(0,s.jsxs)("div",{className:"content-upload-grid",children:[(0,s.jsxs)("div",{className:"left-column",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"content-file-input",children:"File"}),(0,s.jsxs)("div",{className:"file-upload drop-zone ".concat(_t?"dragging":""),onDrop:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files[0]&&St(e.dataTransfer.files[0])},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),Tt(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),Tt(!1)},children:[(0,s.jsx)("input",{type:"file",id:"content-file-input",accept:"video"===D?"video/*":"audio"===D?"audio/*":"image/*",onChange:e=>St(e.target.files[0]),required:!0,className:"form-file-input"}),(0,s.jsx)("div",{className:"drop-help",children:"Drop files here or click to browse"}),M&&(0,s.jsxs)("div",{className:"file-info",children:["Selected file: ",M.name," (",(M.size/1024/1024).toFixed(2)," MB)"]})]})]}),M&&(0,s.jsxs)("div",{className:"form-group preview-area",children:[(0,s.jsx)("label",{children:"Live Preview"}),(0,s.jsx)("div",{className:"preview-wrapper",children:"video"===D?(0,s.jsx)("video",{ref:ne,src:V,controls:!0,className:"preview-video",style:{filter:null!==ve&&void 0!==ve&&ve.css?T(ve.css):""},onLoadedMetadata:e=>{const t=e.target.duration||0;te(t),Z(t)}}):"audio"===D?(0,s.jsxs)("div",{style:{width:"100%"},children:[(0,s.jsx)("audio",{src:V,controls:!0,style:{width:"100%",filter:null!==ve&&void 0!==ve&&ve.css?T(ve.css):""},onLoadedMetadata:e=>{const t=e.target.duration||0;te(t),Z(t)}}),(0,s.jsx)("div",{style:{marginTop:8},children:(0,s.jsx)(h,{file:M,trimStart:J,trimEnd:$,onChange:e=>{let{trimStart:t,trimEnd:n}=e;"undefined"!==typeof t&&X(t),"undefined"!==typeof n&&Z(n)}})})]}):(0,s.jsx)("img",{className:"preview-image",src:V,alt:"Content preview",style:{transform:"rotate(".concat(B,"deg) scaleX(").concat(H?-1:1,") scaleY(").concat(K?-1:1,")"),filter:null!==ve&&void 0!==ve&&ve.css?T(ve.css):""}})}),ce&&(0,s.jsx)("div",{className:"preview-overlay ".concat(de),children:(0,s.jsx)("div",{className:"overlay-text",style:{fontSize:"".concat(Ce.fontSize,"px"),color:Ce.color,fontWeight:Ce.fontWeight,textShadow:Ce.shadow?"2px 2px 4px rgba(0,0,0,0.8)":"none"},children:ce})}),(0,s.jsx)("div",{className:"preview-controls",children:"video"===D?(0,s.jsxs)("div",{className:"video-controls",children:[(0,s.jsxs)("label",{children:["Trim Start: ",(0,s.jsx)("input",{type:"number",min:0,max:ee,step:"0.1",value:J,onChange:e=>X(parseFloat(e.target.value)||0)})," secs"]}),(0,s.jsxs)("label",{children:["Trim End: ",(0,s.jsx)("input",{type:"number",min:0,max:ee,step:"0.1",value:$,onChange:e=>Z(parseFloat(e.target.value)||ee)})," secs"]}),(0,s.jsxs)("div",{className:"range-row",children:[(0,s.jsx)("input",{type:"range",min:"0",max:ee,step:"0.05",value:J,onChange:e=>X(parseFloat(e.target.value))}),(0,s.jsx)("input",{type:"range",min:"0",max:ee,step:"0.05",value:$,onChange:e=>Z(parseFloat(e.target.value))})]})]}):(0,s.jsxs)("div",{className:"image-controls",children:[(0,s.jsx)("button",{type:"button",onClick:()=>q((B+90)%360),className:"control-btn",children:"Rotate 90\xb0"}),(0,s.jsx)("button",{type:"button",onClick:()=>W(!H),className:"control-btn",children:"Flip H"}),(0,s.jsx)("button",{type:"button",onClick:()=>G(!K),className:"control-btn",children:"Flip V"}),(0,s.jsx)("button",{type:"button",onClick:()=>ie(!0),className:"control-btn",children:"Crop"})]})})]})]}),(0,s.jsxs)("div",{className:"right-column",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Templates"}),(0,s.jsxs)("select",{value:Q,onChange:e=>Y(e.target.value),className:"form-select",children:[(0,s.jsx)("option",{value:"none",children:"No Template"}),(0,s.jsx)("option",{value:"tiktok",children:"TikTok (9:16)"}),(0,s.jsx)("option",{value:"instagram-story",children:"Instagram Story (9:16)"}),(0,s.jsx)("option",{value:"facebook-feed",children:"Facebook Feed (4:5)"}),(0,s.jsx)("option",{value:"youtube",children:"YouTube (16:9)"}),(0,s.jsx)("option",{value:"thumbnail",children:"Platform Thumbnail"})]}),"none"!==Q&&(0,s.jsxs)("div",{className:"template-hint",children:["Template ",(0,s.jsx)("strong",{children:Q})," will prefill recommended aspect ratio and tags"]}),"none"!==Q&&(0,s.jsx)("button",{type:"button",onClick:()=>(e=>{if(!e||"none"===e)return;const t={tiktok:{title:"New TikTok Clip",description:"Short entertaining content optimized for vertical feed #trending",hashtags:["trending","viral"]},"instagram-story":{title:"Story Post",description:"Share your moment - portrait format",hashtags:["story","moments"]},"facebook-feed":{title:"Facebook Post",description:"Great content for your feed",hashtags:["social","promotion"]},youtube:{title:"YouTube Video",description:"Full resolution horizontal video",hashtags:["youtube","video"]},thumbnail:{title:"Thumbnail",description:"Custom thumbnail for your link",hashtags:["thumbnail"]}}[e];t&&(R||P(t.title),L||U(t.description))})(Q),className:"apply-template-btn",children:"Apply Template"})]}),(0,s.jsx)(S,{selectedPlatforms:st}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"\ud83c\udfaf Target Platforms"}),(0,s.jsx)("div",{className:"platform-grid",children:["youtube","tiktok","instagram","facebook","twitter","linkedin","reddit","discord","telegram","pinterest","spotify","snapchat"].map(e=>(0,s.jsxs)("div",{role:"button",tabIndex:0,"aria-pressed":st.includes(e),"aria-label":e.charAt(0).toUpperCase()+e.slice(1),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),kt(e))},className:"platform-tile ".concat(st.includes(e)?"selected":""),onClick:()=>kt(e),children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only","aria-hidden":"true",checked:st.includes(e),readOnly:!0}),(0,s.jsx)("div",{className:"platform-icon","aria-hidden":"true",children:Et(e)}),(0,s.jsx)("div",{className:"platform-name",children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Advanced/Per-platform options"}),(0,s.jsxs)("div",{style:{display:"grid",gap:8},children:[st.includes("discord")&&(0,s.jsx)("input",{placeholder:"Discord channel ID",value:at,onChange:e=>{ot(e.target.value),"function"===typeof C&&C("discord","channelId",e.target.value)}}),st.includes("telegram")&&(0,s.jsx)("input",{placeholder:"Telegram chat ID",value:lt,onChange:e=>{ct(e.target.value),"function"===typeof C&&C("telegram","chatId",e.target.value)}}),st.includes("reddit")&&(0,s.jsx)("input",{placeholder:"Reddit subreddit",value:ut,onChange:e=>{dt(e.target.value),"function"===typeof C&&C("reddit","subreddit",e.target.value)}}),st.includes("linkedin")&&(0,s.jsx)("input",{placeholder:"LinkedIn organization/company ID",value:ht,onChange:e=>{ft(e.target.value),"function"===typeof C&&C("linkedin","companyId",e.target.value)}}),st.includes("twitter")&&(0,s.jsx)("input",{placeholder:"Twitter message (optional)",value:pt,onChange:e=>{mt(e.target.value),"function"===typeof C&&C("twitter","message",e.target.value)}})]})]})]})]}),(0,s.jsxs)("div",{className:"form-group full-width",children:[(0,s.jsx)("label",{children:"Title"}),(0,s.jsxs)("div",{className:"input-with-emoji",children:[(0,s.jsx)("input",{ref:qe,type:"text",placeholder:"\u2728 Enter catchy title...",value:R,required:!0,onChange:e=>{P(_(e.target.value))},className:"form-input",maxLength:100}),(0,s.jsx)("button",{type:"button",className:"emoji-btn",onClick:()=>bt("title"),children:"\ud83d\ude0a"})]}),(0,s.jsxs)("div",{className:"char-count",children:[R.length,"/100"]})]}),(0,s.jsxs)("div",{className:"form-group full-width",children:[(0,s.jsx)("label",{children:"Description"}),(0,s.jsxs)("div",{className:"input-with-emoji",children:[(0,s.jsx)("textarea",{ref:He,placeholder:"\ud83d\udcdd Describe your content...",value:L,required:!0,onChange:e=>{U(_(e.target.value))},className:"form-textarea",rows:4,maxLength:500}),(0,s.jsx)("button",{type:"button",className:"emoji-btn",onClick:()=>bt("description"),children:"\ud83d\ude0a"})]}),(0,s.jsxs)("div",{className:"char-count",children:[L.length,"/500"]})]}),we.length>0&&(0,s.jsx)("div",{className:"selected-hashtags",children:we.map((e,t)=>(0,s.jsxs)("span",{className:"hashtag-badge",children:["#",e,(0,s.jsx)("button",{type:"button",onClick:()=>(e=>{be(we.filter(t=>t!==e)),U(t=>t.replace(new RegExp("#"+e+"\\s?","g"),"").trim())})(e),className:"remove-hashtag",children:"\xd7"})]},t))}),(0,s.jsx)(y,{contentType:D,title:R,description:L,onAddHashtag:e=>{we.includes(e)||(be([...we,e]),U(t=>t+(t?" ":"")+"#"+e))}}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"\ud83c\udfa8 Text Overlay (optional)"}),(0,s.jsxs)("div",{className:"input-with-emoji",children:[(0,s.jsx)("input",{placeholder:"Add overlay text...",value:ce,onChange:e=>{ue(_(e.target.value))},className:"form-input"}),(0,s.jsx)("button",{type:"button",className:"emoji-btn",onClick:()=>bt("overlay"),children:"\ud83d\ude0a"})]}),(0,s.jsxs)("div",{className:"overlay-controls",children:[(0,s.jsxs)("select",{value:de,onChange:e=>he(e.target.value),className:"form-select-small",children:[(0,s.jsx)("option",{value:"top",children:"\u2b06\ufe0f Top"}),(0,s.jsx)("option",{value:"center",children:"\u23fa\ufe0f Center"}),(0,s.jsx)("option",{value:"bottom",children:"\u2b07\ufe0f Bottom"})]}),(0,s.jsx)("input",{type:"color",value:Ce.color,onChange:e=>Ae((0,r.A)((0,r.A)({},Ce),{},{color:e.target.value})),className:"color-picker",title:"Text color"}),(0,s.jsxs)("select",{value:Ce.fontSize,onChange:e=>Ae((0,r.A)((0,r.A)({},Ce),{},{fontSize:parseInt(e.target.value)})),className:"form-select-small",children:[(0,s.jsx)("option",{value:12,children:"Small"}),(0,s.jsx)("option",{value:16,children:"Medium"}),(0,s.jsx)("option",{value:24,children:"Large"}),(0,s.jsx)("option",{value:32,children:"XL"})]})]})]}),M&&"image"===D&&V&&(0,s.jsx)(g,{imageUrl:V,onApplyFilter:e=>ye(e)}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Pinterest Options (optional)"}),(0,s.jsxs)("div",{style:{display:"grid",gap:".5rem"},children:[tt&&tt.length>0?(0,s.jsxs)("select",{value:Xe,onChange:e=>{$e(e.target.value),"function"===typeof C&&C("pinterest","boardId",e.target.value)},style:{padding:".5rem",borderRadius:8},children:[(0,s.jsx)("option",{value:"",children:"Select a board"}),tt.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}):(0,s.jsx)("input",{placeholder:"Pinterest board id (or leave blank)",value:Xe,onChange:e=>{$e(e.target.value),"function"===typeof C&&C("pinterest","boardId",e.target.value)},style:{padding:".5rem",borderRadius:8}}),(0,s.jsx)("input",{placeholder:"Pin note (optional)",value:Ze,onChange:e=>{et(e.target.value),"function"===typeof C&&C("pinterest","note",e.target.value)},style:{padding:".5rem",borderRadius:8}})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Spotify Tracks to Add (optional)"}),(0,s.jsx)(u,{selectedTracks:Array.isArray(N)?N:oe,onChangeTracks:e=>{"function"===typeof j?j(e):le(e)}})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Spotify Playlist (optional)"}),(0,s.jsxs)("div",{style:{display:"grid",gap:8},children:[We&&We.length>0?(0,s.jsxs)("select",{value:Ge,onChange:e=>{Qe(e.target.value),"function"===typeof C&&C("spotify","playlistId",e.target.value)},style:{padding:".5rem",borderRadius:8},children:[(0,s.jsx)("option",{value:"",children:"Select existing playlist"}),We.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}):(0,s.jsx)("input",{placeholder:"Existing playlist id (optional)",value:Ge,onChange:e=>{Qe(e.target.value),"function"===typeof C&&C("spotify","playlistId",e.target.value)},style:{padding:".5rem",borderRadius:8}}),(0,s.jsx)("input",{placeholder:"Or create new playlist name (optional)",value:Ye,onChange:e=>{Je(e.target.value),"function"===typeof C&&C("spotify","name",e.target.value)},style:{padding:".5rem",borderRadius:8}})]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:".5rem",marginTop:".5rem",flexWrap:"wrap"},children:[(0,s.jsx)("button",{type:"button",disabled:Ie||je,className:"preview-button",onClick:yt,title:"Preview (Ctrl+P)",children:je?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"loading-spinner"})," Generating Preview..."]}):(0,s.jsx)(s.Fragment,{children:"\u26a1 Preview"})}),(0,s.jsx)("button",{type:"button",disabled:Ie,className:"quality-check-button",onClick:async e=>{e.preventDefault(),Me(null),Ve([]),Be(null),De("");try{const e=await fetch("/api/content/quality-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:R,description:L,type:D,url:M?"preview://".concat(M.name):""})}),t=await e.json();e.ok?(Me(t.quality_score),Ve(t.quality_feedback),t.enhanced&&t.quality_score<70&&Be(t.enhanced)):De(t.error||"Quality check failed.")}catch(t){De(t.message||"Quality check failed.")}},title:"Check content quality",children:"\u2728 Quality Check"}),(0,s.jsx)("button",{type:"submit",disabled:Ie,className:"submit-button",title:"Upload (Ctrl+Enter)",children:Ie?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"loading-spinner"}),"Uploading..."]}):(0,s.jsx)(s.Fragment,{children:"\ud83d\ude80 Upload"})})]}),(0,s.jsxs)("div",{className:"keyboard-shortcuts",children:[(0,s.jsx)("span",{children:"\u2328\ufe0f Shortcuts:"}),(0,s.jsx)("span",{className:"shortcut-item",children:"Ctrl+Enter = Upload"}),(0,s.jsx)("span",{className:"shortcut-item",children:"Ctrl+P = Preview"}),(0,s.jsx)("span",{className:"shortcut-item",children:"Ctrl+S = Save Draft"})]}),re&&V&&(0,s.jsx)(d,{imageUrl:V,onChangeCrop:e=>{ae(e),ie(!1)},onClose:()=>ie(!1)}),fe&&(0,s.jsx)(p,{onSelect:e=>{"title"===me?P(t=>t+e):"description"===me?U(t=>t+e):"overlay"===me&&ue(t=>t+e),pe(!1)},onClose:()=>pe(!1)}),_e&&(0,s.jsx)(b,{progress:xe,status:ke,fileName:null===M||void 0===M?void 0:M.name}),null!==Ue&&(0,s.jsxs)("div",{className:"quality-check-results",style:{marginTop:"1rem",padding:"1rem",border:"1px solid #e0e0e0",borderRadius:8,background:"#f8f8fa"},children:[(0,s.jsx)("strong",{children:"Quality Score:"})," ",Ue," / 100",(0,s.jsx)("br",{}),Fe.length>0&&(0,s.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,s.jsx)("strong",{children:"Feedback:"}),(0,s.jsx)("ul",{children:Fe.map((e,t)=>(0,s.jsx)("li",{children:e},t))})]}),ze&&(0,s.jsxs)("div",{style:{marginTop:"1rem",background:"#fffbe6",padding:"1rem",borderRadius:6,border:"1px solid #ffe58f"},children:[(0,s.jsx)("strong",{children:"Suggested Improvements:"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Title:"})," ",ze.title]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Description:"})," ",ze.description]}),(0,s.jsx)("button",{type:"button",style:{marginTop:"0.5rem"},className:"apply-enhancements-btn",onClick:()=>{P(ze.title),U(ze.description),Be(null)},children:"Apply Suggestions"})]})]})]}),Oe&&Oe.length>0&&(0,s.jsxs)("div",{className:"content-preview-section",children:[(0,s.jsx)("h4",{children:"Platform Previews"}),(0,s.jsx)("div",{className:"preview-cards",style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:Oe.map((e,t)=>(0,s.jsxs)("div",{className:"preview-card",style:{border:"1px solid #ccc",borderRadius:8,padding:"1rem",minWidth:220,maxWidth:320,background:"#f9fafb"},children:[(0,s.jsx)("h5",{children:e.platform?e.platform.charAt(0).toUpperCase()+e.platform.slice(1):"Preview"}),(0,s.jsx)("img",{src:e.thumbnail||"/default-thumb.png",alt:"Preview Thumbnail",style:{width:"100%",height:120,objectFit:"cover",borderRadius:6}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Title:"})," ",e.title]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Description:"})," ",e.description]}),e.caption&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Caption:"})," ",e.caption]}),Array.isArray(e.hashtags)&&e.hashtags.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Hashtags:"})," ",e.hashtags.map(e=>"#".concat(e)).join(" ")]}),e.sound&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Sound:"})," ",e.sound]})]},t))})]})]})};const E=function(e){let{onUpload:t,contentList:n,platformMetadata:r,platformOptions:a,setPlatformOption:o,selectedPlatforms:l,setSelectedPlatforms:c,spotifySelectedTracks:u,setSpotifySelectedTracks:d}=e;const[h,f]=(0,i.useState)(null),p=()=>{f(null)};return(0,s.jsxs)("section",{className:"upload-panel",children:[(0,s.jsx)("h3",{children:"Upload Content"}),(0,s.jsx)(k,{onUpload:t,platformMetadata:r,platformOptions:a,setPlatformOption:o,selectedPlatforms:l,setSelectedPlatforms:c,spotifySelectedTracks:u,setSpotifySelectedTracks:d}),(0,s.jsxs)("div",{className:"upload-history",style:{marginTop:"1.5rem"},children:[(0,s.jsx)("h4",{children:"Upload History"}),n&&0!==n.length?(0,s.jsx)("div",{className:"content-grid",style:{display:"grid",gap:".75rem",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))"},children:n.map((e,t)=>{const n="string"===typeof(null===e||void 0===e?void 0:e.title)?e.title:null!==e&&void 0!==e&&e.title?JSON.stringify(e.title):"Untitled",r="string"===typeof(null===e||void 0===e?void 0:e.status)?e.status:null!==e&&void 0!==e&&e.status?JSON.stringify(e.status):"unknown",i={published:"#10b981",scheduled:"#f59e0b",pending:"#6366f1",failed:"#ef4444",draft:"#6b7280"}["string"===typeof(null===e||void 0===e?void 0:e.status)?e.status.toLowerCase().replace(/[^a-z0-9-]/g,""):"unknown"]||"#6b7280";return(0,s.jsxs)("div",{className:"content-card",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"1rem",transition:"all 0.2s",cursor:"pointer"},onClick:()=>(e=>{"video"!==e.type&&"audio"!==e.type||f(e)})(e),children:[e.url&&"image"===e.type&&(0,s.jsx)("img",{src:e.url,alt:n,style:{width:"100%",height:150,objectFit:"cover",borderRadius:6,marginBottom:".75rem"}}),e.url&&"video"===e.type&&(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("video",{src:e.url,style:{width:"100%",height:150,objectFit:"cover",borderRadius:6,marginBottom:".75rem",background:"#000"}}),(0,s.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0,0,0,0.7)",borderRadius:"50%",width:50,height:50,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",color:"white"},children:"\u25b6"})]}),e.url&&"audio"===e.type&&(0,s.jsxs)("div",{style:{width:"100%",height:150,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:6,marginBottom:".75rem",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[(0,s.jsx)("div",{style:{fontSize:"3rem"},children:"\ud83c\udfb5"}),(0,s.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0,0,0,0.7)",borderRadius:"50%",width:50,height:50,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",color:"white"},children:"\u25b6"})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:".5rem"},children:[(0,s.jsx)("h5",{style:{margin:0,fontSize:".95rem",fontWeight:600,color:"#eef2ff"},children:n}),(0,s.jsx)("span",{style:{padding:".25rem .5rem",borderRadius:4,fontSize:".75rem",fontWeight:600,background:"".concat(i,"22"),color:i,border:"1px solid ".concat(i,"44")},children:r})]}),e.description&&(0,s.jsx)("p",{style:{fontSize:".875rem",color:"#9aa4b2",margin:".25rem 0"},children:e.description}),(0,s.jsxs)("div",{style:{display:"flex",gap:".5rem",marginTop:".75rem",fontSize:".75rem",color:"#6b7280"},children:[(0,s.jsxs)("span",{children:["\ud83d\udcca ",e.views||0," views"]}),(0,s.jsxs)("span",{children:["\ud83d\udc46 ",e.clicks||0," clicks"]})]})]},t)})}):(0,s.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"#9aa4b2",background:"rgba(255,255,255,0.02)",borderRadius:8},children:[(0,s.jsx)("p",{children:"\ud83d\udce4 No uploads yet"}),(0,s.jsx)("p",{style:{fontSize:".875rem"},children:"Upload your first content to get started!"})]})]}),h&&(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},onClick:p,children:(0,s.jsxs)("div",{style:{maxWidth:"90vw",maxHeight:"90vh",background:"#1a1a2e",borderRadius:12,padding:"1.5rem",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{onClick:p,style:{position:"absolute",top:10,right:10,background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"50%",width:36,height:36,fontSize:"1.25rem",cursor:"pointer",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"}),(0,s.jsx)("h3",{style:{marginTop:0,marginBottom:"1rem",color:"#eef2ff"},children:h.title||"Untitled"}),"video"===h.type&&(0,s.jsx)("video",{src:h.url,controls:!0,autoPlay:!0,style:{width:"100%",maxHeight:"70vh",borderRadius:8}}),"audio"===h.type&&(0,s.jsxs)("div",{style:{padding:"2rem",textAlign:"center"},children:[(0,s.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\ud83c\udfb5"}),(0,s.jsx)("audio",{src:h.url,controls:!0,autoPlay:!0,style:{width:"100%",marginTop:"1rem"}})]}),h.description&&(0,s.jsx)("p",{style:{marginTop:"1rem",color:"#9aa4b2",fontSize:".875rem"},children:h.description}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem",fontSize:".875rem",color:"#6b7280"},children:[(0,s.jsxs)("span",{children:["\ud83d\udcca ",h.views||0," views"]}),(0,s.jsxs)("span",{children:["\ud83d\udc46 ",h.clicks||0," clicks"]}),h.platforms&&(0,s.jsxs)("span",{children:["\ud83d\udcf1 ",Array.isArray(h.platforms)?h.platforms.join(", "):h.platforms]})]})]})})]})};function C(e){let{platform:t}=e;const n={tiktok:"#ff0050",youtube:"#ff0000",instagram:"#E1306C",twitter:"#1DA1F2",facebook:"#1877F2",spotify:"#1DB954",pinterest:"#E60023",linkedin:"#0077B5",reddit:"#FF4500",discord:"#5865F2",telegram:"#2CA5E0",snapchat:"#FFFC00"}[t]||"#9aa4b2";return(0,s.jsxs)("span",{className:"platform-badge",style:{background:n},title:t,children:[{tiktok:"\ud83c\udfb5",youtube:"\u25b6\ufe0f",instagram:"\ud83d\udcf7",twitter:"\ud83e\udeb6",facebook:"\ud83d\udcd8",spotify:"\ud83c\udfa7",pinterest:"\ud83d\udccc",linkedin:"\ud83d\udd17",reddit:"\ud83d\udc7d",discord:"\ud83d\udcac",telegram:"\u2708\ufe0f",snapchat:"\ud83d\udc7b"}[t]||"\ud83c\udf10"," ",t]})}const A=function(e){let{schedule:t,content:n,onPause:r,onResume:i,onReschedule:a,onDelete:o}=e;const l=(null===n||void 0===n?void 0:n.title)||(null===t||void 0===t?void 0:t.contentTitle)||"Untitled",c=(null===n||void 0===n?void 0:n.thumbnailUrl)||(null===n||void 0===n?void 0:n.thumbnail)||(null===t||void 0===t?void 0:t.thumbnailUrl)||(null===t||void 0===t?void 0:t.thumbnail)||"/image.png",u=new Date((null===t||void 0===t?void 0:t.startTime)||(null===t||void 0===t?void 0:t.startAt)||(null===t||void 0===t?void 0:t.when)||Date.now()).toLocaleString(),d=(null===t||void 0===t?void 0:t.frequency)||(null===t||void 0===t?void 0:t.scheduleType)||"once",h=Array.isArray(null===t||void 0===t?void 0:t.platform)?t.platform:null!==t&&void 0!==t&&t.platform?[t.platform]:Array.isArray(null===t||void 0===t?void 0:t.platforms)?t.platforms:[],f=!1!==(null===t||void 0===t?void 0:t.isActive);return(0,s.jsxs)("div",{className:"schedule-card ".concat(f?"active":"paused"),children:[(0,s.jsx)("div",{className:"card-thumb",style:{backgroundImage:"url(".concat(c,")")},children:(0,s.jsx)("div",{className:"sparkles",children:"\u2728"})}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsxs)("div",{className:"card-header",children:[(0,s.jsx)("h4",{className:"card-title",children:l}),(0,s.jsx)("div",{className:"card-platforms",children:h.map(e=>(0,s.jsx)(C,{platform:e},e))})]}),(0,s.jsxs)("div",{className:"card-meta",children:[(0,s.jsxs)("div",{className:"meta-when",children:["\ud83d\udcc5 ",u]}),(0,s.jsxs)("div",{className:"meta-frequency",children:["\ud83d\udd01 ",d]})]}),(0,s.jsxs)("div",{className:"card-actions",children:[f?(0,s.jsx)("button",{className:"btn small ghost",onClick:()=>r&&r(t.id),children:"Pause"}):(0,s.jsx)("button",{className:"btn small primary",onClick:()=>i&&i(t.id),children:"Resume"}),(0,s.jsx)("button",{className:"btn small",onClick:()=>a&&a(t.id),children:"Reschedule"}),(0,s.jsx)("button",{className:"btn small danger",onClick:()=>o&&o(t.id),children:"Delete"})]})]})]})},I=e=>{let{schedulesList:t,contentList:n,onCreate:r,onPause:a,onResume:o,onReschedule:l,onDelete:c}=e;const[u,d]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),[p,m]=(0,i.useState)([]),[g,v]=(0,i.useState)("once");return(0,s.jsxs)("section",{className:"schedules-panel",children:[(0,s.jsx)("h3",{children:"My Schedules"}),(0,s.jsxs)("div",{className:"create-schedule",style:{marginBottom:".75rem",padding:".75rem",border:"1px solid #e7edf3",borderRadius:8},children:[(0,s.jsx)("h4",{children:"Create Schedule"}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!u)return alert("Select content to schedule");try{await r&&r({contentId:u,time:h||(new Date).toISOString(),frequency:g,platforms:p}),d(""),f(""),m([]),v("once")}catch(e){console.warn(e),alert("Failed to create schedule")}},style:{display:"grid",gap:8},children:[(0,s.jsxs)("select",{value:u,onChange:e=>d(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Select content"}),(n||[]).map(e=>(0,s.jsx)("option",{value:e.id,children:e.title||e.id},e.id))]}),(0,s.jsx)("input",{type:"datetime-local",value:h,onChange:e=>f(e.target.value)}),(0,s.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["youtube","tiktok","instagram","facebook","twitter","linkedin","reddit","discord","telegram","pinterest","spotify","snapchat"].map(e=>(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:p.includes(e),onChange:()=>(e=>m(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]))(e)})," ",e]},e))}),(0,s.jsxs)("select",{value:g,onChange:e=>v(e.target.value),children:[(0,s.jsx)("option",{value:"once",children:"Once"}),(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"})]}),(0,s.jsx)("div",{style:{display:"flex",gap:8},children:(0,s.jsx)("button",{type:"submit",className:"btn primary",children:"Create Schedule"})})]})]}),t&&0!==t.length?(0,s.jsx)("div",{className:"schedules-list",style:{display:"grid",gap:".75rem"},children:t.map((e,t)=>(0,s.jsx)(A,{schedule:e,content:n.find(t=>t.id===e.contentId)||null,onPause:a,onResume:o,onReschedule:l,onDelete:c},t))}):(0,s.jsx)("div",{style:{color:"#9aa4b2"},children:"No schedules yet."})]})},N=()=>{var e,t,n;const[r,a]=(0,i.useState)(!0),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)("7d");(0,i.useEffect)(()=>{f()},[d]);const f=async()=>{a(!0);try{const e=o.j2.currentUser;if(!e)return void a(!1);const t=await e.getIdToken(!0),n=await fetch("".concat(l.Sn.ANALYTICS_USER,"?range=").concat(d),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();u(e)}else 500!==n.status&&404!==n.status||u(null)}catch(e){u(null)}finally{a(!1)}};if(r)return(0,s.jsxs)("section",{className:"analytics-panel",children:[(0,s.jsx)("h3",{children:"Analytics"}),(0,s.jsxs)("div",{className:"loading-skeleton",children:[(0,s.jsx)("div",{className:"skeleton-card",style:{height:120,marginBottom:16}}),(0,s.jsx)("div",{className:"skeleton-card",style:{height:120,marginBottom:16}}),(0,s.jsx)("div",{className:"skeleton-card",style:{height:120,marginBottom:16}})]})]});const p=c||{totalViews:0,totalClicks:0,ctr:0,topPlatform:"N/A",platformBreakdown:{}};return(0,s.jsxs)("section",{className:"analytics-panel",children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,s.jsx)("h3",{children:"Analytics"}),(0,s.jsxs)("select",{value:d,onChange:e=>h(e.target.value),style:{padding:"0.5rem",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--card)",color:"var(--text)"},children:[(0,s.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,s.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,s.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,s.jsx)("option",{value:"90d",children:"Last 90 Days"})]})]}),(0,s.jsxs)("div",{className:"analytics-kpi-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,s.jsxs)("div",{className:"kpi-card",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)"},children:[(0,s.jsx)("div",{style:{color:"var(--muted)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Total Views"}),(0,s.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--text)"},children:(null===(e=p.totalViews)||void 0===e?void 0:e.toLocaleString())||0})]}),(0,s.jsxs)("div",{className:"kpi-card",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)"},children:[(0,s.jsx)("div",{style:{color:"var(--muted)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Total Clicks"}),(0,s.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--text)"},children:(null===(t=p.totalClicks)||void 0===t?void 0:t.toLocaleString())||0})]}),(0,s.jsxs)("div",{className:"kpi-card",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)"},children:[(0,s.jsx)("div",{style:{color:"var(--muted)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Click-Through Rate"}),(0,s.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--brand)"},children:[(null===(n=p.ctr)||void 0===n?void 0:n.toFixed(2))||0,"%"]})]}),(0,s.jsxs)("div",{className:"kpi-card",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)"},children:[(0,s.jsx)("div",{style:{color:"var(--muted)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Top Platform"}),(0,s.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--text)",textTransform:"capitalize"},children:p.topPlatform||"N/A"})]})]}),(0,s.jsxs)("div",{className:"platform-breakdown",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)",marginBottom:"1.5rem"},children:[(0,s.jsx)("h4",{style:{marginTop:0,marginBottom:"1rem"},children:"Platform Breakdown"}),p.platformBreakdown&&Object.keys(p.platformBreakdown).length>0?(0,s.jsx)("div",{style:{display:"grid",gap:"0.75rem"},children:Object.entries(p.platformBreakdown).map(e=>{var t;let[n,r]=e;return(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"var(--bg-2)",borderRadius:"8px"},children:[(0,s.jsx)("span",{style:{textTransform:"capitalize",fontWeight:500},children:n}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",color:"var(--muted)"},children:[(0,s.jsxs)("span",{children:[r.views||0," views"]}),(0,s.jsxs)("span",{children:[r.clicks||0," clicks"]}),(0,s.jsxs)("span",{style:{color:"var(--brand)"},children:[(null===(t=r.ctr)||void 0===t?void 0:t.toFixed(1))||0,"% CTR"]})]})]},n)})}):(0,s.jsx)("div",{style:{color:"var(--muted)",textAlign:"center",padding:"2rem"},children:"No platform data yet. Start uploading content to see analytics!"})]}),(0,s.jsxs)("div",{className:"recent-content",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)"},children:[(0,s.jsx)("h4",{style:{marginTop:0,marginBottom:"1rem"},children:"Top Performing Content"}),p.topContent&&p.topContent.length>0?(0,s.jsx)("div",{style:{display:"grid",gap:"0.75rem"},children:p.topContent.slice(0,5).map((e,t)=>(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"var(--bg-2)",borderRadius:"8px"},children:[(0,s.jsx)("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title||"Untitled"}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",color:"var(--muted)",fontSize:"0.875rem"},children:[(0,s.jsxs)("span",{children:["\ud83d\udc41 ",e.views||0]}),(0,s.jsxs)("span",{children:["\ud83d\uddb1 ",e.clicks||0]})]})]},t))}):(0,s.jsx)("div",{style:{color:"var(--muted)",textAlign:"center",padding:"2rem"},children:"No content data available yet."})]})]})},j=e=>{let{badges:t}=e;return(0,s.jsxs)("section",{className:"rewards-panel",children:[(0,s.jsx)("h3",{children:"Rewards & Badges"}),Array.isArray(t)&&t.length?(0,s.jsx)("div",{style:{display:"grid",gap:".5rem"},children:t.map((e,t)=>(0,s.jsxs)("div",{className:"reward-item",children:[e.title||e.name||"Badge"," - ",e.description||""]},t))}):(0,s.jsx)("div",{style:{color:"#9aa4b2"},children:"You have no rewards yet."})]})},R=e=>{let{notifs:t,onMarkAllRead:n}=e;return(0,s.jsxs)("section",{className:"notifications-panel",children:[(0,s.jsx)("h3",{children:"Notifications"}),(0,s.jsx)("div",{style:{display:"flex",gap:".5rem",justifyContent:"flex-end"},children:(0,s.jsx)("button",{className:"check-quality",onClick:n,children:"Mark all read"})}),t&&0!==t.length?(0,s.jsx)("ul",{style:{marginTop:".5rem"},children:t.map((e,t)=>(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:e.title})," - ",(0,s.jsx)("span",{style:{color:"#666"},children:e.message||e.body})]},t))}):(0,s.jsx)("div",{style:{color:"#9aa4b2"},children:"No new notifications."})]})},P=e=>{let{earnings:t,onClaim:n}=e;const[r,a]=(0,i.useState)([]),[c,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{d()},[]);const d=async()=>{u(!0);try{const e=o.j2.currentUser;if(!e)return void u(!1);const t=await e.getIdToken(!0),n=await fetch(l.Sn.EARNINGS_PAYOUTS,{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=n.headers.get("content-type");if(e&&e.includes("application/json")){const e=await n.json();a(e.payouts||[])}else a([])}else a([])}catch(e){a([])}finally{u(!1)}};return(0,s.jsxs)("section",{className:"earnings-panel",children:[(0,s.jsx)("h3",{children:"Earnings"}),t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"earnings-summary",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,s.jsxs)("div",{className:"earnings-card",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)"},children:[(0,s.jsx)("div",{style:{color:"var(--muted)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Available Balance"}),(0,s.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:["$",(t.available||0).toFixed(2)]}),(0,s.jsx)("button",{className:"check-quality",onClick:n,disabled:!t.available||t.available<10,style:{marginTop:"1rem",width:"100%",opacity:t.available>=10?1:.5,cursor:t.available>=10?"pointer":"not-allowed"},children:"Request Payout"}),t.available<10&&(0,s.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:"0.5rem"},children:"Minimum payout: $10.00"})]}),(0,s.jsxs)("div",{className:"earnings-card",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)"},children:[(0,s.jsx)("div",{style:{color:"var(--muted)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Pending"}),(0,s.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f59e0b"},children:["$",(t.pending||0).toFixed(2)]}),(0,s.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:"1rem"},children:"Processing payouts"})]}),(0,s.jsxs)("div",{className:"earnings-card",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)"},children:[(0,s.jsx)("div",{style:{color:"var(--muted)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Total Earned"}),(0,s.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--brand)"},children:["$",((t.available||0)+(t.pending||0)+(t.paid||0)).toFixed(2)]}),(0,s.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:"1rem"},children:"Lifetime earnings"})]})]}),(0,s.jsxs)("div",{className:"payout-history",style:{background:"var(--card)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border)"},children:[(0,s.jsx)("h4",{style:{marginTop:0,marginBottom:"1rem"},children:"Payout History"}),c?(0,s.jsx)("div",{style:{color:"var(--muted)",textAlign:"center",padding:"2rem"},children:"Loading..."}):r&&r.length>0?(0,s.jsx)("div",{className:"payout-list",children:r.map((e,t)=>(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"var(--bg-2)",borderRadius:"8px",marginBottom:"0.75rem"},children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{fontWeight:500},children:["$",(e.amount||0).toFixed(2)]}),(0,s.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--muted)"},children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]}),(0,s.jsx)("div",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500,background:"completed"===e.status?"#10b98133":"pending"===e.status?"#f59e0b33":"#ef444433",color:"completed"===e.status?"#10b981":"pending"===e.status?"#f59e0b":"#ef4444"},children:e.status||"unknown"})]},t))}):(0,s.jsx)("div",{style:{color:"var(--muted)",textAlign:"center",padding:"2rem"},children:"No payout history yet. Request your first payout when you reach $10!"})]})]}):(0,s.jsx)("div",{style:{color:"#9aa4b2"},children:"Loading earnings..."})]})},D=e=>{let{platformSummary:t,discordStatus:n,spotifyStatus:r,redditStatus:i,youtubeStatus:a,twitterStatus:o,tiktokStatus:l,facebookStatus:c,linkedinStatus:u,snapchatStatus:d,telegramStatus:h,pinterestStatus:f,handleConnectSpotify:p,handleConnectDiscord:m,handleConnectReddit:g,handleConnectYouTube:v,handleConnectTwitter:y,handleConnectSnapchat:w,handleConnectLinkedin:b,handleConnectTelegram:x,handleConnectPinterest:S,handleConnectTikTok:_,handleConnectFacebook:T,handleDisconnectPlatform:k}=e;const E=e=>{var s,p,m,g,v,y,w,b,x,S,_,T,k,E,C,A,I,N,j,R,P,D,O,L,U,M,F,V,z,B,q,H,W,K,G,Q,Y,J,X,$,Z,ee,te,ne,re,ie;const se=(null===t||void 0===t?void 0:t.summary)||{};switch(e){case"twitter":return null!==o&&void 0!==o&&null!==(s=o.identity)&&void 0!==s&&s.username?"@".concat(o.identity.username):null!==(p=se.twitter)&&void 0!==p&&p.username?"@".concat(se.twitter.username):(null===o||void 0===o||null===(m=o.identity)||void 0===m?void 0:m.name)||null;case"tiktok":return null!==l&&void 0!==l&&null!==(g=l.profile)&&void 0!==g&&g.username?"@".concat(l.profile.username):(null===l||void 0===l||null===(v=l.meta)||void 0===v?void 0:v.display_name)||(null===(y=se.tiktok)||void 0===y?void 0:y.display_name)||null;case"facebook":return(null===c||void 0===c||null===(w=c.profile)||void 0===w?void 0:w.name)||(null===c||void 0===c||null===(b=c.profile)||void 0===b?void 0:b.email)||(null!==c&&void 0!==c&&null!==(x=c.pages)&&void 0!==x&&null!==(S=x[0])&&void 0!==S&&S.name?"Page: ".concat(c.pages[0].name):null)||(null!==c&&void 0!==c&&null!==(_=c.meta)&&void 0!==_&&null!==(T=_.pages)&&void 0!==T&&null!==(k=T[0])&&void 0!==k&&k.name?"Page: ".concat(c.meta.pages[0].name):null)||(null===(E=se.facebook)||void 0===E||null===(C=E.pages)||void 0===C?void 0:C[0])||null;case"youtube":return(null===a||void 0===a||null===(A=a.channel)||void 0===A||null===(I=A.snippet)||void 0===I?void 0:I.title)||(null===(N=se.youtube)||void 0===N?void 0:N.channelTitle)||null;case"spotify":return(null===r||void 0===r||null===(j=r.profile)||void 0===j?void 0:j.display_name)||(null===r||void 0===r||null===(R=r.meta)||void 0===R?void 0:R.display_name)||(null===(P=se.spotify)||void 0===P?void 0:P.display_name)||null;case"reddit":return null!==i&&void 0!==i&&null!==(D=i.profile)&&void 0!==D&&D.username?"u/".concat(i.profile.username):null!==i&&void 0!==i&&null!==(O=i.meta)&&void 0!==O&&O.username?"u/".concat(i.meta.username):null!==(L=se.reddit)&&void 0!==L&&L.name?"u/".concat(se.reddit.name):null;case"discord":return null!==n&&void 0!==n&&null!==(U=n.profile)&&void 0!==U&&U.username?"".concat(n.profile.username).concat(n.profile.discriminator?"#"+n.profile.discriminator:""):(null===n||void 0===n||null===(M=n.meta)||void 0===M?void 0:M.username)||(null===(F=se.discord)||void 0===F?void 0:F.username)||null;case"linkedin":return(null===u||void 0===u||null===(V=u.profile)||void 0===V?void 0:V.name)||(null===u||void 0===u||null===(z=u.profile)||void 0===z?void 0:z.email)||(null===u||void 0===u||null===(B=u.meta)||void 0===B||null===(q=B.organizations)||void 0===q||null===(H=q[0])||void 0===H?void 0:H.name)||(null===(W=se.linkedin)||void 0===W||null===(K=W.organizations)||void 0===K?void 0:K[0])||null;case"telegram":return null!==h&&void 0!==h&&null!==(G=h.profile)&&void 0!==G&&G.username?"@".concat(h.profile.username):null!==h&&void 0!==h&&null!==(Q=h.profile)&&void 0!==Q&&Q.first_name?"".concat(h.profile.first_name).concat(h.profile.last_name?" "+h.profile.last_name:""):(null===h||void 0===h||null===(Y=h.meta)||void 0===Y?void 0:Y.chatId)||(null===(J=se.telegram)||void 0===J?void 0:J.chatId)||null;case"pinterest":return(null===f||void 0===f||null===(X=f.profile)||void 0===X?void 0:X.username)||(null!==f&&void 0!==f&&null!==($=f.meta)&&void 0!==$&&null!==(Z=$.boards)&&void 0!==Z&&null!==(ee=Z[0])&&void 0!==ee&&ee.name?"Board: ".concat(f.meta.boards[0].name):null)||(null===(te=se.pinterest)||void 0===te?void 0:te.boards)||null;case"snapchat":return(null===d||void 0===d||null===(ne=d.profile)||void 0===ne?void 0:ne.displayName)||(null===d||void 0===d||null===(re=d.profile)||void 0===re?void 0:re.username)||(null===d||void 0===d||null===(ie=d.profile)||void 0===ie?void 0:ie.externalId)||null;default:return null}};return(0,s.jsxs)("section",{className:"connections-panel",children:[(0,s.jsx)("h3",{children:"Connections"}),(0,s.jsxs)("div",{style:{display:"grid",gap:".75rem"},children:[(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==o&&void 0!==o&&o.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("twitter")||"Twitter connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:y,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect Twitter",className:"check-quality",onClick:()=>k("twitter"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:y,children:"Connect Twitter"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to post tweets and schedule posts."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==l&&void 0!==l&&l.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("tiktok")||"TikTok connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:_,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect TikTok",className:"check-quality",onClick:()=>k("tiktok"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:_,children:"Connect TikTok"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to link your TikTok account for future posting and analytics."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==c&&void 0!==c&&c.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("facebook")||"Instagram connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:T,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect Facebook",className:"check-quality",onClick:()=>k("facebook"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:T,children:"Connect Instagram"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to manage Instagram via Facebook."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==d&&void 0!==d&&d.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("snapchat")||"Snapchat connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:w,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect Snapchat",className:"check-quality",onClick:()=>k("snapchat"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:w,children:"Connect Snapchat"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to post Snaps (if enabled)."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==c&&void 0!==c&&c.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("facebook")||"Facebook connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:T,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect Facebook",className:"check-quality",onClick:()=>k("facebook"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:T,children:"Connect Facebook"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to manage Pages and Instagram."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==a&&void 0!==a&&a.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("youtube")||"YouTube connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:v,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect YouTube",className:"check-quality",onClick:()=>k("youtube"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:v,children:"Connect YouTube"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to upload videos directly."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==r&&void 0!==r&&r.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("spotify")||"Spotify connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:p,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect Spotify",className:"check-quality",onClick:()=>k("spotify"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:p,children:"Connect Spotify"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to enable playlist sharing and analytics."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==i&&void 0!==i&&i.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("reddit")||"Reddit connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:g,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect Reddit",className:"check-quality",onClick:()=>k("reddit"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:g,children:"Connect Reddit"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to cross-post to your subreddit or profile."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==n&&void 0!==n&&n.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("discord")||"Discord connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:m,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect Discord",className:"check-quality",onClick:()=>k("discord"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:m,children:"Connect Discord"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to post to channels or get analytics."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==u&&void 0!==u&&u.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("linkedin")||"LinkedIn connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:b,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect LinkedIn",className:"check-quality",onClick:()=>k("linkedin"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:b,children:"Connect LinkedIn"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to share posts and company pages."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==h&&void 0!==h&&h.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("telegram")||"Telegram connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:x,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect Telegram",className:"check-quality",onClick:()=>k("telegram"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:x,children:"Connect Telegram"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to post to channels or groups."})]})}),(0,s.jsx)("div",{style:{display:"flex",gap:".75rem",alignItems:"center"},children:null!==f&&void 0!==f&&f.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{color:"#cbd5e1"},children:E("pinterest")||"Pinterest connected"}),(0,s.jsx)("button",{className:"check-quality",onClick:S,children:"Reconnect"}),k&&(0,s.jsx)("button",{"aria-label":"Disconnect Pinterest",className:"check-quality",onClick:()=>k("pinterest"),children:"Disconnect"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"check-quality",onClick:S,children:"Connect Pinterest"}),(0,s.jsx)("span",{style:{color:"#9aa4b2"},children:"Connect to pin content and manage boards."})]})})]}),(0,s.jsxs)("div",{style:{marginTop:".75rem"},children:[(0,s.jsx)("h4",{children:"Aggregated Platform Summary"}),(0,s.jsx)("pre",{style:{background:"rgba(255,255,255,0.05)",padding:".75rem",borderRadius:8,maxHeight:300,overflow:"auto"},children:JSON.stringify(t,null,2)})]})]})};var O=n(982),L=n(667);const U=e=>{let{user:t}=e;const[n,a]=(0,i.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(""),[h,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)([]),[g,v]=(0,i.useState)(!1),[y,w]=(0,i.useState)({analyticsEnabled:!0,emailNotifications:!0,dataSharing:!1}),[b,x]=(0,i.useState)(!1),[S,_]=(0,i.useState)(!1),[T,k]=(0,i.useState)(""),[E,C]=(0,i.useState)(""),[A,I]=(0,i.useState)(""),[N,j]=(0,i.useState)(""),[R,P]=(0,i.useState)(""),[D,U]=(0,i.useState)([]),[M,F]=(0,i.useState)(!1),V={device:navigator.userAgent.includes("Mobile")?"Mobile Device":"Desktop Computer",browser:function(){const e=navigator.userAgent;return e.includes("Firefox")?"Firefox":e.includes("Chrome")?"Chrome":e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Edge")?"Edge":"Unknown Browser"}(),location:"Current Location",lastActive:"Just now"};(0,i.useEffect)(()=>{const e=localStorage.getItem("privacySettings");e&&w(JSON.parse(e));const t=o.j2.currentUser;if(t){const e=(0,O.VO)(t).enrolledFactors;x(e.length>0)}z()},[]);const z=async()=>{if(t&&t.uid){F(!0);try{const e=o.j2.currentUser;if(!e)return U([]),void F(!1);const t=await e.getIdToken(),n=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://autopromote.onrender.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyASTUuMkz821PoHRopZ8yy1dW5COrAQPZY",REACT_APP_FIREBASE_APP_ID:"1:317746682241:web:f363e099d55ffd1af1b080",REACT_APP_FIREBASE_AUTH_DOMAIN:"autopromote-464de.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-8QDQXF0FPQ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"317746682241",REACT_APP_FIREBASE_PROJECT_ID:"autopromote-464de",REACT_APP_FIREBASE_STORAGE_BUCKET:"autopromote-cc6d3.firebasestorage.app"}.REACT_APP_API_BASE_URL||"https://api.autopromote.org","/api/users/connections"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json(),t=Object.entries(e.connections||{}).map(e=>{let[t,n]=e;return{id:t,provider:n.provider||t,connectedAt:n.obtainedAt?new Date(n.obtainedAt):new Date,scope:n.scope||"Unknown",status:n.mode||"active"}});U(t)}}catch(e){console.error("Error loading connected platforms:",e),U([])}finally{F(!1)}}},B=e=>{const t=(0,r.A)((0,r.A)({},y),{},{[e]:!y[e]});w(t),localStorage.setItem("privacySettings",JSON.stringify(t))};return(0,s.jsxs)("section",{className:"security-panel",children:[(0,s.jsx)("h2",{children:"Security & Privacy"}),(0,s.jsxs)("div",{className:"security-card",children:[(0,s.jsx)("h3",{children:"\ud83d\udd12 Change Password"}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c(""),d(""),n.newPassword===n.confirmPassword)if(n.newPassword.length<8)c("Password must be at least 8 characters");else if(/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(n.newPassword)){f(!0);try{const e=o.j2.currentUser;if(!e||!e.email)throw new Error("No authenticated user");const t=O.IX.credential(e.email,n.currentPassword);await(0,O.kZ)(e,t),await(0,O.f3)(e,n.newPassword),d("Password changed successfully!"),a({currentPassword:"",newPassword:"",confirmPassword:""})}catch(t){console.error("Password change error:",t),"auth/wrong-password"===t.code?c("Current password is incorrect"):"auth/requires-recent-login"===t.code?c("Please log out and log in again before changing password"):c(t.message||"Failed to change password")}finally{f(!1)}}else c("Password must contain uppercase, lowercase, and number");else c("New passwords do not match")},className:"password-form",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Current Password"}),(0,s.jsx)("input",{type:"password",value:n.currentPassword,onChange:e=>a((0,r.A)((0,r.A)({},n),{},{currentPassword:e.target.value})),required:!0,placeholder:"Enter current password"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"New Password"}),(0,s.jsx)("input",{type:"password",value:n.newPassword,onChange:e=>a((0,r.A)((0,r.A)({},n),{},{newPassword:e.target.value})),required:!0,placeholder:"Enter new password"}),(0,s.jsx)("small",{className:"password-hint",children:"Must be 8+ characters with uppercase, lowercase, and number"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Confirm New Password"}),(0,s.jsx)("input",{type:"password",value:n.confirmPassword,onChange:e=>a((0,r.A)((0,r.A)({},n),{},{confirmPassword:e.target.value})),required:!0,placeholder:"Confirm new password"})]}),l&&(0,s.jsx)("div",{className:"error-message",children:l}),u&&(0,s.jsx)("div",{className:"success-message",children:u}),(0,s.jsx)("button",{type:"submit",disabled:h,className:"btn-primary",children:h?"Changing...":"Change Password"})]})]}),(0,s.jsxs)("div",{className:"security-card",children:[(0,s.jsx)("h3",{children:"\ud83d\udcf1 Active Session"}),(0,s.jsxs)("div",{className:"session-info",children:[(0,s.jsxs)("div",{className:"session-row",children:[(0,s.jsx)("span",{className:"session-label",children:"Device:"}),(0,s.jsx)("span",{className:"session-value",children:V.device})]}),(0,s.jsxs)("div",{className:"session-row",children:[(0,s.jsx)("span",{className:"session-label",children:"Browser:"}),(0,s.jsx)("span",{className:"session-value",children:V.browser})]}),(0,s.jsxs)("div",{className:"session-row",children:[(0,s.jsx)("span",{className:"session-label",children:"Last Active:"}),(0,s.jsx)("span",{className:"session-value",children:V.lastActive})]})]}),(0,s.jsx)("button",{className:"btn-danger",onClick:async()=>{window.confirm("This will log you out from all devices. Continue?")&&(alert("This feature requires backend support. Currently logs out current session only."),window.location.href="/")},children:"Logout All Devices"})]}),(0,s.jsxs)("div",{className:"security-card",children:[(0,s.jsx)("h3",{children:"\ud83d\udee1\ufe0f Privacy Settings"}),(0,s.jsxs)("div",{className:"privacy-options",children:[(0,s.jsxs)("div",{className:"privacy-option",children:[(0,s.jsxs)("div",{className:"privacy-option-info",children:[(0,s.jsx)("strong",{children:"Analytics & Performance"}),(0,s.jsx)("p",{children:"Help us improve by sharing anonymous usage data"})]}),(0,s.jsxs)("label",{className:"toggle-switch",children:[(0,s.jsx)("input",{type:"checkbox",checked:y.analyticsEnabled,onChange:()=>B("analyticsEnabled")}),(0,s.jsx)("span",{className:"toggle-slider"})]})]}),(0,s.jsxs)("div",{className:"privacy-option",children:[(0,s.jsxs)("div",{className:"privacy-option-info",children:[(0,s.jsx)("strong",{children:"Email Notifications"}),(0,s.jsx)("p",{children:"Receive updates about your content and earnings"})]}),(0,s.jsxs)("label",{className:"toggle-switch",children:[(0,s.jsx)("input",{type:"checkbox",checked:y.emailNotifications,onChange:()=>B("emailNotifications")}),(0,s.jsx)("span",{className:"toggle-slider"})]})]}),(0,s.jsxs)("div",{className:"privacy-option",children:[(0,s.jsxs)("div",{className:"privacy-option-info",children:[(0,s.jsx)("strong",{children:"Data Sharing"}),(0,s.jsx)("p",{children:"Allow third-party integrations to access your data"})]}),(0,s.jsxs)("label",{className:"toggle-switch",children:[(0,s.jsx)("input",{type:"checkbox",checked:y.dataSharing,onChange:()=>B("dataSharing")}),(0,s.jsx)("span",{className:"toggle-slider"})]})]})]})]}),(0,s.jsxs)("div",{className:"security-card",children:[(0,s.jsx)("h3",{children:"\ud83d\udd10 Two-Factor Authentication"}),(0,s.jsx)("p",{children:"Add an extra layer of security to your account with SMS verification"}),b?(0,s.jsxs)("div",{className:"twofa-enabled",children:[(0,s.jsx)("div",{className:"success-badge",children:"\u2713 2FA Enabled"}),(0,s.jsx)("p",{children:"Your account is protected with two-factor authentication"}),(0,s.jsx)("button",{className:"btn-danger",onClick:async()=>{if(window.confirm("Are you sure you want to disable two-factor authentication? This will make your account less secure."))try{const e=o.j2.currentUser;if(!e)throw new Error("No authenticated user");const t=(0,O.VO)(e).enrolledFactors;t.length>0&&(await(0,O.VO)(e).unenroll(t[0]),x(!1),P("Two-factor authentication disabled"))}catch(e){console.error("2FA disable error:",e),j(e.message||"Failed to disable 2FA")}},children:"Disable 2FA"})]}):(0,s.jsx)("div",{className:"twofa-setup",children:A?(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Verification Code"}),(0,s.jsx)("input",{type:"text",value:E,onChange:e=>C(e.target.value),placeholder:"123456",maxLength:"6",className:"code-input"}),(0,s.jsx)("small",{className:"input-hint",children:"Enter the 6-digit code sent to your phone"}),(0,s.jsx)("button",{className:"btn-primary",onClick:async()=>{if(j(""),P(""),E&&6===E.length)try{const e=o.j2.currentUser;if(!e)throw new Error("No authenticated user");const t=O.Oe.credential(A,E),n=O.eQ.assertion(t);await(0,O.VO)(e).enroll(n,"Primary Phone"),x(!0),P("Two-factor authentication enabled successfully!"),k(""),C(""),I("")}catch(e){console.error("2FA verification error:",e),j(e.message||"Failed to verify code")}else j("Please enter a 6-digit verification code")},style:{marginTop:"12px"},children:"Verify & Enable 2FA"})]}):(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Phone Number (with country code)"}),(0,s.jsx)("input",{type:"tel",value:T,onChange:e=>k(e.target.value),placeholder:"+1234567890",className:"phone-input"}),(0,s.jsx)("small",{className:"input-hint",children:"Format: +[country code][number] (e.g., +12025551234)"}),(0,s.jsx)("div",{id:"recaptcha-container"}),(0,s.jsx)("button",{className:"btn-primary",onClick:async()=>{if(j(""),P(""),T&&T.match(/^\+[1-9]\d{1,14}$/)){_(!0);try{const e=o.j2.currentUser;if(!e)throw new Error("No authenticated user");window.recaptchaVerifier||(window.recaptchaVerifier=new O.kT(o.j2,"recaptcha-container",{size:"invisible"}));const t=await(0,O.VO)(e).getSession(),n={phoneNumber:T,session:t},r=new O.Oe(o.j2),i=await r.verifyPhoneNumber(n,window.recaptchaVerifier);I(i),P("Verification code sent to your phone!")}catch(e){console.error("2FA enrollment error:",e),j(e.message||"Failed to send verification code")}finally{_(!1)}}else j("Please enter a valid phone number with country code (e.g., +1234567890)")},disabled:S,style:{marginTop:"12px"},children:S?"Sending Code...":"Send Verification Code"})]})}),N&&(0,s.jsx)("div",{className:"error-message",children:N}),R&&(0,s.jsx)("div",{className:"success-message",children:R})]}),(0,s.jsxs)("div",{className:"security-card",children:[(0,s.jsx)("h3",{children:"\ud83d\udd17 Connected Platforms"}),(0,s.jsx)("p",{children:"Manage platforms connected to your AutoPromote account"}),M?(0,s.jsx)("div",{className:"loading-platforms",children:"Loading platforms..."}):D.length>0?(0,s.jsx)("div",{className:"connected-platforms-list",children:D.map(e=>(0,s.jsxs)("div",{className:"platform-item",children:[(0,s.jsxs)("div",{className:"platform-info",children:[(0,s.jsxs)("div",{className:"platform-icon",children:["youtube"===e.provider&&"\u25b6\ufe0f","tiktok"===e.provider&&"\ud83c\udfb5","instagram"===e.provider&&"\ud83d\udcf7","facebook"===e.provider&&"\ud83d\udc64",!["youtube","tiktok","instagram","facebook"].includes(e.provider)&&"\ud83d\udd17"]}),(0,s.jsxs)("div",{className:"platform-details",children:[(0,s.jsx)("strong",{children:e.provider.charAt(0).toUpperCase()+e.provider.slice(1)}),(0,s.jsxs)("small",{children:["Connected ",e.connectedAt.toLocaleDateString()]}),(0,s.jsx)("span",{className:"platform-scope",children:e.scope})]})]}),(0,s.jsx)("button",{className:"btn-disconnect",onClick:()=>(async e=>{if(window.confirm("Disconnect ".concat(e,"? You'll need to reconnect to post content to this platform.")))try{await(0,L.kd)((0,L.H9)(o.db,"users",t.uid,"connections",e)),U(t=>t.filter(t=>t.id!==e)),P("".concat(e," disconnected successfully"))}catch(n){console.error("Disconnect platform error:",n),j("Failed to disconnect ".concat(e))}})(e.id),children:"Disconnect"})]},e.id))}):(0,s.jsxs)("div",{className:"no-platforms",children:[(0,s.jsx)("p",{children:"No platforms connected yet"}),(0,s.jsx)("small",{children:"Go to Connections tab to link your social media accounts"})]})]}),(0,s.jsxs)("div",{className:"security-card",children:[(0,s.jsx)("h3",{children:"\ud83c\udfaf Account Security Score"}),(0,s.jsxs)("div",{className:"security-score",children:[(0,s.jsx)("div",{className:"score-circle",children:(0,s.jsxs)("span",{className:"score-value",children:[(()=>{let e=50;return b&&(e+=25),D.length>0&&(e+=15),null!==t&&void 0!==t&&t.emailVerified&&(e+=10),e})(),"%"]})}),(0,s.jsxs)("div",{className:"score-recommendations",children:[(0,s.jsx)("h4",{children:"Recommendations:"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:"completed",children:"\u2713 Password strength: Strong"}),(0,s.jsx)("li",{className:"completed",children:"\u2713 Email verified"}),(0,s.jsxs)("li",{className:b?"completed":"pending",children:[b?"\u2713":"\u26a0"," Two-factor authentication ",b?"enabled":"not enabled"]}),(0,s.jsxs)("li",{className:D.length>0?"completed":"pending",children:[D.length>0?"\u2713":"\u26a0"," ",D.length," platform(s) connected"]})]})]})]})]})]})};const M=function(){var e,t,n,a,l,c,u,d,h;const[f,p]=(0,i.useState)([]),[m,g]=(0,i.useState)({title:"",content:"",category:"general"}),[v,y]=(0,i.useState)(!1),[w,b]=(0,i.useState)(null),[x,S]=(0,i.useState)(""),[_,T]=(0,i.useState)("all"),k=[{value:"general",label:"\ud83d\udcac General",color:"#6366f1"},{value:"question",label:"\u2753 Question",color:"#f59e0b"},{value:"tip",label:"\ud83d\udca1 Tips & Tricks",color:"#10b981"},{value:"issue",label:"\u26a0\ufe0f Issue/Bug",color:"#ef4444"},{value:"feature",label:"\u2728 Feature Request",color:"#8b5cf6"}];(0,i.useEffect)(()=>{const e=(0,L.P)((0,L.rJ)(o.db,"community_posts"),(0,L.My)("createdAt","desc"),(0,L.AB)(50)),t=(0,L.aQ)(e,e=>{const t=e.docs.map(e=>(0,r.A)({id:e.id},e.data()));p(t)});return()=>t()},[]);const E=f.filter(e=>"all"===_||("questions"===_?"question"===e.category:"tips"===_?"tip"===e.category:"issues"!==_||"issue"===e.category)),C=e=>{const t=k.find(t=>t.value===e);return(null===t||void 0===t?void 0:t.color)||"#6366f1"},A=e=>{const t=k.find(t=>t.value===e);return(null===t||void 0===t?void 0:t.label)||"\ud83d\udcac General"},I=e=>{if(!e)return"Just now";const t=e.toDate?e.toDate():new Date(e),n=new Date-t,r=Math.floor(n/6e4),i=Math.floor(n/36e5),s=Math.floor(n/864e5);return r<1?"Just now":r<60?"".concat(r,"m ago"):i<24?"".concat(i,"h ago"):s<7?"".concat(s,"d ago"):t.toLocaleDateString()};return(0,s.jsxs)("div",{className:"community-panel",children:[(0,s.jsxs)("div",{className:"community-header",children:[(0,s.jsx)("h2",{children:"\ud83c\udf1f Community Help & Support"}),(0,s.jsx)("p",{children:"Connect with other users, ask questions, and share your expertise"})]}),w?(0,s.jsxs)("div",{className:"post-detail",children:[(0,s.jsx)("button",{className:"back-btn",onClick:()=>b(null),children:"\u2190 Back to Posts"}),(0,s.jsxs)("div",{className:"post-detail-card",children:[(0,s.jsxs)("div",{className:"post-detail-header",children:[(0,s.jsx)("span",{className:"post-category",style:{backgroundColor:C(w.category)},children:A(w.category)}),(0,s.jsxs)("div",{className:"post-author-info",children:[w.authorPhoto&&(0,s.jsx)("img",{src:w.authorPhoto,alt:"",className:"author-avatar"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"author-name-large",children:w.authorName}),(0,s.jsx)("div",{className:"post-date",children:I(w.createdAt)})]})]})]}),(0,s.jsx)("h2",{className:"post-detail-title",children:w.title}),(0,s.jsx)("p",{className:"post-detail-content",children:w.content}),(0,s.jsxs)("div",{className:"post-actions",children:[(0,s.jsxs)("button",{onClick:()=>(async e=>{const t=o.j2.currentUser,n=(0,L.H9)(o.db,"community_posts",e),r=f.find(t=>t.id===e);try{var i;null!==(i=r.likes)&&void 0!==i&&i.includes(t.uid)?await(0,L.mZ)(n,{likes:(0,L.C3)(t.uid)}):await(0,L.mZ)(n,{likes:(0,L.hq)(t.uid)})}catch(s){console.error("Error liking post:",s)}})(w.id),className:null!==(e=w.likes)&&void 0!==e&&e.includes(null===(t=o.j2.currentUser)||void 0===t?void 0:t.uid)?"active":"",children:["\ud83d\udc4d Like (",(null===(n=w.likes)||void 0===n?void 0:n.length)||0,")"]}),(0,s.jsxs)("button",{onClick:()=>(async e=>{const t=o.j2.currentUser,n=(0,L.H9)(o.db,"community_posts",e),r=f.find(t=>t.id===e);try{var i;null!==(i=r.helpful)&&void 0!==i&&i.includes(t.uid)?await(0,L.mZ)(n,{helpful:(0,L.C3)(t.uid)}):await(0,L.mZ)(n,{helpful:(0,L.hq)(t.uid)})}catch(s){console.error("Error marking helpful:",s)}})(w.id),className:null!==(a=w.helpful)&&void 0!==a&&a.includes(null===(l=o.j2.currentUser)||void 0===l?void 0:l.uid)?"active":"",children:["\u2705 Helpful (",(null===(c=w.helpful)||void 0===c?void 0:c.length)||0,")"]}),(0,s.jsxs)("span",{className:"view-count",children:["\ud83d\udc40 ",w.views||0," views"]})]})]}),(0,s.jsxs)("div",{className:"replies-section",children:[(0,s.jsxs)("h3",{children:["\ud83d\udcac Replies (",(null===(u=w.replies)||void 0===u?void 0:u.length)||0,")"]}),(0,s.jsxs)("div",{className:"reply-form",children:[(0,s.jsx)("textarea",{value:x,onChange:e=>S(e.target.value),placeholder:"Share your thoughts or solution...",rows:3,maxLength:1e3}),(0,s.jsx)("button",{onClick:()=>(async e=>{if(x.trim()){y(!0);try{const t=o.j2.currentUser,n=(0,L.H9)(o.db,"community_posts",e);await(0,L.mZ)(n,{replies:(0,L.hq)({id:Date.now().toString(),authorId:t.uid,authorName:t.displayName||t.email.split("@")[0],authorPhoto:t.photoURL||null,content:x,createdAt:(new Date).toISOString(),likes:[]})}),S(""),alert("Reply added!")}catch(t){console.error("Error adding reply:",t),alert("Failed to add reply")}finally{y(!1)}}})(w.id),disabled:v||!x.trim(),className:"reply-btn",children:v?"Posting...":"\ud83d\udcac Post Reply"})]}),(0,s.jsx)("div",{className:"replies-list",children:0===(null===(d=w.replies)||void 0===d?void 0:d.length)?(0,s.jsx)("div",{className:"empty-state",children:(0,s.jsx)("p",{children:"No replies yet. Be the first to respond! \ud83d\udcad"})}):null===(h=w.replies)||void 0===h?void 0:h.map(e=>{var t;return(0,s.jsxs)("div",{className:"reply-card",children:[(0,s.jsxs)("div",{className:"reply-header",children:[e.authorPhoto&&(0,s.jsx)("img",{src:e.authorPhoto,alt:"",className:"author-avatar-small"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"reply-author",children:e.authorName}),(0,s.jsx)("div",{className:"reply-date",children:I(e.createdAt)})]})]}),(0,s.jsx)("p",{className:"reply-content",children:e.content}),(0,s.jsxs)("div",{className:"reply-likes",children:["\ud83d\udc4d ",(null===(t=e.likes)||void 0===t?void 0:t.length)||0]})]},e.id)})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"community-filters",children:[(0,s.jsx)("button",{className:"all"===_?"active":"",onClick:()=>T("all"),children:"All Posts"}),(0,s.jsx)("button",{className:"questions"===_?"active":"",onClick:()=>T("questions"),children:"\u2753 Questions"}),(0,s.jsx)("button",{className:"tips"===_?"active":"",onClick:()=>T("tips"),children:"\ud83d\udca1 Tips"}),(0,s.jsx)("button",{className:"issues"===_?"active":"",onClick:()=>T("issues"),children:"\u26a0\ufe0f Issues"})]}),(0,s.jsxs)("div",{className:"create-post-card",children:[(0,s.jsx)("h3",{children:"Create New Post"}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m.title.trim()&&m.content.trim()){y(!0);try{const e=o.j2.currentUser;await(0,L.gS)((0,L.rJ)(o.db,"community_posts"),{title:m.title,content:m.content,category:m.category,authorId:e.uid,authorName:e.displayName||e.email.split("@")[0],authorPhoto:e.photoURL||null,createdAt:(0,L.O5)(),replies:[],likes:[],helpful:[],views:0}),g({title:"",content:"",category:"general"}),alert("Post created successfully!")}catch(t){console.error("Error creating post:",t),alert("Failed to create post")}finally{y(!1)}}else alert("Please fill in both title and content")},children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Category"}),(0,s.jsx)("select",{value:m.category,onChange:e=>g((0,r.A)((0,r.A)({},m),{},{category:e.target.value})),children:k.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Title"}),(0,s.jsx)("input",{type:"text",value:m.title,onChange:e=>g((0,r.A)((0,r.A)({},m),{},{title:e.target.value})),placeholder:"What's your question or topic?",maxLength:150})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Content"}),(0,s.jsx)("textarea",{value:m.content,onChange:e=>g((0,r.A)((0,r.A)({},m),{},{content:e.target.value})),placeholder:"Describe your question, tip, or issue in detail...",rows:4,maxLength:2e3})]}),(0,s.jsx)("button",{type:"submit",disabled:v,className:"post-btn",children:v?"Posting...":"\ud83d\udce4 Post to Community"})]})]}),(0,s.jsxs)("div",{className:"posts-list",children:[(0,s.jsxs)("h3",{children:["Recent Posts (",E.length,")"]}),0===E.length?(0,s.jsx)("div",{className:"empty-state",children:(0,s.jsx)("p",{children:"No posts yet. Be the first to start a conversation! \ud83d\ude80"})}):E.map(e=>{var t,n,r;return(0,s.jsxs)("div",{className:"post-card",onClick:()=>(async e=>{b(e);const t=(0,L.H9)(o.db,"community_posts",e.id);try{await(0,L.mZ)(t,{views:(0,L.GV)(1)})}catch(n){console.error("Error updating views:",n)}})(e),children:[(0,s.jsxs)("div",{className:"post-header",children:[(0,s.jsx)("span",{className:"post-category",style:{backgroundColor:C(e.category)},children:A(e.category)}),(0,s.jsxs)("div",{className:"post-meta",children:[e.authorPhoto&&(0,s.jsx)("img",{src:e.authorPhoto,alt:"",className:"author-avatar-small"}),(0,s.jsx)("span",{className:"author-name",children:e.authorName}),(0,s.jsx)("span",{className:"post-date",children:I(e.createdAt)})]})]}),(0,s.jsx)("h4",{className:"post-title",children:e.title}),(0,s.jsxs)("p",{className:"post-preview",children:[e.content.substring(0,150),e.content.length>150?"...":""]}),(0,s.jsxs)("div",{className:"post-stats",children:[(0,s.jsxs)("span",{children:["\ud83d\udcac ",(null===(t=e.replies)||void 0===t?void 0:t.length)||0," replies"]}),(0,s.jsxs)("span",{children:["\ud83d\udc4d ",(null===(n=e.likes)||void 0===n?void 0:n.length)||0," likes"]}),(0,s.jsxs)("span",{children:["\u2705 ",(null===(r=e.helpful)||void 0===r?void 0:r.length)||0," helpful"]}),(0,s.jsxs)("span",{children:["\ud83d\udc40 ",e.views||0," views"]})]})]},e.id)})]})]})]})};var F=n(339);const V=e=>{var t,n;let{content:a=[]}=e;const[c,u]=(0,i.useState)([]),[d,h]=(0,i.useState)(null),[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(null),[v,y]=(0,i.useState)([]),[w,b]=(0,i.useState)([]),[x,S]=(0,i.useState)(null),[_,T]=(0,i.useState)({aspectRatio:"9:16",addCaptions:!0,addBranding:!1}),k=a.filter(e=>"video"===e.type);(0,i.useEffect)(()=>{E()},[]);const E=async()=>{try{var e;const t=await(null===(e=o.j2.currentUser)||void 0===e?void 0:e.getIdToken());if(!t)return;const n=await fetch("".concat(l.JR,"/api/clips/user"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();b(e.clips||[])}else 404===n.status&&b([])}catch(t){b([])}},C=async e=>{try{var t;const n=await(null===(t=o.j2.currentUser)||void 0===t?void 0:t.getIdToken()),r=await fetch("".concat(l.JR,"/api/clips/analysis/").concat(e),{headers:{Authorization:"Bearer ".concat(n)}});if(r.ok){const e=await r.json();g(e.analysis)}}catch(n){console.error("Failed to load analysis:",n)}},A=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))},I=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))};return(0,s.jsxs)("div",{className:"clip-studio-panel",children:[(0,s.jsxs)("div",{className:"clip-studio-header",children:[(0,s.jsx)("h2",{children:"\ud83c\udfac AI Clip Studio"}),(0,s.jsx)("p",{children:"Generate viral short clips from your long-form videos"})]}),m?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"analysis-results",children:[(0,s.jsxs)("div",{className:"results-header",children:[(0,s.jsx)("button",{className:"btn-back",onClick:()=>g(null),children:"\u2190 Back to Videos"}),(0,s.jsxs)("div",{className:"results-summary",children:[(0,s.jsx)("h3",{children:"Analysis Complete"}),(0,s.jsxs)("p",{children:["Found ",(null===(t=m.topClips)||void 0===t?void 0:t.length)||0," potential viral clips"]}),(0,s.jsxs)("div",{className:"analysis-stats",children:[(0,s.jsxs)("span",{children:["Duration: ",A(m.duration)]}),(0,s.jsxs)("span",{children:["Scenes: ",m.scenesDetected]}),m.transcriptLength>0&&(0,s.jsxs)("span",{children:["Transcript: ",m.transcriptLength," segments"]})]})]})]}),(0,s.jsxs)("div",{className:"export-options",children:[(0,s.jsx)("h4",{children:"Export Settings"}),(0,s.jsxs)("div",{className:"options-grid",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:_.addCaptions,onChange:e=>T((0,r.A)((0,r.A)({},_),{},{addCaptions:e.target.checked}))}),"Add Captions"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:_.addBranding,onChange:e=>T((0,r.A)((0,r.A)({},_),{},{addBranding:e.target.checked}))}),"Add Branding"]}),(0,s.jsxs)("label",{children:["Aspect Ratio:",(0,s.jsxs)("select",{value:_.aspectRatio,onChange:e=>T((0,r.A)((0,r.A)({},_),{},{aspectRatio:e.target.value})),children:[(0,s.jsx)("option",{value:"9:16",children:"9:16 (Vertical - TikTok/Reels)"}),(0,s.jsx)("option",{value:"16:9",children:"16:9 (Horizontal - YouTube)"}),(0,s.jsx)("option",{value:"1:1",children:"1:1 (Square - Instagram)"})]})]})]})]}),(0,s.jsxs)("div",{className:"clip-suggestions",children:[(0,s.jsx)("h4",{children:"Suggested Clips (sorted by viral potential)"}),(0,s.jsx)("div",{className:"clips-list",children:null===(n=m.topClips)||void 0===n?void 0:n.map((e,t)=>(0,s.jsxs)("div",{className:"clip-suggestion",children:[(0,s.jsxs)("div",{className:"clip-rank",children:["#",t+1]}),(0,s.jsxs)("div",{className:"clip-timeline",children:[(0,s.jsx)("div",{className:"timeline-bar",children:(0,s.jsx)("div",{className:"timeline-segment",style:{left:"".concat(e.start/m.duration*100,"%"),width:"".concat((e.end-e.start)/m.duration*100,"%")}})}),(0,s.jsxs)("div",{className:"timeline-labels",children:[(0,s.jsx)("span",{children:I(e.start)}),(0,s.jsx)("span",{children:I(e.end)})]})]}),(0,s.jsxs)("div",{className:"clip-details",children:[(0,s.jsxs)("div",{className:"clip-score-large",children:[(0,s.jsx)("span",{className:"score-number",children:e.score}),(0,s.jsx)("span",{className:"score-label",children:"Viral Score"})]}),(0,s.jsxs)("div",{className:"clip-content",children:[(0,s.jsxs)("p",{className:"clip-reason",children:[(0,s.jsx)("strong",{children:"Why this clip:"})," ",e.reason]}),e.text&&(0,s.jsxs)("p",{className:"clip-transcript",children:['"',e.text.substring(0,150),'..."']}),(0,s.jsxs)("div",{className:"clip-meta-info",children:[(0,s.jsxs)("span",{children:["Duration: ",A(e.end-e.start)]}),e.platforms&&(0,s.jsxs)("span",{children:["Best for: ",e.platforms.join(", ")]})]})]})]}),(0,s.jsx)("div",{className:"clip-actions",children:(0,s.jsx)("button",{className:"btn-primary",onClick:()=>(async e=>{const t=F.Ay.loading("Generating clip...");try{var n;const r=await(null===(n=o.j2.currentUser)||void 0===n?void 0:n.getIdToken()),i=await fetch("".concat(l.JR,"/api/clips/generate"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({analysisId:m.id,clipId:e.id,options:_})});if(!i.ok){const e=await i.json();throw new Error(e.error||"Generation failed")}await i.json(),F.Ay.success("Clip generated successfully!",{id:t}),await E()}catch(r){console.error("Generation error:",r),F.Ay.error(r.message,{id:t})}})(e),children:"Generate Clip"})})]},e.id||t))})]})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"video-selection-section",children:[(0,s.jsx)("h3",{children:"Select a Video to Analyze"}),0===k.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("p",{children:"\ud83d\udcf9 No videos uploaded yet"}),(0,s.jsx)("p",{className:"empty-hint",children:"Upload a long-form video to get started with AI clip generation"})]}):(0,s.jsx)("div",{className:"video-grid",children:k.map(e=>{var t;return(0,s.jsxs)("div",{className:"video-card",children:[e.url&&(0,s.jsx)("video",{src:e.url,className:"video-thumbnail",muted:!0,onClick:e=>e.target.paused?e.target.play():e.target.pause()}),(0,s.jsxs)("div",{className:"video-card-info",children:[(0,s.jsx)("h4",{children:e.title||"Untitled Video"}),e.duration&&(0,s.jsx)("span",{className:"duration-badge",children:A(e.duration)}),(0,s.jsx)("p",{className:"video-description",children:e.description?e.description.substring(0,100):"No description"}),null!==(t=e.clipAnalysis)&&void 0!==t&&t.analyzed?(0,s.jsxs)("div",{className:"analysis-status",children:[(0,s.jsx)("span",{className:"analyzed-badge",children:"\u2713 Analyzed"}),(0,s.jsxs)("button",{className:"btn-secondary btn-sm",onClick:()=>C(e.clipAnalysis.analysisId),children:["View ",e.clipAnalysis.clipsGenerated," Clips"]})]}):(0,s.jsx)("button",{className:"btn-primary",onClick:()=>(async e=>{if(!e.url)return void F.Ay.error("Video URL not available");p(!0),h(e);const t=F.Ay.loading("Analyzing video... This may take a few minutes");try{var n;const r=await(null===(n=o.j2.currentUser)||void 0===n?void 0:n.getIdToken()),i=await fetch("".concat(l.JR,"/api/clips/analyze"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({contentId:e.id,videoUrl:e.url})});if(!i.ok){const e=await i.json();throw new Error(e.error||"Analysis failed")}const s=await i.json();F.Ay.success("Found ".concat(s.clipsGenerated," potential clips!"),{id:t}),await C(s.analysisId)}catch(r){console.error("Analysis error:",r),F.Ay.error(r.message,{id:t})}finally{p(!1)}})(e),disabled:f,children:f?"Analyzing...":"Generate Clips"})]})]},e.id)})})]}),w.length>0&&(0,s.jsxs)("div",{className:"generated-clips-section",children:[(0,s.jsxs)("h3",{children:["\ud83d\udcc2 Your Generated Clips (",w.length,")"]}),(0,s.jsx)("div",{className:"clips-grid",children:w.map(e=>{var t;return(0,s.jsxs)("div",{className:"generated-clip-card",children:[(0,s.jsx)("video",{src:e.url,className:"clip-preview",controls:!0}),(0,s.jsxs)("div",{className:"clip-info",children:[(0,s.jsx)("div",{className:"clip-score",children:(0,s.jsxs)("span",{className:"score-badge",children:["\u26a1 ",e.viralScore]})}),(0,s.jsx)("p",{className:"clip-caption",children:e.caption}),(0,s.jsxs)("p",{className:"clip-meta",children:[A(e.duration)," \u2022 ",e.reason]}),(0,s.jsx)("div",{className:"clip-platforms",children:null===(t=e.platforms)||void 0===t?void 0:t.map(e=>(0,s.jsx)("span",{className:"platform-tag",children:e},e))}),(0,s.jsx)("button",{className:"btn-primary btn-sm",onClick:()=>(async(e,t)=>{const n=F.Ay.loading("Scheduling export...");try{var r;const i=await(null===(r=o.j2.currentUser)||void 0===r?void 0:r.getIdToken()),s=await fetch("".concat(l.JR,"/api/clips/").concat(e,"/export"),{method:"POST",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify({platforms:t,scheduledTime:new Date(Date.now()+36e5).toISOString()})});if(!s.ok){const e=await s.json();throw new Error(e.error||"Export failed")}F.Ay.success("Clip scheduled for export!",{id:n})}catch(i){console.error("Export error:",i),F.Ay.error(i.message,{id:n})}})(e.id,e.platforms||["tiktok"]),children:"Export to Platforms"})]})]},e.id)})})]})]})]})},z="".concat("","/image.png"),B=e=>{var t,n,c,u;let{user:d,content:h,stats:f,badges:p=[],notifications:m=[],userDefaults:g,onSaveDefaults:v,onLogout:y,onUpload:w,mySchedules:b=[],onSchedulesChanged:x}=e;const[S,_]=(0,i.useState)("profile"),[T,k]=(0,i.useState)(!1),[C,A]=(0,i.useState)(null),[O,L]=(0,i.useState)(Array.isArray(m)?m:[]),[B,q]=(0,i.useState)(null),[H,W]=(0,i.useState)([]),[K,G]=(0,i.useState)({}),[Q,Y]=(0,i.useState)({}),[J,X]=(0,i.useState)([]),[$,Z]=(0,i.useState)(""),[ee,te]=(0,i.useState)(0),[ne,re]=(0,i.useState)(!1),[ie,se]=(0,i.useState)(!1),[ae,oe]=(0,i.useState)("none"),[le,ce]=(0,i.useState)(0),[ue,de]=(0,i.useState)(0),[he,fe]=(0,i.useState)(0),[pe,me]=(0,i.useState)(""),[ge,ve]=(0,i.useState)(""),[ye,we]=(0,i.useState)("video"),[be,xe]=(0,i.useState)("auto"),[Se,_e]=(0,i.useState)(""),[Te,ke]=(0,i.useState)("once"),[Ee,Ce]=(0,i.useState)((null===g||void 0===g?void 0:g.timezone)||"UTC"),[Ae,Ie]=(0,i.useState)(Array.isArray(null===g||void 0===g?void 0:g.defaultPlatforms)?g.defaultPlatforms:[]),[Ne,je]=(0,i.useState)((null===g||void 0===g?void 0:g.defaultFrequency)||"once"),[Re,Pe]=(0,i.useState)({}),[De,Oe]=(0,i.useState)({connected:!1,meta:null}),[Le,Ue]=(0,i.useState)({connected:!1,meta:null}),[Me,Fe]=(0,i.useState)({connected:!1,meta:null}),[Ve,ze]=(0,i.useState)({connected:!1,meta:null}),[Be,qe]=(0,i.useState)({connected:!1,meta:null}),[He,We]=(0,i.useState)({connected:!1,meta:null}),[Ke,Ge]=(0,i.useState)({connected:!1,channel:null}),[Qe,Ye]=(0,i.useState)({connected:!1,identity:null}),[Je,Xe]=(0,i.useState)({connected:!1,profile:null}),[$e,Ze]=(0,i.useState)(null),[et,tt]=(0,i.useState)({connected:!1,meta:null}),[nt,rt]=(0,i.useState)({connected:!1,meta:null}),[it,st]=(0,i.useState)([]),[at,ot]=(0,i.useState)({contentCount:0,requiredForRevenue:0,remaining:0,revenueEligible:!1}),[lt,ct]=(0,i.useState)({platforms:{}}),[ut,dt]=(0,i.useState)(!1),[ht,ft]=(0,i.useState)(""),[pt,mt]=(0,i.useState)(""),gt=((0,i.useRef)(null),(0,i.useMemo)(()=>Array.isArray(h)?h:[],[h])),vt=(0,i.useMemo)(()=>Array.isArray(b)?b:[],[b]);(0,i.useEffect)(()=>{var e,t,n,r;return null===(e=document.documentElement)||void 0===e||null===(t=e.classList)||void 0===t||t.add("dashboard-mode"),null===(n=document.body)||void 0===n||null===(r=n.classList)||void 0===r||r.add("dashboard-mode"),()=>{var e,t,n,r;null===(e=document.documentElement)||void 0===e||null===(t=e.classList)||void 0===t||t.remove("dashboard-mode"),null===(n=document.body)||void 0===n||null===(r=n.classList)||void 0===r||r.remove("dashboard-mode")}},[]);const yt=e=>{_(e),k(!1)},wt=()=>{x&&x()},bt=async e=>{const t=null===o.j2||void 0===o.j2?void 0:o.j2.currentUser;if(t)try{return e(await t.getIdToken(!0))}catch(n){return console.warn("Token refresh failed:",n.message),null}else F.Ay.error("Please sign in first")},xt=async()=>{try{const t=o.j2.currentUser;if(!t)return We({connected:!1});const n=await t.getIdToken(!0),i=await fetch(l.Sn.SPOTIFY_STATUS,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(!i.ok)return We({connected:!1});const s=await i.json();if(We({connected:!!s.connected,meta:s.meta||null}),s.connected)try{const e=await fetch(l.Sn.SPOTIFY_METADATA,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(e.ok){const t=await e.json();Y(e=>(0,r.A)((0,r.A)({},e||{}),{},{spotify:t.meta||{}}))}}catch(e){}}catch(e){We({connected:!1})}},St=async()=>{try{const t=o.j2.currentUser;if(!t)return Ge({connected:!1});const n=await t.getIdToken(!0),i=await fetch(l.Sn.YOUTUBE_STATUS,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(!i.ok)return Ge({connected:!1});const s=await i.json();if(Ge({connected:!!s.connected,channel:s.channel||null}),s.connected)try{const e=await fetch(l.Sn.YOUTUBE_METADATA,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(e.ok){const t=await e.json();Y(e=>(0,r.A)((0,r.A)({},e||{}),{},{youtube:t.meta||{}}))}}catch(e){}}catch(e){Ge({connected:!1})}},_t=async()=>{try{const e=o.j2.currentUser;if(!e)return rt({connected:!1});const t=await e.getIdToken(!0),n=await fetch(l.Sn.FACEBOOK_STATUS,{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!n.ok)return rt({connected:!1});const r=await n.json();rt({connected:!!r.connected,meta:r.meta||null})}catch(e){rt({connected:!1})}},Tt=async()=>{try{const e=o.j2.currentUser;if(!e)return tt({connected:!1});const t=await e.getIdToken(!0),n=await fetch(l.Sn.TIKTOK_STATUS,{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!n.ok)return tt({connected:!1});const r=await n.json();tt({connected:!!r.connected,meta:r.meta||null})}catch(e){tt({connected:!1})}},kt=async()=>{try{const e=o.j2.currentUser;if(!e)return Ye({connected:!1});const t=await e.getIdToken(!0),n=await fetch(l.Sn.TWITTER_STATUS,{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!n.ok)return Ye({connected:!1});const r=await n.json();Ye({connected:!!r.connected,identity:r.identity||null})}catch(e){Ye({connected:!1})}},Et=async()=>{try{const e=o.j2.currentUser;if(!e)return qe({connected:!1});const t=await e.getIdToken(!0),n=await fetch(l.Sn.REDDIT_STATUS,{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!n.ok)return qe({connected:!1});const r=await n.json();qe({connected:!!r.connected,meta:r.meta||null})}catch(e){qe({connected:!1})}},Ct=async()=>{try{const t=o.j2.currentUser;if(!t)return Oe({connected:!1});const n=await t.getIdToken(!0),i=await fetch(l.Sn.DISCORD_STATUS,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(!i.ok)return Oe({connected:!1});const s=await i.json();if(Oe({connected:!!s.connected,meta:s.meta||null}),s.connected)try{const e=await fetch(l.Sn.DISCORD_METADATA,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(e.ok){const t=await e.json();Y(e=>(0,r.A)((0,r.A)({},e||{}),{},{discord:t.meta||{}}))}}catch(e){}}catch(e){Oe({connected:!1})}},At=async()=>{try{const e=o.j2.currentUser;if(!e)return Ue({connected:!1});const t=await e.getIdToken(!0),n=await fetch(l.Sn.LINKEDIN_STATUS,{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!n.ok)return Ue({connected:!1});const r=await n.json();Ue({connected:!!r.connected,meta:r.meta||null})}catch(e){Ue({connected:!1})}},It=async()=>{try{const e=o.j2.currentUser;if(!e)return Fe({connected:!1});const t=await e.getIdToken(!0),n=await fetch(l.Sn.TELEGRAM_STATUS,{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!n.ok)return Fe({connected:!1});const r=await n.json();Fe({connected:!!r.connected,meta:r.meta||null})}catch(e){Fe({connected:!1})}},Nt=async()=>{try{const t=o.j2.currentUser;if(!t)return ze({connected:!1,meta:null});const n=await t.getIdToken(!0),i=await fetch(l.Sn.PINTEREST_STATUS,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(!i.ok)return ze({connected:!1,meta:null});const s=await i.json();if(ze({connected:!!s.connected,meta:s.meta||null}),s.connected)try{const e=await fetch(l.Sn.PINTEREST_METADATA,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(e.ok){const t=await e.json();Y(e=>(0,r.A)((0,r.A)({},e||{}),{},{pinterest:t.meta||{}}))}}catch(e){}}catch(e){ze({connected:!1,meta:null})}},jt=async()=>{try{const t=o.j2.currentUser;if(!t)return Xe({connected:!1});const n=await t.getIdToken(!0),i=await fetch(l.Sn.SNAPCHAT_STATUS,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(!i.ok)return Xe({connected:!1});const s=await i.json();if(Xe({connected:!!s.connected,profile:s.profile||null}),s.connected)try{const e=await fetch(l.Sn.SNAPCHAT_METADATA,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(e.ok){const t=await e.json();Y(e=>(0,r.A)((0,r.A)({},e||{}),{},{snapchat:t.meta||{}}))}}catch(e){}}catch(e){Xe({connected:!1})}};(0,i.useEffect)(()=>{const e=new URLSearchParams(window.location.search),t=e.get("oauth")||e.get("youtube")||e.get("tiktok")||e.get("facebook")||e.get("twitter")||e.get("spotify")||e.get("discord")||e.get("reddit")||e.get("linkedin")||e.get("pinterest")||e.get("telegram")||e.get("snapchat"),n=e.get("status");if(t){const r=window.location.pathname+window.location.hash;window.history.replaceState({},"",r),"success"===n||"connected"===e.get(t)?(Ze({type:"success",message:"".concat(t.charAt(0).toUpperCase()+t.slice(1)," connected successfully!")}),F.Ay.success("".concat(t.charAt(0).toUpperCase()+t.slice(1)," connected successfully!")),setTimeout(()=>Ze(null),5e3)):"error"!==n&&"error"!==e.get(t)||(Ze({type:"error",message:"Failed to connect ".concat(t,". Please try again.")}),F.Ay.error("Failed to connect ".concat(t,". Please try again.")),setTimeout(()=>Ze(null),5e3)),setTimeout(()=>qt(),500)}(async()=>{try{const e=o.j2.currentUser;if(!e)return;const t=await e.getIdToken(!0),[n,r,i,s]=await Promise.all([fetch(l.Sn.EARNINGS_SUMMARY,{headers:{Authorization:"Bearer ".concat(t)}}),fetch(l.Sn.EARNINGS_PAYOUTS,{headers:{Authorization:"Bearer ".concat(t)}}),fetch(l.Sn.USER_PROGRESS,{headers:{Authorization:"Bearer ".concat(t)}}),fetch(l.Sn.PLATFORM_STATUS,{headers:{Authorization:"Bearer ".concat(t)}})]);if(n.ok){const e=await n.json();A(e)}if(r.ok){const e=await r.json();st(e.payouts||[])}if(i.ok){const e=await i.json();ot(e)}if(s.ok){const e=await s.json();ct(e)}}catch(e){}})(),Tt(),_t(),St(),kt(),jt(),xt(),Et(),Ct(),At(),It(),Nt();"earnings"===S&&(async()=>{try{const e=o.j2.currentUser;if(!e)return;const t=await e.getIdToken(!0),n=await fetch(l.Sn.EARNINGS_SUMMARY,{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();A(e)}}catch(e){console.warn(e)}})()},[S]);const Rt=async()=>Ht(l.Sn.TIKTOK_AUTH_START),Pt=async()=>Ht(l.Sn.FACEBOOK_AUTH_START),Dt=async()=>Ht(l.Sn.YOUTUBE_AUTH_START),Ot=async()=>Ht(l.Sn.TWITTER_AUTH_PREPARE||l.Sn.TWITTER_AUTH_START),Lt=async()=>Ht(l.Sn.SNAPCHAT_AUTH_PREPARE||l.Sn.SNAPCHAT_AUTH_START),Ut=async()=>Ht(l.Sn.SPOTIFY_AUTH_START),Mt=async()=>Ht(l.Sn.REDDIT_AUTH_START),Ft=async()=>Ht(l.Sn.DISCORD_AUTH_START),Vt=async()=>Ht(l.Sn.LINKEDIN_AUTH_START),zt=async()=>Ht(l.Sn.TELEGRAM_AUTH_START),Bt=async()=>Ht(l.Sn.PINTEREST_AUTH_START),qt=async()=>{await Promise.all([Tt(),_t(),St(),kt(),jt(),xt(),Et(),Ct(),At(),It(),Nt()]);try{const e=o.j2.currentUser;if(!e)return;const t=await e.getIdToken(!0),n=await fetch(l.Sn.PLATFORM_STATUS,{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();ct(e)}}catch(e){}},Ht=async e=>{try{const t=o.j2.currentUser;if(!t)return void F.Ay.error("Please sign in first");const n=await t.getIdToken(!0),r=await fetch(e,{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}),i=await r.json();if(!r.ok||null===i||void 0===i||!i.authUrl)throw new Error("Auth prepare failed");F.Ay.success("Opening authentication window...");/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent||"")?window.location.href=i.authUrl:window.open(i.authUrl,"_blank")}catch(t){console.warn(t),F.Ay.error(t.message||"Failed to start auth")}};return(0,s.jsxs)("div",{className:"dashboard-root",children:[(0,s.jsx)(F.l$,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1a1a2e",color:"#fff"}}}),(0,s.jsxs)("header",{className:"dashboard-topbar","aria-label":"Top navigation",children:[(0,s.jsxs)("button",{className:"hamburger","aria-label":T?"Close menu":"Open menu","aria-expanded":T,onClick:()=>k(e=>!e),children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{})]}),(0,s.jsx)("div",{className:"topbar-title",children:"Your Dashboard"}),(0,s.jsx)("div",{className:"topbar-user",children:(null===d||void 0===d?void 0:d.name)||"Guest"})]}),(0,s.jsxs)("aside",{className:"dashboard-sidebar ".concat(T?"open":""),"aria-label":"Sidebar",children:[(0,s.jsxs)("div",{className:"profile-section",children:[(0,s.jsx)("img",{className:"profile-avatar",src:(null===d||void 0===d?void 0:d.avatarUrl)||z,alt:"Avatar"}),(0,s.jsx)("h2",{children:(null===d||void 0===d?void 0:d.name)||"User Name"}),(0,s.jsxs)("div",{className:"profile-stats",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Views:"})," ",null!==(t=null===f||void 0===f?void 0:f.views)&&void 0!==t?t:0]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Clicks:"})," ",null!==(n=null===f||void 0===f?void 0:f.clicks)&&void 0!==n?n:0]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"CTR:"})," ",null!==(c=null===f||void 0===f?void 0:f.ctr)&&void 0!==c?c:0,"%"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Revenue:"})," $",null!==(u=null===f||void 0===f?void 0:f.revenue)&&void 0!==u?u:"0.00"]})]})]}),(0,s.jsx)("nav",{className:"dashboard-navbar-vertical",role:"navigation",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:"profile"===S?"active":"",onClick:()=>yt("profile"),children:"Profile"}),(0,s.jsx)("li",{className:"upload"===S?"active":"",onClick:()=>yt("upload"),children:"Upload"}),(0,s.jsx)("li",{className:"schedules"===S?"active":"",onClick:()=>yt("schedules"),children:"Schedules"}),(0,s.jsx)("li",{className:"analytics"===S?"active":"",onClick:()=>yt("analytics"),children:"Analytics"}),(0,s.jsx)("li",{className:"rewards"===S?"active":"",onClick:()=>yt("rewards"),children:"Rewards"}),(0,s.jsx)("li",{className:"notifications"===S?"active":"",onClick:()=>yt("notifications"),children:"Notifications"}),(0,s.jsx)("li",{className:"earnings"===S?"active":"",onClick:()=>yt("earnings"),children:"Earnings"}),(0,s.jsx)("li",{className:"connections"===S?"active":"",onClick:()=>yt("connections"),children:"Connections"}),(0,s.jsx)("li",{className:"security"===S?"active":"",onClick:()=>yt("security"),children:"Security"}),(0,s.jsx)("li",{className:"community"===S?"active":"",onClick:()=>yt("community"),children:"Community"}),(0,s.jsx)("li",{className:"clips"===S?"active":"",onClick:()=>yt("clips"),children:"AI Clips"})]})}),(0,s.jsx)("button",{className:"logout-btn",onClick:y,children:"Logout"})]}),(0,s.jsxs)("main",{className:"dashboard-main",children:[$e&&(0,s.jsxs)("div",{className:"connect-banner ".concat($e.type),style:{padding:"1rem",marginBottom:"1rem",borderRadius:"8px",background:"success"===$e.type?"#10b981":"#ef4444",color:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsx)("span",{children:$e.message}),(0,s.jsx)("button",{onClick:()=>Ze(null),style:{background:"transparent",border:"none",color:"#fff",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:"\xd7"})]}),"profile"===S&&(0,s.jsx)(a,{user:d,stats:f,tiktokStatus:et,facebookStatus:nt,youtubeStatus:Ke,twitterStatus:Qe,snapchatStatus:Je,spotifyStatus:He,redditStatus:Be,discordStatus:De,linkedinStatus:Le,telegramStatus:Me,pinterestStatus:Ve,tz:Ee,defaultsPlatforms:Ae,defaultsFrequency:Ne,toggleDefaultPlatform:e=>{Ie(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},setDefaultsFrequency:je,setTz:Ce,handleSaveDefaults:async()=>{if(v)try{await v({timezone:Ee,defaultPlatforms:Ae,defaultFrequency:Ne}),F.Ay.success("Defaults saved successfully!")}catch(e){F.Ay.error("Failed to save defaults")}},handleConnectTikTok:Rt,handleConnectFacebook:Pt,handleConnectYouTube:Dt,handleConnectTwitter:Ot,handleConnectSnapchat:Lt,handleConnectSpotify:Ut,handleConnectReddit:Mt,handleConnectDiscord:Ft,handleConnectLinkedin:Vt,handleConnectTelegram:zt,handleConnectPinterest:Bt}),"upload"===S&&(0,s.jsx)(E,{onUpload:w,contentList:gt,platformMetadata:Q,platformOptions:K,setPlatformOption:(e,t,n)=>{G(i=>(0,r.A)((0,r.A)({},i||{}),{},{[e]:(0,r.A)((0,r.A)({},(i||{})[e]||{}),{},{[t]:n})}))},selectedPlatforms:H,setSelectedPlatforms:W,spotifySelectedTracks:J,setSpotifySelectedTracks:X}),"schedules"===S&&(0,s.jsx)(I,{schedulesList:vt,contentList:gt,onCreate:async e=>{let{contentId:t,time:n,frequency:r,platforms:i=[],platformOptions:s={}}=e;const a=F.Ay.loading("Creating schedule...");try{await bt(async e=>{if(!t)throw new Error("Missing contentId");if(!(await fetch("".concat(l.JR,"/api/content/").concat(t,"/promotion-schedules"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({time:n,frequency:r,platforms:i,platformOptions:s})})).ok)throw new Error("Failed to create schedule");wt(),F.Ay.success("Schedule created successfully!",{id:a})})}catch(o){console.warn(o),F.Ay.error("Failed to create schedule",{id:a})}},onPause:async e=>{await bt(async t=>{try{await fetch(l.Sn.SCHEDULE_PAUSE(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}),wt(),F.Ay.success("Schedule paused")}catch(n){console.warn(n),F.Ay.error("Failed to pause schedule")}})},onResume:async e=>{await bt(async t=>{try{await fetch(l.Sn.SCHEDULE_RESUME(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}),wt(),F.Ay.success("Schedule resumed")}catch(n){console.warn(n),F.Ay.error("Failed to resume schedule")}})},onReschedule:async(e,t)=>{await bt(async n=>{try{await fetch(l.Sn.SCHEDULE_RESCHEDULE(e),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({time:t})}),wt(),F.Ay.success("Schedule updated")}catch(r){console.warn(r),F.Ay.error("Failed to reschedule")}})},onDelete:async e=>{window.confirm("Delete this schedule?")&&await bt(async t=>{try{await fetch(l.Sn.SCHEDULE_DELETE(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),wt(),F.Ay.success("Schedule deleted")}catch(n){console.warn(n),F.Ay.error("Failed to delete schedule")}})}}),"analytics"===S&&(0,s.jsx)(N,{}),"rewards"===S&&(0,s.jsx)(j,{badges:p}),"notifications"===S&&(0,s.jsx)(R,{notifs:O,onMarkAllRead:async()=>{try{await bt(async e=>{await fetch(l.Sn.NOTIFICATIONS_MARK_READ,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({})})}),L([]),F.Ay.success("All notifications marked as read")}catch(e){console.warn(e),F.Ay.error("Failed to mark notifications as read")}}}),"earnings"===S&&(0,s.jsx)(P,{earnings:C,onClaim:async()=>{const e=F.Ay.loading("Requesting payout...");try{await bt(async t=>{if(!(await fetch(l.Sn.EARNINGS_PAYOUT_SELF,{method:"POST",headers:{Authorization:"Bearer ".concat(t)}})).ok)throw new Error("Payout failed");F.Ay.success("Payout requested successfully!",{id:e})})}catch(t){console.warn(t),F.Ay.error("Payout request failed",{id:e})}}}),"connections"===S&&(0,s.jsx)(D,{platformSummary:lt,discordStatus:De,spotifyStatus:He,redditStatus:Be,youtubeStatus:Ke,twitterStatus:Qe,tiktokStatus:et,facebookStatus:nt,linkedinStatus:Le,snapchatStatus:Je,telegramStatus:Me,pinterestStatus:Ve,handleConnectSpotify:Ut,handleConnectDiscord:Ft,handleConnectReddit:Mt,handleConnectYouTube:Dt,handleConnectTwitter:Ot,handleConnectSnapchat:Lt,handleConnectLinkedin:Vt,handleConnectTelegram:zt,handleConnectPinterest:Bt,handleConnectTikTok:Rt,handleConnectFacebook:Pt,handleDisconnectPlatform:async e=>{window.confirm("Disconnect ".concat(e,"?"))&&await bt(async t=>{try{const n=await fetch(l.Sn.PLATFORM_DISCONNECT(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||"Failed to disconnect")}switch(Ze({type:"success",message:"".concat(e.charAt(0).toUpperCase()+e.slice(1)," disconnected successfully")}),setTimeout(()=>Ze(null),4e3),e){case"tiktok":tt({connected:!1,meta:null});break;case"facebook":rt({connected:!1,meta:null});break;case"youtube":Ge({connected:!1,channel:null});break;case"twitter":Ye({connected:!1,identity:null});break;case"snapchat":Xe({connected:!1,profile:null});break;case"spotify":We({connected:!1,meta:null});break;case"reddit":qe({connected:!1,meta:null});break;case"discord":Oe({connected:!1,meta:null});break;case"linkedin":Ue({connected:!1,meta:null});break;case"telegram":Fe({connected:!1,meta:null});break;case"pinterest":ze({connected:!1,meta:null})}await qt()}catch(n){console.warn(n),Ze({type:"error",message:n.message||"Failed to disconnect"}),setTimeout(()=>Ze(null),4e3),F.Ay.error(n.message||"Failed to disconnect")}})}}),"security"===S&&(0,s.jsx)(U,{user:d}),"community"===S&&(0,s.jsx)(M,{}),"clips"===S&&(0,s.jsx)(V,{content:gt})]})]})}},488:(e,t,n)=>{n.d(t,{JR:()=>r,Sn:()=>i});const r="https://autopromote.onrender.com",i={LOGIN:"".concat(r,"/api/auth/login"),REGISTER:"".concat(r,"/api/auth/register"),ADMIN_LOGIN:"".concat(r,"/api/auth/admin-login"),VERIFY_TOKEN:"".concat(r,"/api/auth/verify"),CONTENT_UPLOAD:"".concat(r,"/api/content/upload"),MY_CONTENT:"".concat(r,"/api/content/my-content"),MY_SCHEDULES:"".concat(r,"/api/content/my-promotion-schedules"),USERS_ME:"".concat(r,"/api/users/me"),USERS_NOTIFICATIONS:"".concat(r,"/api/users/notifications"),ADMIN_ANALYTICS:"".concat(r,"/api/admin/analytics/overview"),TIKTOK_AUTH_START:"".concat(r,"/api/tiktok/auth/prepare"),TIKTOK_STATUS:"".concat(r,"/api/tiktok/status"),FACEBOOK_AUTH_START:"".concat(r,"/api/facebook/auth/start"),FACEBOOK_STATUS:"".concat(r,"/api/facebook/status"),FACEBOOK_UPLOAD:"".concat(r,"/api/facebook/upload"),YOUTUBE_AUTH_START:"".concat(r,"/api/youtube/auth/start"),YOUTUBE_STATUS:"".concat(r,"/api/youtube/status"),YOUTUBE_METADATA:"".concat(r,"/api/youtube/metadata"),YOUTUBE_UPLOAD:"".concat(r,"/api/youtube/upload"),INSTAGRAM_STATUS:"".concat(r,"/api/instagram/status"),INSTAGRAM_UPLOAD:"".concat(r,"/api/instagram/upload"),TWITTER_AUTH_START:"".concat(r,"/api/twitter/oauth/start"),TWITTER_AUTH_PREPARE:"".concat(r,"/api/twitter/oauth/prepare"),TWITTER_STATUS:"".concat(r,"/api/twitter/connection/status"),TWITTER_TWEET_TEST:"".concat(r,"/api/twitter/tweet/test"),TWITTER_TWEET_IMMEDIATE:"".concat(r,"/api/twitter/tweet/immediate"),SNAPCHAT_AUTH_PREPARE:"".concat(r,"/api/snapchat/oauth/prepare"),SNAPCHAT_STATUS:"".concat(r,"/api/snapchat/status"),SNAPCHAT_METADATA:"".concat(r,"/api/snapchat/metadata"),SNAPCHAT_CREATIVE:"".concat(r,"/api/snapchat/creative"),SNAPCHAT_ANALYTICS:e=>"".concat(r,"/api/snapchat/analytics/").concat(e),SCHEDULE_PAUSE:e=>"".concat(r,"/api/content/promotion-schedules/").concat(e,"/pause"),SCHEDULE_RESUME:e=>"".concat(r,"/api/content/promotion-schedules/").concat(e,"/resume"),SCHEDULE_RESCHEDULE:e=>"".concat(r,"/api/content/promotion-schedules/").concat(e,"/reschedule"),SCHEDULE_DELETE:e=>"".concat(r,"/api/content/promotion-schedules/").concat(e),HEALTH:"".concat(r,"/api/health"),SPOTIFY_AUTH_START:"".concat(r,"/api/spotify/auth/start"),SPOTIFY_STATUS:"".concat(r,"/api/spotify/status"),SPOTIFY_METADATA:"".concat(r,"/api/spotify/metadata"),SPOTIFY_SEARCH:"".concat(r,"/api/spotify/search"),SPOTIFY_PLAYLISTS:"".concat(r,"/api/spotify/playlists"),REDDIT_AUTH_START:"".concat(r,"/api/reddit/auth/start"),REDDIT_STATUS:"".concat(r,"/api/reddit/status"),DISCORD_AUTH_START:"".concat(r,"/api/discord/auth/start"),DISCORD_STATUS:"".concat(r,"/api/discord/status"),DISCORD_METADATA:"".concat(r,"/api/discord/metadata"),LINKEDIN_AUTH_START:"".concat(r,"/api/linkedin/auth/start"),LINKEDIN_STATUS:"".concat(r,"/api/linkedin/status"),LINKEDIN_METADATA:"".concat(r,"/api/linkedin/metadata"),TELEGRAM_AUTH_START:"".concat(r,"/api/telegram/auth/start"),TELEGRAM_STATUS:"".concat(r,"/api/telegram/status"),TELEGRAM_METADATA:"".concat(r,"/api/telegram/metadata"),PINTEREST_AUTH_START:"".concat(r,"/api/pinterest/auth/start"),PINTEREST_STATUS:"".concat(r,"/api/pinterest/status"),PINTEREST_METADATA:"".concat(r,"/api/pinterest/metadata"),PINTEREST_BOARDS:"".concat(r,"/api/pinterest/boards"),EARNINGS_SUMMARY:"".concat(r,"/api/monetization/earnings/summary"),EARNINGS_PAYOUT_SELF:"".concat(r,"/api/monetization/earnings/payout/self"),EARNINGS_PAYOUTS:"".concat(r,"/api/monetization/earnings/payouts"),EARNINGS_AGGREGATE_ADMIN:"".concat(r,"/api/monetization/earnings/aggregate"),NOTIFICATIONS_LIST:"".concat(r,"/api/notifications"),NOTIFICATIONS_MARK_READ:"".concat(r,"/api/notifications/read"),ANALYTICS_USER:"".concat(r,"/api/analytics/user"),PLATFORM_STATUS:"".concat(r,"/api/platform/status"),PLATFORM_DISCONNECT:e=>"".concat(r,"/api/platform/disconnect/").concat(e),USER_PROGRESS:"".concat(r,"/api/users/progress")}},521:()=>{},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},579:(e,t,n)=>{e.exports=n(153)},606:(e,t,n)=>{n.d(t,{h1:()=>o,uA:()=>i});var r=n(776);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},653:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(555),i=n(43),s=(n(521),n(579));const a=e=>{let{onRegister:t,onClose:n}=e;const[a,o]=(0,i.useState)({name:"",email:"",password:"",confirmPassword:""}),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(""),[h,f]=(0,i.useState)(!1),p=(0,i.useCallback)(e=>{const{name:t,value:n}=e.target;o(e=>(0,r.A)((0,r.A)({},e),{},{[t]:n})),l&&c(""),u&&d("")},[l,u]);return(0,s.jsx)("div",{className:"auth-container",children:(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(""),d(""),f(!0);const{name:n,email:r,password:i,confirmPassword:s}=a;if(i!==s)return c("Passwords do not match"),void f(!1);if(i.length<6)return c("Password must be at least 6 characters long"),void f(!1);try{await t(n,r,i),d("Registration successful! Please check your email to verify your account before logging in."),o({name:"",email:"",password:"",confirmPassword:""}),setTimeout(()=>{try{"undefined"!==typeof window&&(window.location.href="/")}catch(e){}},4e3)}catch(l){console.error("Registration error:",l);let e="Registration failed. ";if(l.code)switch(l.code){case"auth/email-already-in-use":e+="This email is already registered.";break;case"auth/invalid-email":e+="Invalid email address.";break;case"auth/operation-not-allowed":e+="Email/password accounts are not enabled. Please contact support.";break;case"auth/weak-password":e+="Please choose a stronger password (at least 6 characters).";break;default:e+=l.message}else e+=l.message||"Unknown error occurred.";c(e)}finally{f(!1)}},className:"auth-form",children:[(0,s.jsx)("h2",{className:"auth-title",children:"Create Account"}),l&&(0,s.jsx)("div",{className:"error-message",children:l}),u&&(0,s.jsx)("div",{className:"success-message",children:u}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Full Name"}),(0,s.jsx)("input",{type:"text",name:"name",className:"form-input",value:a.name,onChange:p,placeholder:"Enter your full name",required:!0,autoComplete:"name"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Email"}),(0,s.jsx)("input",{type:"email",name:"email",className:"form-input",value:a.email,onChange:p,placeholder:"Enter your email",required:!0,autoComplete:"email"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Password"}),(0,s.jsx)("input",{type:"password",name:"password",className:"form-input",value:a.password,onChange:p,placeholder:"Create a password",required:!0,autoComplete:"new-password"}),(0,s.jsx)("p",{className:"password-requirements",children:"Password must be at least 6 characters long"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",name:"confirmPassword",className:"form-input",value:a.confirmPassword,onChange:p,placeholder:"Confirm your password",required:!0,autoComplete:"new-password"})]}),(0,s.jsx)("button",{type:"submit",disabled:h,className:"auth-button",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"loading-spinner"}),"Creating your account..."]}):"Create Account"}),(0,s.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),n&&n()},className:"auth-link",children:"Already have an account? Sign in"})]})})}},667:(e,t,n)=>{n.d(t,{Dc:()=>ye,gS:()=>gc,C3:()=>Sc,hq:()=>xc,rJ:()=>tl,kd:()=>mc,H9:()=>nl,GG:()=>fc,aU:()=>ll,GV:()=>_c,AB:()=>tc,aQ:()=>vc,My:()=>Zl,P:()=>Ql,O5:()=>bc,mZ:()=>pc,_M:()=>Jl});var r,i,s=n(555),a=n(232),o=n(606),l=n(965),c=n(776),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function s(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function o(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],0>e?-1:0)}):new s([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return m(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=o(0),u=o(1),h=o(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function m(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(u)}function g(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function w(e,t){if(f(t))throw Error("division by zero");if(f(e))return new y(c,c);if(p(e))return t=w(m(e),t),new y(m(t.g),m(t.h));if(p(t))return t=w(e,m(t)),new y(m(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;0>=r.l(e);)n=b(n),r=b(r);var i=x(n,1),s=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var a=s.add(r);0>=a.l(e)&&(i=i.add(n),s=a),r=x(r,1),n=x(n,1)}return t=g(e,i.j(t)),new y(i,t)}for(i=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(s=l(n)).j(t);p(a)||0<a.l(e);)a=(s=l(n-=r)).j(t);f(s)&&(s=u),i=i.add(s),e=g(e,a)}return new y(i,e)}function b(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(p(this))return-m(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var i=w(n,t).g,s=((0<(n=g(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?m(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.i(r)>>>16,o=65535&this.i(r),u=e.i(i)>>>16,d=65535&e.i(i);n[2*r+2*i]+=o*d,v(n,2*r+2*i),n[2*r+2*i+1]+=a*d,v(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,v(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,v(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return w(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,i=d.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),i=c,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=l(Math.pow(n,a)),i=i.j(a).add(l(o))):i=(i=i.j(r)).add(l(o))}return i},r=d.Integer=s}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,f,p,m,g,v,y,w,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},x={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function S(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function _(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function T(e){return/^[\s\xa0]*$/.test(e)}function k(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function E(e){return E[" "](e),e}E[" "]=function(){};var C=-1!=k().indexOf("Gecko")&&!(-1!=k().toLowerCase().indexOf("webkit")&&-1==k().indexOf("Edge"))&&!(-1!=k().indexOf("Trident")||-1!=k().indexOf("MSIE"))&&-1==k().indexOf("Edge");function A(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function I(e){const t={};for(const n in e)t[n]=e[n];return t}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<N.length;t++)n=N[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function R(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function P(e){i.setTimeout(()=>{throw e},0)}function D(){var e=F;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var O=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new L,e=>e.reset());class L{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let U,M=!1,F=new class{constructor(){this.h=this.g=null}add(e,t){const n=O.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},V=()=>{const e=i.Promise.resolve(void 0);U=()=>{e.then(z)}};var z=()=>{for(var e;e=D();){try{e.h.call(e.g)}catch(n){P(n)}var t=O;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}M=!1};function B(){this.s=this.s,this.C=this.C}function q(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},q.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function W(e,t){if(q.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(C){e:{try{E(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:K[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&W.aa.h.call(this)}}d(W,q);var K={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),Q=0;function Y(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Q,this.da=this.fa=!1}function J(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(J(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}X.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=Z(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new Y(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,i){if(r&&r.once)return ie(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ne(e,t[s],n,r,i);return null}return n=de(n),e&&e[G]?e.K(t,n,a(r)?!!r.capture:!!r,i):re(e,t,n,!1,r,i)}function re(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=ce(e);if(l||(e[ee]=l=new X(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)H||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ie(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ie(e,t[s],n,r,i);return null}return n=de(n),e&&e[G]?e.L(t,n,a(r)?!!r.capture:!!r,i):re(e,t,n,!0,r,i)}function se(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)se(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=de(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(s=e.g[t],n,r,i))&&(J(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,i)),(n=-1<e?t[e]:null)&&ae(n))}function ae(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[G])$(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?($(n,e),0==n.h&&(n.src=null,t[ee]=null)):J(e)}}}function oe(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new W(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&ae(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof X?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){B.call(this),this.i=new X(this),this.M=this,this.F=null}function fe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new q(t,e);else if(t instanceof q)t.target=t.target||e;else{var i=t;j(t=new q(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=pe(a,r,!0,t)&&i}if(i=pe(a=t.g=e,r,!0,t)&&i,i=pe(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=pe(a=t.g=n[s],r,!1,t)&&i}function pe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&$(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function me(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ge(e){e.g=me(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(he,B),he.prototype[G]=!0,he.prototype.removeEventListener=function(e,t,n,r){se(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)J(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ve extends B{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(e){B.call(this),this.h=e,this.g={}}d(ye,B);var we=[];function be(e){A(e.g,function(e,t){this.g.hasOwnProperty(t)&&ae(e)},e),e.g={}}ye.prototype.N=function(){ye.aa.N.call(this),be(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=i.JSON.stringify,Se=i.JSON.parse,_e=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function Te(){}function ke(e){return e.h||(e.h=e.i())}function Ee(){}Te.prototype.h=null;var Ce={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ae(){q.call(this,"d")}function Ie(){q.call(this,"c")}d(Ae,q),d(Ie,q);var Ne={},je=null;function Re(){return je=je||new he}function Pe(e){q.call(this,Ne.La,e)}function De(e){const t=Re();fe(t,new Pe(t))}function Oe(e,t){q.call(this,Ne.STAT_EVENT,e),this.stat=t}function Le(e){const t=Re();fe(t,new Oe(t,e))}function Ue(e,t){q.call(this,Ne.Ma,e),this.size=t}function Me(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Fe(){this.g=!0}function Ve(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return xe(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}Ne.La="serverreachability",d(Pe,q),Ne.STAT_EVENT="statevent",d(Oe,q),Ne.Ma="timingevent",d(Ue,q),Fe.prototype.xa=function(){this.g=!1},Fe.prototype.info=function(){};var ze,Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function He(){}function We(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ke}function Ke(){this.i=null,this.g="",this.h=!1}d(He,Te),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},ze=new He;var Ge={},Qe={};function Ye(e,t,n){e.L=1,e.v=xt(gt(t)),e.m=n,e.P=!0,Je(e,null)}function Je(e,t){e.F=Date.now(),Ze(e),e.A=gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ot(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ke,e.g=_n(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ve(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(we[0]=i.toString()),i=we);for(var s=0;s<i.length;s++){var a=ne(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?I(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),De(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Xe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function $e(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Qe:(n=Number(t.substring(n,r)),isNaN(n)?Ge:(r+=1)+n>t.length?Qe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Me(c(e.ba,e),t)}function tt(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||yn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,be(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function it(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),on(n)}pn(n),Le(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Me(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else bn(n,11)}else if((e.K||n.g==e)&&vn(n),!T(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ut(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,bt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=Sn(r,r.J?r.ia:null,r.W),a.K){dt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(tt(o),Ze(o)),r.g=a}else fn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||bn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?bn(n,7):an(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}De()}catch(u){}}We.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},We.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||De(),tt(this);var n=this.g.Z();this.X=n;t:if(Xe(this)){var r=nn(this.g);e="";var s=r.length,a=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Le(12),rt(this),nt(this);break e}Ve(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,it(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=$e(this,o),e==Qe){4==h&&(this.s=4,Le(14),n=!1),Ve(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ge){this.s=4,Le(15),Ve(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ve(this.i,this.l,e,null),it(this,e)}if(Xe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Le(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),mn(d),d.M=!0,Le(11))}}else Ve(this.i,this.l,o,"[Invalid Chunked Response]"),rt(this),nt(this)}else Ve(this.i,this.l,o,null),it(this,o);4==h&&rt(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=R(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),rt(this),nt(this)}}}catch(h){}},We.prototype.cancel=function(){this.J=!0,rt(this)},We.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(De(),Le(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var st=class{constructor(e,t){this.g=e,this.map=t}};function at(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ot(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return S(e.i)}function ft(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}at.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var pt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof mt){this.h=e.h,vt(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new jt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wt(this,n),this.m=e.m}else e&&(t=String(e).match(pt))?(this.h=!1,vt(this,t[1]||"",!0),this.o=St(t[2]||""),this.g=St(t[3]||"",!0),yt(this,t[4]),this.l=St(t[5]||"",!0),wt(this,t[6]||"",!0),this.m=St(t[7]||"")):(this.h=!1,this.i=new jt(null,this.h))}function gt(e){return new mt(e)}function vt(e,t,n){e.j=n?St(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function wt(e,t,n){t instanceof jt?(e.i=t,function(e,t){t&&!e.j&&(Rt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Pt(this,t),Ot(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=_t(t,It)),e.i=new jt(t,e.h))}function bt(e,t,n){e.i.set(t,n)}function xt(e){return bt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function St(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _t(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Tt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Tt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_t(t,Et,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(_t(t,Et,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(_t(n,"/"==n.charAt(0)?At:Ct,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",_t(n,Nt)),e.join("")};var kt,Et=/[#\/\?@]/g,Ct=/[#\?:]/g,At=/[#\?]/g,It=/[#\?@]/g,Nt=/#/g;function jt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Pt(e,t){Rt(e),t=Lt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Dt(e,t){return Rt(e),t=Lt(e,t),e.g.has(t)}function Ot(e,t,n){Pt(e,t),0<n.length&&(e.i=null,e.g.set(Lt(e,t),S(n)),e.h+=n.length)}function Lt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ut(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Mt(){this.g=new _e}function Ft(e,t,n){const r=n||"";try{ft(e,function(e,n){let i=e;a(e)&&(i=xe(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vt(e){this.l=e.Ub||null,this.j=e.eb||!1}function zt(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function qt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Wt(e){let t="";return A(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Kt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bt(e,t,n))}function Gt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=jt.prototype).add=function(e,t){Rt(this),this.i=null,e=Lt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Rt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Rt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Rt(this);let t=[];if("string"===typeof e)Dt(this,e)&&(t=t.concat(this.g.get(Lt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Rt(this),this.i=null,Dt(this,e=Lt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(Vt,Te),Vt.prototype.g=function(){return new zt(this.l,this.j)},Vt.prototype.i=(kt={},function(){return kt}),d(zt,he),(e=zt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qt(this):Ht(this),3==this.readyState&&Bt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,qt(this))},e.Qa=function(e){this.g&&(this.response=e,qt(this))},e.ga=function(){this.g&&qt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Gt,he);var Qt=/^https?$/i,Yt=["POST","PUT"];function Jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),Zt(e)}function Xt(e){e.A||(e.A=!0,fe(e,"complete"),fe(e,"error"))}function $t(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))me(e.Ea,0,e);else if(fe(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(pt)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Qt.test(a?a.toLowerCase():"")}n=s}if(n)fe(e,"complete"),fe(e,"success");else{e.m=6;try{var o=2<tn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Xt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||fe(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function en(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new at(e&&e.concurrentRequestLimit),this.Da=new Mt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function an(e){if(ln(e),3==e.G){var t=e.U++,n=gt(e.I);if(bt(n,"SID",e.K),bt(n,"RID",t),bt(n,"TYPE","terminate"),dn(e,n),(t=new We(e,e.j,t)).L=2,t.v=xt(gt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=_n(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}xn(e)}function on(e){e.g&&(mn(e),e.g.cancel(),e.g=null)}function ln(e){on(e),e.u&&(i.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function cn(e){if(!ot(e.h)&&!e.s){e.s=!0;var t=e.Ga;U||V(),M||(U(),M=!0),F.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=gt(e.I);bt(r,"SID",e.K),bt(r,"RID",n),bt(r,"AID",e.T),dn(e,r),e.m&&e.o&&Kt(r,e.m,e.o),n=new We(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),Ye(n,r,t)}function dn(e,t){e.H&&A(e.H,function(e,n){bt(t,n,e)}),e.l&&ft({},function(e,n){bt(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Ft(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;U||V(),M||(U(),M=!0),F.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Me(c(e.Fa,e),wn(e,e.v)),e.v++,!0)}function mn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new We(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);bt(t,"RID","rpc"),bt(t,"SID",e.K),bt(t,"AID",e.T),bt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&bt(t,"TO",e.ja),bt(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Kt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=xt(gt(t)),n.m=null,n.P=!0,Je(n,e)}function vn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){vn(e),mn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;fe(r=Re(),new Ue(r,n)),cn(e)}else fn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Me(c(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:bn(e,5);break;case 4:bn(e,10);break;case 3:bn(e,6);break;default:bn(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function bn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new mt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||vt(r,"https"),xt(r),t?function(e,t){const n=new Fe;if(i.Image){const r=new Image;r.onload=u(Ut,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ut,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ut,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ut,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Fe;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ut(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ut(0,0,!0,t):Ut(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ut(0,0,!1,t)})}(r.toString(),n)}else Le(2);e.G=0,e.l&&e.l.sa(t),xn(e),ln(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(_(e.ka,t),_(e.ka,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.ra()}}function Sn(e,t,n){var r=n instanceof mt?gt(n):new mt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new mt(null);r&&vt(a,r),t&&(a.g=t),s&&yt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&bt(r,n,t),bt(r,"VER",e.la),dn(e,r),r}function _n(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new Vt({eb:n})):new Gt(e.pa)).Ha(e.J),t}function Tn(){}function kn(){}function En(e,t){he.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!T(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function Cn(e){Ae.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function An(){Ie.call(this),this.status=1}function In(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ze.g(),this.v=this.o?ke(this.o):ke(ze),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Jt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Yt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,fe(this,"complete"),fe(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?$t(this):this.bb())},e.bb=function(){$t(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(kt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(kt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Se(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Le(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Sn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new We(this,this.j,e);let s=this.o;if(this.S&&(s?(s=I(s),j(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,i,t),bt(n=gt(this.I),"RID",e),bt(n,"CVER",22),this.D&&bt(n,"X-HTTP-Session-Id",this.D),dn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Wt(s)))+"&"+t:this.m&&Kt(n,this.m,s)),ut(this.h,i),this.Ua&&bt(n,"TYPE","init"),this.P?(bt(n,"$req",t),bt(n,"SID","null"),i.T=!0,Ye(i,n,null)):Ye(i,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||ot(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Me(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),on(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,on(this),pn(this),Le(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Tn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},kn.prototype.g=function(e,t){return new En(e,t)},d(En,he),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){an(this.g)},En.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=xe(e),e=n);t.i.push(new st(t.Ya++,e)),3==t.G&&cn(t)},En.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,En.aa.N.call(this)},d(Cn,Ae),d(An,Ie),d(In,Tn),In.prototype.ua=function(){fe(this.g,"a")},In.prototype.ta=function(e){fe(this.g,new Cn(e))},In.prototype.sa=function(e){fe(this.g,new An)},In.prototype.ra=function(){fe(this.g,"b")},kn.prototype.createWebChannel=kn.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,w=x.createWebChannelTransport=function(){return new kn},y=x.getStatEventTarget=function(){return Re()},v=x.Event=Ne,g=x.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,m=x.ErrorCode=Be,qe.COMPLETE="complete",p=x.EventType=qe,Ee.EventType=Ce,Ce.OPEN="a",Ce.CLOSE="b",Ce.ERROR="c",Ce.MESSAGE="d",he.prototype.listen=he.prototype.K,f=x.WebChannel=Ee,x.FetchXmlHttpFactory=Vt,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,h=x.XhrIo=Gt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const S="@firebase/firestore",_="4.9.1";class T{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}T.UNAUTHENTICATED=new T(null),T.GOOGLE_CREDENTIALS=new T("google-credentials-uid"),T.FIRST_PARTY=new T("first-party-uid"),T.MOCK_USER=new T("mock-user");let k="12.2.0";const E=new l.Vy("@firebase/firestore");function C(){return E.logLevel}function A(e){if(E.logLevel<=l.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(j);E.debug("Firestore (".concat(k,"): ").concat(e),...i)}}function I(e){if(E.logLevel<=l.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(j);E.error("Firestore (".concat(k,"): ").concat(e),...i)}}function N(e){if(E.logLevel<=l.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(j);E.warn("Firestore (".concat(k,"): ").concat(e),...i)}}function j(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function R(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,P(e,r,n)}function P(e,t,n){let r="FIRESTORE (".concat(k,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw I(r),new Error(r)}function D(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||P(t,i,r)}function O(e,t){return e}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class U extends c.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class M{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class F{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(T.UNAUTHENTICATED))}shutdown(){}}class z{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class B{constructor(e){this.t=e,this.currentUser=T.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){D(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new M;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new M,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new M)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(D("string"==typeof t.accessToken,31837,{l:t}),new F(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return D(null===e||"string"==typeof e,2055,{h:e}),new T(e)}}class q{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=T.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new q(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(T.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,a.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){D(void 0===this.o,3512);const n=e=>{null!=e.error&&A("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,A("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new W(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(D("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new W(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function G(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Q{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=G(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Y(e,t){return e<t?-1:e>t?1:0}function J(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Z(n)===Z(i)?Y(n,i):Z(n)?1:-1}return Y(e.length,t.length)}const X=55296,$=57343;function Z(e){const t=e.charCodeAt(0);return t>=X&&t<=$}function ee(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const te="__name__";class ne{constructor(e,t,n){void 0===t?t=0:t>e.length&&R(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&R(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ne.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ne?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ne.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Y(e.length,t.length)}static compareSegments(e,t){const n=ne.isNumericId(e),r=ne.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ne.extractNumericId(e).compare(ne.extractNumericId(t)):J(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class re extends ne{construct(e,t,n){return new re(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new U(L.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new re(e)}static emptyPath(){return new re([])}}const ie=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends ne{construct(e,t,n){return new se(e,t,n)}static isValidIdentifier(e){return ie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===te}static keyField(){return new se([te])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new U(L.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new U(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new U(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new U(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new se(t)}static emptyPath(){return new se([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(re.fromString(e))}static fromName(e){return new ae(re.fromString(e).popFirst(5))}static empty(){return new ae(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===re.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new re(e.slice()))}}function oe(e,t,n){if(!n)throw new U(L.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function le(e){if(!ae.isDocumentKey(e))throw new U(L.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ce(e){if(ae.isDocumentKey(e))throw new U(L.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ue(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function de(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":R(12329,{type:typeof e})}function he(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new U(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=de(e);throw new U(L.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function fe(e,t){if(t<=0)throw new U(L.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function pe(e,t){const n={typeString:e};return t&&(n.value=t),n}function me(e,t){if(!ue(e))throw new U(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new U(L.INVALID_ARGUMENT,n);return!0}const ge=-62135596800,ve=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ve);return new ye(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ge)throw new U(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ve}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(me(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ge;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:pe("string",ye._jsonSchemaVersion),seconds:pe("number"),nanoseconds:pe("number")};class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new ye(0,0))}static max(){return new we(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const be=-1;class xe{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}xe.UNKNOWN_ID=-1;function Se(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=we.fromTimestamp(1e9===r?new ye(n+1,0):new ye(n,r));return new Te(i,ae.empty(),t)}function _e(e){return new Te(e.readTime,e.key,be)}class Te{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Te(we.min(),ae.empty(),be)}static max(){return new Te(we.max(),ae.empty(),be)}}function ke(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ae.comparator(e.documentKey,t.documentKey),0!==n?n:Y(e.largestBatchId,t.largestBatchId))}const Ee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ae(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==Ee)throw e;A("LocalStore","Unexpectedly lost primary lease")}class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&R(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ie((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ie?t:Ie.resolve(t)}catch(e){return Ie.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.reject(t)}static resolve(e){return new Ie((t,n)=>{t(e)})}static reject(e){return new Ie((t,n)=>{n(e)})}static waitFor(e){return new Ie((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Ie.resolve(!1);for(const n of e)t=t.next(e=>e?Ie.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ie((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Ie((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ne(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function je(e){return"IndexedDbTransactionError"===e.name}class Re{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Re.ce=-1;const Pe=-1;function De(e){return null==e}function Oe(e){return 0===e&&1/e==-1/0}function Le(e){return"number"==typeof e&&Number.isInteger(e)&&!Oe(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ue="\x01";function Me(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ve(t)),t=Fe(e.get(n),t);return Ve(t)}function Fe(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Ue:n+="\x01\x11";break;default:n+=t}}return n}function Ve(e){return e+Ue+"\x01"}const ze="remoteDocuments",Be="owner",qe="mutationQueues",He="mutations";const We="documentMutations",Ke="remoteDocumentsV14",Ge="remoteDocumentGlobal",Qe="targets",Ye="targetDocuments",Je="targetGlobal",Xe="collectionParents",$e="clientMetadata",Ze="bundles",et="namedQueries",tt="indexConfiguration",nt="indexState",rt="indexEntries",it="documentOverlays",st="globals",at=[qe,He,We,ze,Qe,Be,Je,Ye,$e,Ge,Xe,Ze,et],ot=[qe,He,We,Ke,Qe,Be,Je,Ye,$e,Ge,Xe,Ze,et,it],lt=ot,ct=[...lt,tt,nt,rt];function ut(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ht(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ft{constructor(e,t){this.comparator=e,this.root=t||mt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pt(this.root,e,this.comparator,!1)}getReverseIterator(){return new pt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pt(this.root,e,this.comparator,!0)}}class pt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:mt.RED,this.left=null!=r?r:mt.EMPTY,this.right=null!=i?i:mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new mt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw R(43730,{key:this.key,value:this.value});if(this.right.isRed())throw R(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw R(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1,mt.EMPTY=new class{constructor(){this.size=0}get key(){throw R(57766)}get value(){throw R(16141)}get color(){throw R(16727)}get left(){throw R(29726)}get right(){throw R(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vt(this.data.getIterator())}getIteratorFrom(e){return new vt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof gt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class vt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class yt{constructor(e){this.fields=e,e.sort(se.comparator)}static empty(){return new yt([])}unionWith(e){let t=new gt(se.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new yt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ee(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class wt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new wt("Invalid base64 string: "+e):e}}(e);return new bt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const xt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function St(e){if(D(!!e,39018),"string"==typeof e){let t=0;const n=xt.exec(e);if(D(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_t(e.seconds),nanos:_t(e.nanos)}}function _t(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Tt(e){return"string"==typeof e?bt.fromBase64String(e):bt.fromUint8Array(e)}const kt="server_timestamp",Et="__type__",Ct="__previous_value__",At="__local_write_time__";function It(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Et])||void 0===t?void 0:t.stringValue)===kt}function Nt(e){const t=e.mapValue.fields[Ct];return It(t)?Nt(t):t}function jt(e){const t=St(e.mapValue.fields[At].timestampValue);return new ye(t.seconds,t.nanos)}class Rt{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Pt="(default)";class Dt{constructor(e,t){this.projectId=e,this.database=t||Pt}static empty(){return new Dt("","")}get isDefaultDatabase(){return this.database===Pt}isEqual(e){return e instanceof Dt&&e.projectId===this.projectId&&e.database===this.database}}const Ot="__type__",Lt="__max__",Ut={mapValue:{fields:{__type__:{stringValue:Lt}}}},Mt="__vector__",Ft="value";function Vt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?It(e)?4:rn(e)?9007199254740991:tn(e)?10:11:R(28295,{value:e})}function zt(e,t){if(e===t)return!0;const n=Vt(e);if(n!==Vt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jt(e).isEqual(jt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=St(e.timestampValue),r=St(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Tt(e.bytesValue).isEqual(Tt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return _t(e.geoPointValue.latitude)===_t(t.geoPointValue.latitude)&&_t(e.geoPointValue.longitude)===_t(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return _t(e.integerValue)===_t(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=_t(e.doubleValue),r=_t(t.doubleValue);return n===r?Oe(n)===Oe(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ee(e.arrayValue.values||[],t.arrayValue.values||[],zt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ut(n)!==ut(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!zt(n[i],r[i])))return!1;return!0}(e,t);default:return R(52216,{left:e})}}function Bt(e,t){return void 0!==(e.values||[]).find(e=>zt(e,t))}function qt(e,t){if(e===t)return 0;const n=Vt(e),r=Vt(t);if(n!==r)return Y(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=_t(e.integerValue||e.doubleValue),r=_t(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ht(e.timestampValue,t.timestampValue);case 4:return Ht(jt(e),jt(t));case 5:return J(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Tt(e),r=Tt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Y(n[i],r[i]);if(0!==e)return e}return Y(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Y(_t(e.latitude),_t(t.latitude));return 0!==n?n:Y(_t(e.longitude),_t(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Wt(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const a=e.fields||{},o=t.fields||{},l=null===(n=a[Ft])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Ft])||void 0===r?void 0:r.arrayValue,u=Y((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Wt(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ut.mapValue&&t===Ut.mapValue)return 0;if(e===Ut.mapValue)return 1;if(t===Ut.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=J(r[a],s[a]);if(0!==e)return e;const t=qt(n[r[a]],i[s[a]]);if(0!==t)return t}return Y(r.length,s.length)}(e.mapValue,t.mapValue);default:throw R(23264,{he:n})}}function Ht(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Y(e,t);const n=St(e),r=St(t),i=Y(n.seconds,r.seconds);return 0!==i?i:Y(n.nanos,r.nanos)}function Wt(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=qt(n[i],r[i]);if(e)return e}return Y(n.length,r.length)}function Kt(e){return Gt(e)}function Gt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=St(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Tt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ae.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Gt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Gt(e.fields[i]));return n+"}"}(e.mapValue):R(61005,{value:e})}function Qt(e){switch(Vt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nt(e);return t?16+Qt(t):16;case 5:return 2*e.stringValue.length;case 6:return Tt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Qt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return dt(e.fields,(e,n)=>{t+=e.length+Qt(n)}),t}(e.mapValue);default:throw R(13486,{value:e})}}function Yt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Jt(e){return!!e&&"integerValue"in e}function Xt(e){return!!e&&"arrayValue"in e}function $t(e){return!!e&&"nullValue"in e}function Zt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function en(e){return!!e&&"mapValue"in e}function tn(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Ot])||void 0===t?void 0:t.stringValue)===Mt}function nn(e){if(e.geoPointValue)return{geoPointValue:(0,s.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,s.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return dt(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=nn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nn(e.arrayValue.values[n]);return t}return(0,s.A)({},e)}function rn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Lt}class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!en(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nn(t)}setAll(e){let t=se.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=nn(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());en(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];en(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){dt(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new sn(nn(this.value))}}function an(e){const t=[];return dt(e.fields,(e,n)=>{const r=new se([e]);if(en(n)){const e=an(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new yt(t)}class on{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new on(e,0,we.min(),we.min(),we.min(),sn.empty(),0)}static newFoundDocument(e,t,n,r){return new on(e,1,t,we.min(),n,r,0)}static newNoDocument(e,t){return new on(e,2,t,we.min(),we.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,we.min(),we.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ln{constructor(e,t){this.position=e,this.inclusive=t}}function cn(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?ae.comparator(ae.fromName(a.referenceValue),n.key):qt(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function un(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zt(e.position[n],t.position[n]))return!1;return!0}class dn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function hn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class fn{}class pn extends fn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Sn(e,t,n):"array-contains"===t?new En(e,n):"in"===t?new Cn(e,n):"not-in"===t?new An(e,n):"array-contains-any"===t?new In(e,n):new pn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _n(e,n):new Tn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(qt(t,this.value)):null!==t&&Vt(this.value)===Vt(t)&&this.matchesComparison(qt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return R(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends fn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mn(e,t)}matches(e){return gn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gn(e){return"and"===e.op}function vn(e){return yn(e)&&gn(e)}function yn(e){for(const t of e.filters)if(t instanceof mn)return!1;return!0}function wn(e){if(e instanceof pn)return e.field.canonicalString()+e.op.toString()+Kt(e.value);if(vn(e))return e.filters.map(e=>wn(e)).join(",");{const t=e.filters.map(e=>wn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function bn(e,t){return e instanceof pn?function(e,t){return t instanceof pn&&e.op===t.op&&e.field.isEqual(t.field)&&zt(e.value,t.value)}(e,t):e instanceof mn?function(e,t){return t instanceof mn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bn(n,t.filters[r]),!0)}(e,t):void R(19439)}function xn(e){return e instanceof pn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Kt(e.value))}(e):e instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(xn).join(" ,")+"}"}(e):"Filter"}class Sn extends pn{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class _n extends pn{constructor(e,t){super(e,"in",t),this.keys=kn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Tn extends pn{constructor(e,t){super(e,"not-in",t),this.keys=kn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ae.fromName(e.referenceValue))}class En extends pn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xt(t)&&Bt(t.arrayValue,this.value)}}class Cn extends pn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bt(this.value.arrayValue,t)}}class An extends pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Bt(this.value.arrayValue,t)}}class In extends pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Bt(this.value.arrayValue,e))}}class Nn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function jn(e){return new Nn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Rn(e){const t=O(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>wn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),De(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Kt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Kt(e)).join(",")),t.Te=e}return t.Te}function Pn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!un(e.startAt,t.startAt)&&un(e.endAt,t.endAt)}function Dn(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class On{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ln(e,t,n,r,i,s,a,o){return new On(e,t,n,r,i,s,a,o)}function Un(e){return new On(e)}function Mn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fn(e){return null!==e.collectionGroup}function Vn(e){const t=O(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new gt(se.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new dn(r,n))}),e.has(se.keyField().canonicalString())||t.Ie.push(new dn(se.keyField(),n))}return t.Ie}function zn(e){const t=O(e);return t.Ee||(t.Ee=Bn(t,Vn(e))),t.Ee}function Bn(e,t){if("F"===e.limitType)return jn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new dn(e.field,t)});const n=e.endAt?new ln(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ln(e.startAt.position,e.startAt.inclusive):null;return jn(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qn(e,t){const n=e.filters.concat([t]);return new On(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hn(e,t,n){return new On(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wn(e,t){return Pn(zn(e),zn(t))&&e.limitType===t.limitType}function Kn(e){return"".concat(Rn(zn(e)),"|lt:").concat(e.limitType)}function Gn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>xn(e)).join(", "),"]")),De(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Kt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Kt(e)).join(",")),"Target(".concat(t,")")}(zn(e)),"; limitType=").concat(e.limitType,")")}function Qn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ae.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Vn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vn(e),t))&&!(e.endAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vn(e),t))}(e,t)}function Yn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jn(e){return(t,n)=>{let r=!1;for(const i of Vn(e)){const e=Xn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xn(e,t,n){const r=e.field.isKeyField()?ae.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?qt(r,i):R(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return R(19790,{direction:e.dir})}}class $n{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){dt(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ht(this.inner)}size(){return this.innerSize}}const Zn=new ft(ae.comparator);function er(){return Zn}const tr=new ft(ae.comparator);function nr(){let e=tr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function rr(e){let t=tr;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ir(){return ar()}function sr(){return ar()}function ar(){return new $n(e=>e.toString(),(e,t)=>e.isEqual(t))}const or=new ft(ae.comparator),lr=new gt(ae.comparator);function cr(){let e=lr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ur=new gt(Y);function dr(){return ur}function hr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oe(t)?"-0":t}}function fr(e){return{integerValue:""+e}}function pr(e,t){return Le(t)?fr(t):hr(e,t)}class mr{constructor(){this._=void 0}}function gr(e,t,n){return e instanceof wr?function(e,t){const n={fields:{[Et]:{stringValue:kt},[At]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&It(t)&&(t=Nt(t)),t&&(n.fields[Ct]=t),{mapValue:n}}(n,t):e instanceof br?xr(e,t):e instanceof Sr?_r(e,t):function(e,t){const n=yr(e,t),r=kr(n)+kr(e.Ae);return Jt(n)&&Jt(e.Ae)?fr(r):hr(e.serializer,r)}(e,t)}function vr(e,t,n){return e instanceof br?xr(e,t):e instanceof Sr?_r(e,t):n}function yr(e,t){return e instanceof Tr?function(e){return Jt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class wr extends mr{}class br extends mr{constructor(e){super(),this.elements=e}}function xr(e,t){const n=Er(t);for(const r of e.elements)n.some(e=>zt(e,r))||n.push(r);return{arrayValue:{values:n}}}class Sr extends mr{constructor(e){super(),this.elements=e}}function _r(e,t){let n=Er(t);for(const r of e.elements)n=n.filter(e=>!zt(e,r));return{arrayValue:{values:n}}}class Tr extends mr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function kr(e){return _t(e.integerValue||e.doubleValue)}function Er(e){return Xt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cr{constructor(e,t){this.field=e,this.transform=t}}class Ar{constructor(e,t){this.version=e,this.transformResults=t}}class Ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class jr{}function Rr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Br(e.key,Ir.none()):new Ur(e.key,e.data,Ir.none());{const n=e.data,r=sn.empty();let i=new gt(se.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Mr(e.key,r,new yt(i.toArray()),Ir.none())}}function Pr(e,t,n){e instanceof Ur?function(e,t,n){const r=e.value.clone(),i=Vr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Mr?function(e,t,n){if(!Nr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Vr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Fr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Dr(e,t,n,r){return e instanceof Ur?function(e,t,n,r){if(!Nr(e.precondition,t))return n;const i=e.value.clone(),s=zr(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Mr?function(e,t,n,r){if(!Nr(e.precondition,t))return n;const i=zr(e.fieldTransforms,r,t),s=t.data;return s.setAll(Fr(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Nr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Or(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=yr(r.transform,e||null);null!=i&&(null===n&&(n=sn.empty()),n.set(r.field,i))}return n||null}function Lr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ee(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof br&&t instanceof br||e instanceof Sr&&t instanceof Sr?ee(e.elements,t.elements,zt):e instanceof Tr&&t instanceof Tr?zt(e.Ae,t.Ae):e instanceof wr&&t instanceof wr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ur extends jr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mr extends jr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Vr(e,t,n){const r=new Map;D(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,vr(a,o,n[i]))}return r}function zr(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,gr(e,s,t))}return r}class Br extends jr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qr extends jr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Pr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Dr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Dr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=sr();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Rr(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(we.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cr())}isEqual(e){return this.batchId===e.batchId&&ee(this.mutations,e.mutations,(e,t)=>Lr(e,t))&&ee(this.baseMutations,e.baseMutations,(e,t)=>Lr(e,t))}}class Wr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){D(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=or;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Wr(e,t,n,r)}}class Kr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Gr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qr,Yr;function Jr(e){switch(e){case L.OK:return R(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return R(15467,{code:e})}}function Xr(e){if(void 0===e)return I("GRPC error has no .code"),L.UNKNOWN;switch(e){case Qr.OK:return L.OK;case Qr.CANCELLED:return L.CANCELLED;case Qr.UNKNOWN:return L.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return L.INTERNAL;case Qr.UNAVAILABLE:return L.UNAVAILABLE;case Qr.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Qr.NOT_FOUND:return L.NOT_FOUND;case Qr.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Qr.ABORTED:return L.ABORTED;case Qr.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Qr.DATA_LOSS:return L.DATA_LOSS;default:return R(39323,{code:e})}}(Yr=Qr||(Qr={}))[Yr.OK=0]="OK",Yr[Yr.CANCELLED=1]="CANCELLED",Yr[Yr.UNKNOWN=2]="UNKNOWN",Yr[Yr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yr[Yr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yr[Yr.NOT_FOUND=5]="NOT_FOUND",Yr[Yr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yr[Yr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yr[Yr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yr[Yr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yr[Yr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yr[Yr.ABORTED=10]="ABORTED",Yr[Yr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yr[Yr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yr[Yr.INTERNAL=13]="INTERNAL",Yr[Yr.UNAVAILABLE=14]="UNAVAILABLE",Yr[Yr.DATA_LOSS=15]="DATA_LOSS";let $r=null;function Zr(){return new TextEncoder}const ei=new r([4294967295,4294967295],0);function ti(e){const t=Zr().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function ni(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([s,a],0)]}class ri{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ii("Invalid padding: ".concat(t));if(n<0)throw new ii("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ii("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ii("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(ei)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ti(e),[n,r]=ni(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ri(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=ti(e),[n,r]=ni(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ii extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class si{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ai.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new si(we.min(),r,new ft(Y),er(),cr())}}class ai{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ai(n,t,cr(),cr(),cr())}}class oi{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class li{constructor(e,t){this.targetId=e,this.Ce=t}}class ci{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ui{constructor(){this.ve=0,this.Fe=fi(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=cr(),t=cr(),n=cr();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:R(38017,{changeType:i})}}),new ai(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=fi()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,D(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class di{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=hi(),this.He=hi(),this.Ye=new ft(Y)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:R(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Dn(s))if(0===n){const e=new ae(s.path);this.et(t,e,on.newNoDocument(e,we.min()))}else D(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=$r)||void 0===i||i.lt(function(e,t,n,r,i,s,a,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Tt(n).toUint8Array()}catch(e){if(e instanceof wt)return N("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ri(s,r,i)}catch(e){return N(e instanceof ii?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Dn(i.target)){const t=new ae(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,on.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=cr();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new si(e,t,this.Ye,this.je,n);return this.je=er(),this.Je=hi(),this.He=hi(),this.Ye=new ft(Y),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ui,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gt(Y),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gt(Y),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||A("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ui),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hi(){return new ft(ae.comparator)}function fi(){return new ft(ae.comparator)}const pi={asc:"ASCENDING",desc:"DESCENDING"},mi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gi={and:"AND",or:"OR"};class vi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yi(e,t){return e.useProto3Json||De(t)?t:{value:t}}function wi(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function xi(e,t){return wi(e,t.toTimestamp())}function Si(e){return D(!!e,49232),we.fromTimestamp(function(e){const t=St(e);return new ye(t.seconds,t.nanos)}(e))}function _i(e,t){return Ti(e,t).canonicalString()}function Ti(e,t){const n=function(e){return new re(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ki(e){const t=re.fromString(e);return D(Wi(t),10190,{key:t.toString()}),t}function Ei(e,t){return _i(e.databaseId,t.path)}function Ci(e,t){const n=ki(t);if(n.get(1)!==e.databaseId.projectId)throw new U(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new U(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ae(ji(n))}function Ai(e,t){return _i(e.databaseId,t)}function Ii(e){const t=ki(e);return 4===t.length?re.emptyPath():ji(t)}function Ni(e){return new re(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ji(e){return D(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ri(e,t,n){return{name:Ei(e,t),fields:n.value.mapValue.fields}}function Pi(e,t){let n;if(t instanceof Ur)n={update:Ri(e,t.key,t.value)};else if(t instanceof Br)n={delete:Ei(e,t.key)};else if(t instanceof Mr)n={update:Ri(e,t.key,t.data),updateMask:Hi(t.fieldMask)};else{if(!(t instanceof qr))return R(16599,{Vt:t.type});n={verify:Ei(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof wr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof br)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Tr)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw R(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:xi(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:R(27497)}(e,t.precondition)),n}function Di(e,t){return{documents:[Ai(e,t.path)]}}function Oi(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ai(e,i);const s=function(e){if(0!==e.length)return qi(mn.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:zi(e.field),direction:Mi(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=yi(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Li(e){let t=Ii(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){D(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ui(e);return t instanceof mn&&vn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new dn(Bi(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,De(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ln(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ln(n,t)}(n.endAt)),Ln(t,i,a,s,o,"F",l,c)}function Ui(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Bi(e.unaryFilter.field);return pn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Bi(e.unaryFilter.field);return pn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bi(e.unaryFilter.field);return pn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Bi(e.unaryFilter.field);return pn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return R(61313);default:return R(60726)}}(e):void 0!==e.fieldFilter?function(e){return pn.create(Bi(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return R(58110);default:return R(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return mn.create(e.compositeFilter.filters.map(e=>Ui(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return R(1026)}}(e.compositeFilter.op))}(e):R(30097,{filter:e})}function Mi(e){return pi[e]}function Fi(e){return mi[e]}function Vi(e){return gi[e]}function zi(e){return{fieldPath:e.canonicalString()}}function Bi(e){return se.fromServerFormat(e.fieldPath)}function qi(e){return e instanceof pn?function(e){if("=="===e.op){if(Zt(e.value))return{unaryFilter:{field:zi(e.field),op:"IS_NAN"}};if($t(e.value))return{unaryFilter:{field:zi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zt(e.value))return{unaryFilter:{field:zi(e.field),op:"IS_NOT_NAN"}};if($t(e.value))return{unaryFilter:{field:zi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zi(e.field),op:Fi(e.op),value:e.value}}}(e):e instanceof mn?function(e){const t=e.getFilters().map(e=>qi(e));return 1===t.length?t[0]:{compositeFilter:{op:Vi(e.op),filters:t}}}(e):R(54877,{filter:e})}function Hi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Wi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ki{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:we.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:we.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bt.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gi{constructor(e){this.yt=e}}function Qi(e){const t=Li({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hn(t,t.limit,"L"):t}class Yi{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(_t(e.integerValue));else if("doubleValue"in e){const n=_t(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Oe(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=St(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Tt(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?rn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):tn(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):R(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Ft,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(_t(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Yi.Kt=new Yi;class Ji{constructor(){this.Cn=new Xi}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getIndexType(e,t){return Ie.resolve(0)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,t){return Ie.resolve(Te.min())}getMinOffsetFromCollectionGroup(e,t){return Ie.resolve(Te.min())}updateCollectionGroup(e,t,n){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}}class Xi{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gt(re.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new gt(re.comparator)).toArray()}}new Uint8Array(0);const $i={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zi=41943040;class es{static withCacheSize(e){return new es(e,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}es.DEFAULT_COLLECTION_PERCENTILE=10,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,es.DEFAULT=new es(Zi,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),es.DISABLED=new es(-1,0,0);class ts{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ts(0)}static cr(){return new ts(-1)}}const ns="LruGarbageCollector",rs=1048576;function is(e,t){let[n,r]=e,[i,s]=t;const a=Y(n,i);return 0===a?Y(r,s):a}class ss{constructor(e){this.Ir=e,this.buffer=new gt(is),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();is(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class as{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){A(ns,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){je(e)?A(ns,"Ignoring IndexedDB error during garbage collection: ",e):await Ae(e)}await this.Vr(3e5)})}}class os{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ie.resolve(Re.ce);const n=new ss(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve($i)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),$i):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(A("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),C()<=l.$b.DEBUG&&A("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-o)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),Ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function ls(e,t){return new os(e,t)}class cs{constructor(){this.changes=new $n(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ie.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class us{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ds{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Dr(n.mutation,e,yt.empty(),ye.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,cr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cr();const r=ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=nr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ir();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,cr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=er();const s=ar(),a=ar();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Mr)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Dr(a.mutation,t,a.mutation.getFieldMask(),ye.now())):s.set(t.key,yt.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new us(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ar();let r=new ft((e,t)=>e-t),i=cr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||yt.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||cr()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=sr();l.forEach(e=>{if(!i.has(e)){const r=Rr(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Ie.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ie.resolve(ir());let a=be,o=i;return s.next(t=>Ie.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Ie.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,cr())).next(e=>({batchId:a,changes:rr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(e=>{let t=nr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=nr();return this.indexManager.getCollectionParents(e,i).next(a=>Ie.forEach(a,a=>{const o=function(e,t){return new On(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,on.newInvalidDocument(r)))});let n=nr();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Dr(s.mutation,r,yt.empty(),ye.now()),Qn(t,r)&&(n=n.insert(e,r))}),n})}}class hs{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Si(e.createTime)}}(t)),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Qi(e.bundledQuery),readTime:Si(e.readTime)}}(t)),Ie.resolve()}}class fs{constructor(){this.overlays=new ft(ae.comparator),this.qr=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ir();return Ie.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ie.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ie.resolve()}getOverlaysForCollection(e,t,n){const r=ir(),i=t.length+1,s=new ae(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ie.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ft((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ir(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ir(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Ie.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Kr(t,n));let i=this.qr.get(t);void 0===i&&(i=cr(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class ps{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ie.resolve()}}class ms{constructor(){this.Qr=new gt(gs.$r),this.Ur=new gt(gs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new gs(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new gs(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ae(new re([])),n=new gs(t,e),r=new gs(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new re([])),n=new gs(t,e),r=new gs(t,e+1);let i=cr();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new gs(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class gs{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||Y(e.Yr,t.Yr)}static Kr(e,t){return Y(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}class vs{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gt(gs.$r)}checkEmpty(e){return Ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Hr(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new gs(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ie.resolve(s)}lookupMutationBatch(e,t){return Ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Ie.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(0===this.mutationQueue.length?Pe:this.tr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new gs(t,0),r=new gs(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Ie.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gt(Y);return t.forEach(e=>{const t=new gs(e,0),r=new gs(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ie.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ae.isDocumentKey(i)||(i=i.child(""));const s=new gs(new ae(i),0);let a=new gt(Y);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),Ie.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){D(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ie.forEach(t.mutations,r=>{const i=new gs(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new gs(t,0),r=this.Zr.firstAfterOrEqual(n);return Ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ys{constructor(e){this.ri=e,this.docs=new ft(ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ie.resolve(n?n.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let n=er();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():on.newInvalidDocument(e))}),Ie.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=er();const s=t.path,a=new ae(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ke(_e(a),n)<=0||(r.has(a.key)||Qn(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Ie.resolve(i)}getAllFromCollectionGroup(e,t,n,r){R(9500)}ii(e,t){return Ie.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ws(this)}getSize(e){return Ie.resolve(this.size)}}class ws extends cs{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class bs{constructor(e){this.persistence=e,this.si=new $n(e=>Rn(e),Pn),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new ms,this.targetCount=0,this.ai=ts.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ts(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.Pr(t),Ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ie.waitFor(i).next(()=>r)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ie.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ie.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ie.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ie.resolve(n)}containsKey(e,t){return Ie.resolve(this._i.containsKey(t))}}class xs{constructor(e,t){this.ui={},this.overlays={},this.ci=new Re(0),this.li=!1,this.li=!0,this.hi=new ps,this.referenceDelegate=e(this),this.Pi=new bs(this),this.indexManager=new Ji,this.remoteDocumentCache=function(e){return new ys(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Gi(t),this.Ii=new hs(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fs,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new vs(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){A("MemoryPersistence","Starting transaction:",e);const r=new Ss(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ie.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Ss extends Ce{constructor(e){super(),this.currentSequenceNumber=e}}class _s{constructor(e){this.persistence=e,this.Ri=new ms,this.Vi=null}static mi(e){return new _s(e)}get fi(){if(this.Vi)return this.Vi;throw R(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ie.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.fi,n=>{const r=ae.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,we.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ts{constructor(e,t){this.persistence=e,this.pi=new $n(e=>Me(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ls(this,t)}static mi(e,t){return new Ts(e,t)}Ei(){}di(e){return Ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ie.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ie.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,we.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qt(e.data.value)),t}br(e,t,n){return Ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ie.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ks{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=cr(),r=cr();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ks(e,t.fromCache,n,r)}}class Es{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Cs{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,c.nr)()?8:Ne((0,c.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Es;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(C()<=l.$b.DEBUG&&A("QueryEngine","SDK will not create cache indexes for query:",Gn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ie.resolve()):(C()<=l.$b.DEBUG&&A("QueryEngine","Query:",Gn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(C()<=l.$b.DEBUG&&A("QueryEngine","The SDK decides to create cache indexes for query:",Gn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(t))):Ie.resolve())}ys(e,t){if(Mn(t))return Ie.resolve(null);let n=zn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Hn(t,null,"F"),n=zn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=cr(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Hn(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Mn(t)||r.isEqual(we.min())?Ie.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Ie.resolve(null):(C()<=l.$b.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gn(t)),this.vs(e,s,t,Se(r,be)).next(e=>e))})}Ds(e,t){let n=new gt(Jn(e));return t.forEach((t,r)=>{Qn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return C()<=l.$b.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",Gn(t)),this.ps.getDocumentsMatchingQuery(e,t,Te.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const As="LocalStore",Is=3e8;class Ns{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ft(Y),this.xs=new $n(e=>Rn(e),Pn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ds(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function js(e,t,n,r){return new Ns(e,t,n,r)}async function Rs(e,t){const n=O(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=cr();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Ps(e){const t=O(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Ds(e,t,n){let r=cr(),i=cr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=er();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(we.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):A(As,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Os(e,t){const n=O(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Pe),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ls(e,t){const n=O(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Ie.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Ki(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Us(e,t,n){const r=O(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!je(e))throw e;A(As,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Ms(e,t,n){const r=O(e);let i=we.min(),s=cr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=O(e),i=r.xs.get(n);return void 0!==i?Ie.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,zn(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:we.min(),n?s:cr())).next(e=>(Fs(r,Yn(t),e),{documents:e,Qs:s})))}function Fs(e,t,n){let r=e.Os.get(t)||we.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Vs{constructor(){this.activeTargetIds=dr()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zs{constructor(){this.Mo=new Vs,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vs,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bs{Oo(e){}shutdown(){}}const qs="ConnectivityMonitor";class Hs{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){A(qs,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){A(qs,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ws=null;function Ks(){return null===Ws?Ws=268435456+Math.round(2147483648*Math.random()):Ws++,"0x"+Ws.toString(16)}const Gs="RestConnection",Qs={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ys{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Pt?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Ks(),a=this.zo(e,t.toUriEncodedString());A(Gs,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),u=(0,c.zJ)(l);return this.Jo(e,a,o,n,u).then(t=>(A(Gs,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw N(Gs,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+k,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Qs[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Js{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Xs="WebChannelConnection";class $s extends Ys{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Ks();return new Promise((i,a)=>{const o=new h;o.setWithCredentials(!0),o.listenOnce(p.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case m.NO_ERROR:const n=o.getResponseJson();A(Xs,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case m.TIMEOUT:A(Xs,"RPC '".concat(e,"' ").concat(s," timed out")),a(new U(L.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const r=o.getStatus();if(A(Xs,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(t)>=0?t:L.UNKNOWN}(n.status);a(new U(e,n.message))}else a(new U(L.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new U(L.UNAVAILABLE,"Connection failed."));break;default:R(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{A(Xs,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);A(Xs,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Ks(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=w(),a=y(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");A(Xs,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const p=new Js({Yo:t=>{h?A(Xs,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(A(Xs,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),A(Xs,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,f.EventType.OPEN,()=>{h||(A(Xs,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.o_())}),m(u,f.EventType.CLOSE,()=>{h||(h=!0,A(Xs,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.a_(),this.E_(u))}),m(u,f.EventType.ERROR,t=>{h||(h=!0,N(Xs,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),p.a_(new U(L.UNAVAILABLE,"The operation could not be completed")))}),m(u,f.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];D(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){A(Xs,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Qr[e];if(void 0!==t)return Xr(t)}(t),i=a.message;void 0===n&&(n=L.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,p.a_(new U(n,i)),u.close()}else A(Xs,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.u_(i)}}),m(a,v.STAT_EVENT,t=>{t.stat===g.PROXY?A(Xs,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===g.NOPROXY&&A(Xs,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Zs(){return"undefined"!=typeof document?document:null}function ea(e){return new vi(e,!0)}class ta{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&A("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const na="PersistentStream";class ra{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ta(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(I(t.toString()),I("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new U(L.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return A(na,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(A(na,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ia extends ra{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:R(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(D(void 0===t||"string"==typeof t,58123),bt.fromBase64String(t||"")):(D(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),bt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?L.UNKNOWN:Xr(e.code);return new U(t,e.message||"")}(a);n=new ci(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ci(e,r.document.name),s=Si(r.document.updateTime),a=r.document.createTime?Si(r.document.createTime):we.min(),o=new sn({mapValue:{fields:r.document.fields}}),l=on.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new oi(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ci(e,r.document),s=r.readTime?Si(r.readTime):we.min(),a=on.newNoDocument(i,s),o=r.removedTargetIds||[];n=new oi([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ci(e,r.document),s=r.removedTargetIds||[];n=new oi([],s,i,null)}else{if(!("filter"in t))return R(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Gr(r,i),a=e.targetId;n=new li(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return we.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?we.min():t.readTime?Si(t.readTime):we.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ni(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Dn(r)?{documents:Di(e,r)}:{query:Oi(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=bi(e,t.resumeToken);const r=yi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(we.min())>0){n.readTime=wi(e,t.snapshotVersion.toTimestamp());const r=yi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return R(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ni(this.serializer),t.removeTarget=e,this.q_(t)}}class sa extends ra{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return D(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,D(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){D(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(D(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Si(e.updateTime):Si(t);return n.isEqual(we.min())&&(n=Si(t)),new Ar(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Si(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ni(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Pi(this.serializer,e))};this.q_(t)}}class aa{}class oa extends aa{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new U(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,Ti(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new U(L.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,Ti(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new U(L.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class la{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(I(t),this.aa=!1):A("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const ca="RemoteStore";class ua{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{wa(this)&&(A(ca,"Restarting streams for network reachability change."),await async function(e){const t=O(e);t.Ea.add(4),await ha(t),t.Ra.set("Unknown"),t.Ea.delete(4),await da(t)}(this))})}),this.Ra=new la(n,r)}}async function da(e){if(wa(e))for(const t of e.da)await t(!0)}async function ha(e){for(const t of e.da)await t(!1)}function fa(e,t){const n=O(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ya(n)?va(n):Ma(n).O_()&&ma(n,t))}function pa(e,t){const n=O(e),r=Ma(n);n.Ia.delete(t),r.O_()&&ga(n,t),0===n.Ia.size&&(r.O_()?r.L_():wa(n)&&n.Ra.set("Unknown"))}function ma(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(we.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ma(e).Y_(t)}function ga(e,t){e.Va.Ue(t),Ma(e).Z_(t)}function va(e){e.Va=new di({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Ma(e).start(),e.Ra.ua()}function ya(e){return wa(e)&&!Ma(e).x_()&&e.Ia.size>0}function wa(e){return 0===O(e).Ea.size}function ba(e){e.Va=void 0}async function xa(e){e.Ra.set("Online")}async function Sa(e){e.Ia.forEach((t,n)=>{ma(e,t)})}async function _a(e,t){ba(e),ya(e)?(e.Ra.ha(t),va(e)):e.Ra.set("Unknown")}async function Ta(e,t,n){if(e.Ra.set("Online"),t instanceof ci&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){A(ca,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ka(e,n)}else if(t instanceof oi?e.Va.Ze(t):t instanceof li?e.Va.st(t):e.Va.tt(t),!n.isEqual(we.min()))try{const t=await Ps(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(bt.EMPTY_BYTE_STRING,r.snapshotVersion)),ga(e,t);const i=new Ki(r.target,t,n,r.sequenceNumber);ma(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){A(ca,"Failed to raise snapshot:",t),await ka(e,t)}}async function ka(e,t,n){if(!je(t))throw t;e.Ea.add(1),await ha(e),e.Ra.set("Offline"),n||(n=()=>Ps(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{A(ca,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await da(e)})}function Ea(e,t){return t().catch(n=>ka(e,n,t))}async function Ca(e){const t=O(e),n=Fa(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pe;for(;Aa(t);)try{const e=await Os(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Ia(t,e)}catch(e){await ka(t,e)}Na(t)&&ja(t)}function Aa(e){return wa(e)&&e.Ta.length<10}function Ia(e,t){e.Ta.push(t);const n=Fa(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Na(e){return wa(e)&&!Fa(e).x_()&&e.Ta.length>0}function ja(e){Fa(e).start()}async function Ra(e){Fa(e).ra()}async function Pa(e){const t=Fa(e);for(const n of e.Ta)t.ea(n.mutations)}async function Da(e,t,n){const r=e.Ta.shift(),i=Wr.from(r,t,n);await Ea(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ca(e)}async function Oa(e,t){t&&Fa(e).X_&&await async function(e,t){if(function(e){return Jr(e)&&e!==L.ABORTED}(t.code)){const n=e.Ta.shift();Fa(e).B_(),await Ea(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ca(e)}}(e,t),Na(e)&&ja(e)}async function La(e,t){const n=O(e);n.asyncQueue.verifyOperationInProgress(),A(ca,"RemoteStore received new credentials");const r=wa(n);n.Ea.add(3),await ha(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await da(n)}async function Ua(e,t){const n=O(e);t?(n.Ea.delete(2),await da(n)):t||(n.Ea.add(2),await ha(n),n.Ra.set("Unknown"))}function Ma(e){return e.ma||(e.ma=function(e,t,n){const r=O(e);return r.sa(),new ia(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:xa.bind(null,e),t_:Sa.bind(null,e),r_:_a.bind(null,e),H_:Ta.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ya(e)?va(e):e.Ra.set("Unknown")):(await e.ma.stop(),ba(e))})),e.ma}function Fa(e){return e.fa||(e.fa=function(e,t,n){const r=O(e);return r.sa(),new sa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ra.bind(null,e),r_:Oa.bind(null,e),ta:Pa.bind(null,e),na:Da.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ca(e)):(await e.fa.stop(),e.Ta.length>0&&(A(ca,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Va{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Va(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new U(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function za(e,t){if(I("AsyncQueue","".concat(t,": ").concat(e)),je(e))return new U(L.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ba{static emptySet(e){return new Ba(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(e,t)=>ae.comparator(e.key,t.key),this.keyedMap=nr(),this.sortedSet=new ft(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ba))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ba;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class qa{constructor(){this.ga=new ft(ae.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):R(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ha{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Ha(e,t,Ba.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Wa{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ka{constructor(){this.queries=Ga(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=O(e),r=n.queries;n.queries=Ga(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new U(L.ABORTED,"Firestore shutting down"))}}function Ga(){return new $n(e=>Kn(e),Wn)}async function Qa(e,t){const n=O(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Wa,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=za(e,"Initialization of query '".concat(Gn(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&$a(n)}async function Ya(e,t){const n=O(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ja(e,t){const n=O(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&$a(n)}function Xa(e,t,n){const r=O(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function $a(e){e.Ca.forEach(e=>{e.next()})}var Za,eo;(eo=Za||(Za={})).Ma="default",eo.Cache="cache";class to{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ha(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Za.Cache}}class no{constructor(e){this.key=e}}class ro{constructor(e){this.key=e}}class io{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=cr(),this.mutatedKeys=cr(),this.eu=Jn(e),this.tu=new Ba(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new qa,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Qn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return R(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new Ha(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qa,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=cr(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new ro(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new no(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=cr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ha.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const so="SyncEngine";class ao{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class oo{constructor(e){this.key=e,this.hu=!1}}class lo{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new $n(e=>Kn(e),Wn),this.Iu=new Map,this.Eu=new Set,this.du=new ft(ae.comparator),this.Au=new Map,this.Ru=new ms,this.Vu={},this.mu=new Map,this.fu=ts.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function co(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=jo(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await ho(r,t,n,!0),i}async function uo(e,t){const n=jo(e);await ho(n,t,!0,!1)}async function ho(e,t,n,r){const i=await Ls(e.localStore,zn(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await fo(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&fa(e.remoteStore,i),o}async function fo(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Ms(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return ko(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await Ms(e.localStore,t,!0),a=new io(t,s.Qs),o=a.ru(s.documents),l=ai.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);ko(e,n,c.au);const u=new ao(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function po(e,t,n){const r=O(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Wn(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Us(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pa(r.remoteStore,i.targetId),_o(r,i.targetId)}).catch(Ae)):(_o(r,i.targetId),await Us(r.localStore,i.targetId,!0))}async function mo(e,t){const n=O(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pa(n.remoteStore,r.targetId))}async function go(e,t){const n=O(e);try{const e=await function(e,t){const n=O(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(bt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Is||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=er(),l=cr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Ds(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(we.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Ie.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(D(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?D(r.hu,14607):e.removedDocuments.size>0&&(D(r.hu,42227),r.hu=!1))}),await Ao(n,e,t)}catch(e){await Ae(e)}}function vo(e,t,n){const r=O(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=O(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&$a(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function yo(e,t,n){const r=O(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new ft(ae.comparator);e=e.insert(s,on.newNoDocument(s,we.min()));const n=cr().add(s),i=new si(we.min(),new Map,new ft(Y),e,n);await go(r,i),r.du=r.du.remove(s),r.Au.delete(t),Co(r)}else await Us(r.localStore,t,!1).then(()=>_o(r,t,n)).catch(Ae)}async function wo(e,t){const n=O(e),r=t.batch.batchId;try{const e=await function(e,t){const n=O(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Ie.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);D(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);So(n,r,null),xo(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ao(n,e)}catch(e){await Ae(e)}}async function bo(e,t,n){const r=O(e);try{const e=await function(e,t){const n=O(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(D(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);So(r,t,n),xo(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ao(r,e)}catch(n){await Ae(n)}}function xo(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function So(e,t,n){const r=O(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function _o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||To(e,t)})}function To(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(pa(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Co(e))}function ko(e,t,n){for(const r of n)r instanceof no?(e.Ru.addReference(r.key,t),Eo(e,r)):r instanceof ro?(A(so,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||To(e,r.key)):R(19791,{wu:r})}function Eo(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(A(so,"New document in limbo: "+n),e.Eu.add(r),Co(e))}function Co(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ae(re.fromString(t)),r=e.fu.next();e.Au.set(r,new oo(n)),e.du=e.du.insert(n,r),fa(e.remoteStore,new Ki(zn(Un(n.path)),r,"TargetPurposeLimboResolution",Re.ce))}}async function Ao(e,t,n){const r=O(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=ks.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=O(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ie.forEach(t,t=>Ie.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ie.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!je(e))throw e;A(As,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Io(e,t){const n=O(e);if(!n.currentUser.isEqual(t)){A(so,"User change. New user:",t.toKey());const e=await Rs(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new U(L.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ao(n,e.Ls)}}function No(e,t){const n=O(e),r=n.Au.get(t);if(r&&r.hu)return cr().add(r.key);{let e=cr();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function jo(e){const t=O(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=go.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=No.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yo.bind(null,t),t.Pu.H_=Ja.bind(null,t.eventManager),t.Pu.yu=Xa.bind(null,t.eventManager),t}function Ro(e){const t=O(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wo.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bo.bind(null,t),t}class Po{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ea(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return js(this.persistence,new Cs,e.initialUser,this.serializer)}Cu(e){return new xs(_s.mi,this.serializer)}Du(e){return new zs}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Po.provider={build:()=>new Po};class Do extends Po{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){D(this.persistence.referenceDelegate instanceof Ts,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new as(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new xs(e=>Ts.mi(e,t),this.serializer)}}class Oo{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>vo(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Io.bind(null,this.syncEngine),await Ua(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ka}createDatastore(e){const t=ea(e.databaseInfo.databaseId),n=function(e){return new $s(e)}(e.databaseInfo);return function(e,t,n,r){return new oa(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ua(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>vo(this.syncEngine,e,0),Hs.v()?new Hs:new Bs)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new lo(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=O(e);A(ca,"RemoteStore shutting down."),t.Ea.add(5),await ha(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Oo.provider={build:()=>new Oo};class Lo{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):I("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Uo="FirestoreClient";class Mo{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=T.UNAUTHENTICATED,this.clientId=Q.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{A(Uo,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(A(Uo,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=za(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Fo(e,t){e.asyncQueue.verifyOperationInProgress(),A(Uo,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Rs(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Vo(e,t){e.asyncQueue.verifyOperationInProgress();const n=await zo(e);A(Uo,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>La(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>La(t.remoteStore,n)),e._onlineComponents=t}async function zo(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){A(Uo,"Using user provided OfflineComponentProvider");try{await Fo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===L.FAILED_PRECONDITION||e.code===L.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;N("Error using user provided cache. Falling back to memory cache: "+n),await Fo(e,new Po)}}else A(Uo,"Using default OfflineComponentProvider"),await Fo(e,new Do(void 0));return e._offlineComponents}async function Bo(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(A(Uo,"Using user provided OnlineComponentProvider"),await Vo(e,e._uninitializedComponentsProvider._online)):(A(Uo,"Using default OnlineComponentProvider"),await Vo(e,new Oo))),e._onlineComponents}function qo(e){return Bo(e).then(e=>e.syncEngine)}async function Ho(e){const t=await Bo(e),n=t.eventManager;return n.onListen=co.bind(null,t.syncEngine),n.onUnlisten=po.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=uo.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=mo.bind(null,t.syncEngine),n}function Wo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Lo({next:n=>{s.Nu(),t.enqueueAndForget(()=>Ya(e,a)),n.fromCache&&"server"===r.source?i.reject(new U(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new to(n,s,{includeMetadataChanges:!0,qa:!0});return Qa(e,a)}(await Ho(e),e.asyncQueue,t,n,r)),r.promise}function Ko(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Go=new Map,Qo="firestore.googleapis.com",Yo=!0;class Jo{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new U(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qo,this.ssl=Yo}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Yo;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Zi;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<rs)throw new U(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new U(L.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ko(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new U(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new U(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new U(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xo{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jo({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new U(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jo(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new V;switch(e.type){case"firstParty":return new H(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new U(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Go.get(e);t&&(A("ComponentProvider","Removing Datastore"),Go.delete(e),t.terminate())}(this),Promise.resolve()}}class $o{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $o(this.firestore,e,this._query)}}class Zo{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new el(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zo(this.firestore,e,this._key)}toJSON(){return{type:Zo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(me(t,Zo._jsonSchema))return new Zo(e,n||null,new ae(re.fromString(t.referencePath)))}}Zo._jsonSchemaVersion="firestore/documentReference/1.0",Zo._jsonSchema={type:pe("string",Zo._jsonSchemaVersion),referencePath:pe("string")};class el extends $o{constructor(e,t,n){super(e,t,Un(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zo(this.firestore,null,new ae(e))}withConverter(e){return new el(this.firestore,e,this._path)}}function tl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),oe("collection","path",t),e instanceof Xo){const n=re.fromString(t,...r);return ce(n),new el(e,null,n)}{if(!(e instanceof Zo||e instanceof el))throw new U(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return ce(n),new el(e.firestore,null,n)}}function nl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),1===arguments.length&&(t=Q.newId()),oe("doc","path",t),e instanceof Xo){const n=re.fromString(t,...r);return le(n),new Zo(e,null,new ae(n))}{if(!(e instanceof Zo||e instanceof el))throw new U(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return le(n),new Zo(e.firestore,e instanceof el?e.converter:null,new ae(n))}}const rl="AsyncQueue";class il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ta(this,"async_queue_retry"),this._c=()=>{const e=Zs();e&&A(rl,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Zs();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Zs();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new M;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!je(e))throw e;A(rl,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,I("INTERNAL UNHANDLED ERROR: ",sl(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Va.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&R(47125,{Pc:sl(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function al(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ol extends Xo{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new il,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new il(e),this._firestoreClient=void 0,await e}}}function ll(e,t){const n="object"==typeof e?e:(0,a.Sx)(),r="string"==typeof e?e:t||Pt,i=(0,a.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,c.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=he(e,Xo);const i=(0,c.zJ)(t),a=e._getSettings(),o=(0,s.A)((0,s.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&((0,c.gE)("https://".concat(l)),(0,c.P1)("Firestore",!0)),a.host!==Qo&&a.host!==l&&N("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,s.A)((0,s.A)({},a),{},{host:l,ssl:i,emulatorOptions:r});if(!(0,c.bD)(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=T.MOCK_USER;else{var d;t=(0,c.Fy)(r.mockUserToken,null===(d=e._app)||void 0===d?void 0:d.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new U(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new T(i)}e._authCredentials=new z(new F(t,n))}}(i,...e)}return i}function cl(e){if(e._terminated)throw new U(L.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ul(e),e._firestoreClient}function ul(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Rt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ko(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Mo(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dl(bt.fromBase64String(e))}catch(e){throw new U(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new dl(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(me(e,dl._jsonSchema))return dl.fromBase64String(e.bytes)}}dl._jsonSchemaVersion="firestore/bytes/1.0",dl._jsonSchema={type:pe("string",dl._jsonSchemaVersion),bytes:pe("string")};class hl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new U(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fl{constructor(e){this._methodName=e}}class pl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pl._jsonSchemaVersion}}static fromJSON(e){if(me(e,pl._jsonSchema))return new pl(e.latitude,e.longitude)}}pl._jsonSchemaVersion="firestore/geoPoint/1.0",pl._jsonSchema={type:pe("string",pl._jsonSchemaVersion),latitude:pe("number"),longitude:pe("number")};class ml{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ml._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(me(e,ml._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new ml(e.vectorValues);throw new U(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ml._jsonSchemaVersion="firestore/vectorValue/1.0",ml._jsonSchema={type:pe("string",ml._jsonSchemaVersion),vectorValues:pe("object")};const gl=/^__.*__$/;class vl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ur(e,this.data,t,this.fieldTransforms)}}class yl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw R(40011,{Ac:e})}}class bl{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bl((0,s.A)((0,s.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(wl(this.Ac)&&gl.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ea(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bl({Ac:e,methodName:t,Dc:n,path:se.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sl(e){const t=e._freezeSettings(),n=ea(e._databaseId);return new xl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _l(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Ll("Data must be an object, but it was:",a,r);const o=Dl(r,a);let l,c;if(s.merge)l=new yt(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ul(t,r,n);if(!a.contains(i))throw new U(L.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));zl(e,i)||e.push(i)}l=new yt(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new vl(new sn(o),l,c)}class Tl extends fl{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tl}}function kl(e,t,n){return new bl({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class El extends fl{_toFieldTransform(e){return new Cr(e.path,new wr)}isEqual(e){return e instanceof El}}class Cl extends fl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=kl(this,e,!0),n=this.vc.map(e=>Pl(e,t)),r=new br(n);return new Cr(e.path,r)}isEqual(e){return e instanceof Cl&&(0,c.bD)(this.vc,e.vc)}}class Al extends fl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=kl(this,e,!0),n=this.vc.map(e=>Pl(e,t)),r=new Sr(n);return new Cr(e.path,r)}isEqual(e){return e instanceof Al&&(0,c.bD)(this.vc,e.vc)}}class Il extends fl{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Tr(e.serializer,pr(e.serializer,this.Fc));return new Cr(e.path,t)}isEqual(e){return e instanceof Il&&this.Fc===e.Fc}}function Nl(e,t,n,r){const i=e.Cc(1,t,n);Ll("Data must be an object, but it was:",i,r);const s=[],a=sn.empty();dt(r,(e,r)=>{const o=Fl(t,e,n);r=(0,c.Ku)(r);const l=i.yc(o);if(r instanceof Tl)s.push(o);else{const e=Pl(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new yt(s);return new yl(a,o,i.fieldTransforms)}function jl(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[Ul(t,r,n)],l=[i];if(s.length%2!=0)throw new U(L.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let c=0;c<s.length;c+=2)o.push(Ul(t,s[c])),l.push(s[c+1]);const u=[],d=sn.empty();for(let f=o.length-1;f>=0;--f)if(!zl(u,o[f])){const e=o[f];let t=l[f];t=(0,c.Ku)(t);const n=a.yc(e);if(t instanceof Tl)u.push(e);else{const r=Pl(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new yt(u);return new yl(d,h,a.fieldTransforms)}function Rl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Pl(n,e.Cc(r?4:3,t))}function Pl(e,t){if(Ol(e=(0,c.Ku)(e)))return Ll("Unsupported field value:",t,e),Dl(e,t);if(e instanceof fl)return function(e,t){if(!wl(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Pl(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return pr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ye.fromDate(e);return{timestampValue:wi(t.serializer,n)}}if(e instanceof ye){const n=new ye(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wi(t.serializer,n)}}if(e instanceof pl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof dl)return{bytesValue:bi(t.serializer,e._byteString)};if(e instanceof Zo){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:_i(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ml)return function(e,t){return{mapValue:{fields:{[Ot]:{stringValue:Mt},[Ft]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return hr(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(de(e)))}(e,t)}function Dl(e,t){const n={};return ht(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dt(e,(e,r)=>{const i=Pl(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ol(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof pl||e instanceof dl||e instanceof Zo||e instanceof fl||e instanceof ml)}function Ll(e,t,n){if(!Ol(n)||!ue(n)){const r=de(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Ul(e,t,n){if((t=(0,c.Ku)(t))instanceof hl)return t._internalPath;if("string"==typeof t)return Fl(e,t);throw Vl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ml=new RegExp("[~\\*/\\[\\]]");function Fl(e,t,n){if(t.search(Ml)>=0)throw Vl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new hl(...t.split("."))._internalPath}catch(r){throw Vl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Vl(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new U(L.INVALID_ARGUMENT,o+e+l)}function zl(e,t){return e.some(e=>e.isEqual(t))}class Bl{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Zo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ql(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ql extends Bl{data(){return super.data()}}function Hl(e,t){return"string"==typeof t?Fl(e,t):t instanceof hl?t._internalPath:t._delegate._internalPath}function Wl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new U(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kl{}class Gl extends Kl{}function Ql(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Kl&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Xl).length,n=e.filter(e=>e instanceof Yl).length;if(t>1||t>0&&n>0)throw new U(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Yl extends Gl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Yl(e,t,n)}_apply(e){const t=this._parse(e);return ic(e._query,t),new $o(e.firestore,e.converter,qn(e._query,t))}_parse(e){const t=Sl(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new U(L.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){rc(a,s);const t=[];for(const n of a)t.push(nc(r,e,n));o={arrayValue:{values:t}}}else o=nc(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||rc(a,s),o=Rl(n,t,a,"in"===s||"not-in"===s);return pn.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Jl(e,t,n){const r=t,i=Hl("where",e);return Yl._create(i,r,n)}class Xl extends Kl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xl(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:mn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)ic(n,i),n=qn(n,i)}(e._query,t),new $o(e.firestore,e.converter,qn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $l extends Gl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $l(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new U(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new U(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dn(t,n)}(e._query,this._field,this._direction);return new $o(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new On(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Zl(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Hl("orderBy",e);return $l._create(n,t)}class ec extends Gl{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ec(e,t,n)}_apply(e){return new $o(e.firestore,e.converter,Hn(e._query,this._limit,this._limitType))}}function tc(e){return fe("limit",e),ec._create("limit",e,"F")}function nc(e,t,n){if("string"==typeof(n=(0,c.Ku)(n))){if(""===n)throw new U(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fn(t)&&-1!==n.indexOf("/"))throw new U(L.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(re.fromString(n));if(!ae.isDocumentKey(r))throw new U(L.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Yt(e,new ae(r))}if(n instanceof Zo)return Yt(e,n._key);throw new U(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(de(n),"."))}function rc(e,t){if(!Array.isArray(e)||0===e.length)throw new U(L.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function ic(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new U(L.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new U(L.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class sc{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw R(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return dt(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Ft].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>_t(e.doubleValue));return new ml(n)}convertGeoPoint(e){return new pl(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Nt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(jt(e));default:return null}}convertTimestamp(e){const t=St(e);return new ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=re.fromString(e);D(Wi(n),9688,{name:e});const r=new Dt(n.get(1),n.get(3)),i=new ae(n.popFirst(5));return r.isEqual(t)||I("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ac(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lc extends Bl{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Hl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new U(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}lc._jsonSchemaVersion="firestore/documentSnapshot/1.0",lc._jsonSchema={type:pe("string",lc._jsonSchemaVersion),bundleSource:pe("string","DocumentSnapshot"),bundleName:pe("string"),bundle:pe("string")};class cc extends lc{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class uc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new oc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new cc(this._firestore,this._userDataWriter,n.key,n,new oc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new U(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new cc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new oc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new cc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:dc(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new U(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Q.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return R(61501,{type:e})}}uc._jsonSchemaVersion="firestore/querySnapshot/1.0",uc._jsonSchema={type:pe("string",uc._jsonSchemaVersion),bundleSource:pe("string","QuerySnapshot"),bundleName:pe("string"),bundle:pe("string")};class hc extends sc{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zo(this.firestore,null,t)}}function fc(e){e=he(e,$o);const t=he(e.firestore,ol),n=cl(t),r=new hc(t);return Wl(e._query),Wo(n,e._query).then(n=>new uc(t,r,e,n))}function pc(e,t,n){e=he(e,Zo);const r=he(e.firestore,ol),i=Sl(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=(0,c.Ku)(t))||t instanceof hl?jl(i,"updateDoc",e._key,t,n,o):Nl(i,"updateDoc",e._key,t),yc(r,[s.toMutation(e._key,Ir.exists(!0))])}function mc(e){return yc(he(e.firestore,ol),[new Br(e._key,Ir.none())])}function gc(e,t){const n=he(e.firestore,ol),r=nl(e),i=ac(e.converter,t);return yc(n,[_l(Sl(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ir.exists(!1))]).then(()=>r)}function vc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,c.Ku)(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||al(n[s])||(i=n[s++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(al(n[s])){var o,l,u;const e=n[s];n[s]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[s+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[s+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let d,h,f;if(e instanceof Zo)h=he(e.firestore,ol),f=Un(e._key.path),d={next:t=>{n[s]&&n[s](wc(h,e,t))},error:n[s+1],complete:n[s+2]};else{const t=he(e,$o);h=he(t.firestore,ol),f=t._query;const r=new hc(h);d={next:e=>{n[s]&&n[s](new uc(h,r,t,e))},error:n[s+1],complete:n[s+2]},Wl(e._query)}return function(e,t,n,r){const i=new Lo(r),s=new to(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Qa(await Ho(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Ya(await Ho(e),s))}}(cl(h),f,a,d)}function yc(e,t){return function(e,t){const n=new M;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ro(e);try{const e=await function(e,t){const n=O(e),r=ye.now(),i=t.reduce((e,t)=>e.add(t.key),cr());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=er(),l=cr();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Or(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Mr(e.key,t,an(t.value.mapValue),Ir.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:rr(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new ft(Y)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ao(r,e.changes),await Ca(r.remoteStore)}catch(e){const t=za(e,"Failed to persist write");n.reject(t)}}(await qo(e),t,n)),n.promise}(cl(e),t)}function wc(e,t,n){const r=n.docs.get(t._key),i=new hc(e);return new lc(e,i,t._key,r,new oc(n.hasPendingWrites,n.fromCache),t.converter)}function bc(){return new El("serverTimestamp")}function xc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cl("arrayUnion",t)}function Sc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Al("arrayRemove",t)}function _c(e){return new Il("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){k=e}(a.MF),(0,a.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),o=new ol(new B(e.getProvider("auth-internal")),new K(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new U(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dt(e.options.projectId,t)}(a,r),a);return i=(0,s.A)({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,a.KO)(S,_,e),(0,a.KO)(S,_,"esm2020")}()},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,U=Object.assign;function M(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function z(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case k:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function $(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,Te=null;function ke(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function Ee(e){_e?Te?Te.push(e):Te=[e]:_e=e}function Ce(){if(_e){var e=_e,t=Te;if(Te=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ae(e,t){return e(t)}function Ie(){}var Ne=!1;function je(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==_e||null!==Te)&&(Ie(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Pe=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Ue=null,Me=!1,Fe=null,Ve={onError:function(e){Le=!0,Ue=e}};function ze(e,t,n,r,i,s,a,o,l){Le=!1,Ue=null,Oe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,_t,Tt,kt,Et=!1,Ct=[],At=null,It=null,Nt=null,jt=new Map,Rt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Mt(e)&&n.delete(t)}function Vt(){Et=!1,null!==At&&Mt(At)&&(At=null),null!==It&&Mt(It)&&(It=null),null!==Nt&&Mt(Nt)&&(Nt=null),jt.forEach(Ft),Rt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&zt(At,e),null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),jt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Lt(At,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return jt.set(s,Lt(jt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&xt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=U({},cn,{view:0,detail:0}),hn=sn(dn),fn=U({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(U({},fn,{dataTransfer:0})),gn=sn(U({},dn,{relatedTarget:0})),vn=sn(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(U({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function kn(){return Tn}var En=U({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(En),An=sn(U({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(U({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Nn=sn(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=U({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(jn),Pn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Un=u&&(!Dn||On&&8<On&&11>=On),Mn=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Mr(e,0)}function Yn(e){if(G(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,xe(e)),je(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},_r={},Tr={};function kr(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return _r[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Er=kr("animationend"),Cr=kr("animationiteration"),Ar=kr("animationstart"),Ir=kr("transitionend"),Nr=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),l(t,[e])}for(var Pr=0;Pr<jr.length;Pr++){var Dr=jr[Pr];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(Ar,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Ue;Le=!1,Ue=null,Me||(Me=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Ur(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Ur(i,o,c),s=l}}}if(Me)throw e=Fe,Me=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}je(function(){var r=s,i=xe(n),a=[];e:{var o=Nr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Er:case Cr:case Ar:l=vn;break;case Ir:l=Nn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:bi(l),f=null==c?o:bi(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(Hn(o))if(Xn)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(v=Kr(r,w)).length&&(w=new bn(w,e,null,n,i),a.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=$t=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Mr(a,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Re(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Re(n,s))&&a.unshift(Wr(n,l,o)):i||null!=(l=Re(n,s))&&a.push(Wr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var Si=[],_i=-1;function Ti(e){return{current:e}}function ki(e){0>_i||(e.current=Si[_i],Si[_i]=null,_i--)}function Ei(e,t){_i++,Si[_i]=e.current,e.current=t}var Ci={},Ai=Ti(Ci),Ii=Ti(!1),Ni=Ci;function ji(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){ki(Ii),ki(Ai)}function Di(e,t,n){if(Ai.current!==Ci)throw Error(s(168));Ei(Ai,t),Ei(Ii,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return U({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=Ai.current,Ei(Ai,e),Ei(Ii,Ii.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,ki(Ii),ki(Ai),Ei(Ai,e)):ki(Ii),Ei(Ii,n)}var Mi=null,Fi=!1,Vi=!1;function zi(e){null===Mi?Mi=[e]:Mi.push(e)}function Bi(){if(!Vi&&null!==Mi){Vi=!0;var e=0,t=wt;try{var n=Mi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mi=null,Fi=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),Ge(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){qi[Hi++]=Ki,qi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Ji=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case S:return(t=Mc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),is&&$i(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&$i(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),is&&$i(i,m),c}function g(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,c);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),o=a(w,o,g),null===d?u=w:d.sibling=w,d=w,m=v}if(y.done)return n(i,m),is&&$i(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return is&&$i(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),is&&$i(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===_){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===_?((s=Oc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case S:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Mc(a,r.mode,l)).return=r,r=s}return o(r);case R:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(O(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Uc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=ws(!0),xs=ws(!1),Ss=Ti(null),_s=null,Ts=null,ks=null;function Es(){ks=Ts=_s=null}function Cs(e){var t=Ss.current;ki(Ss),e._currentValue=t}function As(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){_s=e,ks=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===_s)throw Error(s(308));Ts=e,_s.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var js=null;function Rs(e){null===js?js=[e]:js.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Us(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=U({},d,h);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ws=Ti(Hs),Ks=Ti(Hs),Gs=Ti(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Ei(Gs,t),Ei(Ks,e),Ei(Ws,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Ws),Ei(Ws,t)}function Js(){ki(Ws),ki(Ks),ki(Gs)}function Xs(e){Qs(Gs.current);var t=Qs(Ws.current),n=le(t,e.type);t!==n&&(Ei(Ks,e),Ei(Ws,n))}function $s(e){Ks.current===e&&(ki(Ws),ki(Ks))}var Zs=Ti(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?$a:Za,e=n(r,i),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function wa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function _a(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,wo=!0),r=r.queue,Oa(Ea.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Na(9,ka.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(s(349));0!==(30&sa)||Ta(n,t,i)}return i}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ka(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&Aa(e)}function Ea(e,t,n){return n(function(){Ca(t)&&Aa(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Aa(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Ia(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return ya().memoizedState}function Ra(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=Na(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=Na(t,n,s,r))}aa.flags|=e,i.memoizedState=Na(1|t,n,s,r)}function Da(e,t){return Ra(8390656,8,e,t)}function Oa(e,t){return Pa(2048,8,e,t)}function La(e,t){return Pa(4,2,e,t)}function Ua(e,t){return Pa(4,4,e,t)}function Ma(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Ma.bind(null,t,e),n)}function Va(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ha(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{wt=n,ia.transition=r}}function Wa(){return ya().memoizedState}function Ka(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ya(t,n);else if(null!==(n=Ps(e,t,n,r))){nc(n,e,r,ec()),Ja(n,t,r)}}function Ga(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ps(e,t,i,r))&&(nc(n,e,r,i=ec()),Ja(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xa={readContext:Ns,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},$a={readContext:Ns,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4194308,4,Ma.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ia,useDebugValue:Va,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&sa)||Ta(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Da(Ea.bind(null,r,a,e),[e]),r.flags|=2048,Na(9,ka.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Il.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ns,useCallback:za,useContext:Ns,useEffect:Oa,useImperativeHandle:Fa,useInsertionEffect:La,useLayoutEffect:Ua,useMemo:Ba,useReducer:ba,useRef:ja,useState:function(){return ba(wa)},useDebugValue:Va,useDeferredValue:function(e){return qa(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(wa)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:_a,useId:Wa,unstable_isNewReconciler:!1},eo={readContext:Ns,useCallback:za,useContext:Ns,useEffect:Oa,useImperativeHandle:Fa,useInsertionEffect:La,useLayoutEffect:Ua,useMemo:Ba,useReducer:xa,useRef:ja,useState:function(){return xa(wa)},useDebugValue:Va,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:qa(t,oa.memoizedState,e)},useTransition:function(){return[xa(wa)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:_a,useId:Wa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Ms(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Ms(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ms(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fs(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(i=Ri(t)?Ni:Ai.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?ji(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ns(s):(s=Ri(t)?Ni:Ai.current,i.context=ji(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Ms(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),uo(0,t)},n}function po(e,t,n){(n=Ms(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ms(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=b.ReactCurrentOwner,wo=!1;function bo(e,t,n,r){t.child=null===e?xs(t,null,n,r):bs(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||wo?(is&&n&&es(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function So(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,_o(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return Eo(e,t,n,r,i)}function To(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Pl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ei(Pl,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ei(Pl,Rl),Rl|=r;return bo(e,t,i,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,i){var s=Ri(n)?Ni:Ai.current;return s=ji(t,s),Is(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||wo?(is&&r&&es(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Co(e,t,n,r,i){if(Ri(n)){var s=!0;Li(t)}else s=!1;if(Is(t,i),null===t.stateNode)qo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=ji(t,c=Ri(n)?Ni:Ai.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Os=!1;var h=t.memoizedState;a.state=h,Bs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ii.current||Os?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Os||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Us(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=ji(t,l=Ri(n)?Ni:Ai.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Os=!1,h=t.memoizedState,a.state=h,Bs(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Ii.current||Os?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Os||io(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ao(e,t,n,r,s,i)}function Ao(e,t,n,r,i,s){ko(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ui(t,n,!1),Ho(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function No(e,t,n,r,i){return fs(),ps(i),t.flags|=256,bo(e,t,n,r),t.child}var jo,Ro,Po,Do,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ei(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Mo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Oc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Il)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return mc(),Fo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=Mo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Pc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Mo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),As(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Ko(t),null;case 3:return r=t.stateNode,Js(),ki(Ii),ki(Ai),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Ro(e,t),Ko(t),null;case 5:$s(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=Qs(Ws.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":J(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":ie(r,a),Fr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,jo(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",e):null!=u&&w(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Ws.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ko(t),null;case 13:if(ki(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Js(),Ro(e,t),null===e&&Br(t.stateNode.containerInfo),Ko(t),null;case 10:return Cs(t.type._context),Ko(t),null;case 19:if(ki(Zs),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Wo(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Wo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bl&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Ko(t),null}else 2*Xe()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Ei(Zs,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),ki(Ii),ki(Ai),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(ki(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(Zs),null;case 4:return Js(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Po=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ws.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Jo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Jo||Zo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Jo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Tc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,hl(e,t,n),Jo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Tc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),we(l,o);var u=we(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):w(i,d,h,u)}switch(l){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Tc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Tc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||d,ml(t,e),Jo=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($o=e,d=e.child;null!==d;){for(h=$o=d;null!==$o;){switch(p=(f=$o).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,$o=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Tc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Tc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){$o=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==$o;){var i=$o,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Yo;var c=Jo;if(Yo=a,(Jo=l)&&!c)for($o=i;null!==$o;)l=(a=$o).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,$o=l):Sl(i);for(;null!==s;)$o=s,wl(s,t,n),s=s.sibling;$o=i,Yo=o,Jo=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$o=s):bl(e)}}function bl(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&il(t)}catch(f){Tc(t,t.return,f)}}if(t===e){$o=null;break}if(null!==(n=t.sibling)){n.return=t.return,$o=n;break}$o=t.return}}function xl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$o=n;break}$o=t.return}}function Sl(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Tc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Tc(t,a,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var _l,Tl=Math.ceil,kl=b.ReactCurrentDispatcher,El=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Al=0,Il=null,Nl=null,jl=0,Rl=0,Pl=Ti(0),Dl=0,Ol=null,Ll=0,Ul=0,Ml=0,Fl=null,Vl=null,zl=0,Bl=1/0,ql=null,Hl=!1,Wl=null,Kl=null,Gl=!1,Ql=null,Yl=0,Jl=0,Xl=null,$l=-1,Zl=0;function ec(){return 0!==(6&Al)?Xe():-1!==$l?$l:$l=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==jl?jl&-jl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Al)&&e===Il||(e===Il&&(0===(2&Al)&&(Ul|=n),4===Dl&&oc(e,jl)),rc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Bl=Xe()+500,Fi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Il?jl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fi=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),ai(function(){0===(6&Al)&&Bi()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($l=-1,Zl=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Al;Al|=2;var a=pc();for(Il===e&&jl===t||(ql=null,Bl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Es(),kl.current=a,Al=i,null!==Nl?t=0:(Il=null,jl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Vl,ql);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Vl,ql),t);break}xc(e,Vl,ql);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Vl,ql),r);break}xc(e,Vl,ql);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Ml,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(s(327));Sc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Vl,ql),rc(e,Xe()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Bl=Xe()+500,Fi&&Bi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Al)&&Sc();var t=Al;Al|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Al=t))&&Bi()}}function dc(){Rl=Pl.current,ki(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Js(),ki(Ii),ki(Ai),na();break;case 5:$s(r);break;case 4:Js();break;case 13:case 19:ki(Zs);break;case 10:Cs(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Nl=e=Pc(e.current,null),jl=Rl=t,Dl=0,Ol=null,Ml=Ul=Ll=0,Vl=Fl=null,null!==js){for(t=0;t<js.length;t++)if(null!==(r=(n=js[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}js=null}return e}function fc(e,t){for(;;){var n=Nl;try{if(Es(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,El.current=null,null===n||null===n.return){Dl=1,Ol=t,Nl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Dl&&(Dl=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Kl||!Kl.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var e=kl.current;return kl.current=Xa,null===e?Xa:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Il||0===(268435455&Ll)&&0===(268435455&Ul)||oc(Il,jl)}function gc(e,t){var n=Al;Al|=2;var r=pc();for(Il===e&&jl===t||(ql=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(Es(),Al=n,kl.current=r,null!==Nl)throw Error(s(261));return Il=null,jl=0,Dl}function vc(){for(;null!==Nl;)wc(Nl)}function yc(){for(;null!==Nl&&!Ye();)wc(Nl)}function wc(e){var t=_l(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Nl=t,El.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Rl)))return void(Nl=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Dl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Dl&&(Dl=5)}function xc(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Sc()}while(null!==Ql);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Il&&(Nl=Il=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ic(tt,function(){return Sc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=wt;wt=1;var l=Al;Al|=4,El.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(x){Tc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),Al=l,wt=o,Cl.transition=a}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=i),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,Bi()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Sc(){if(null!==Ql){var e=bt(Yl),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,$o=e.current;null!==$o;){var a=$o,o=a.child;if(0!==(16&$o.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($o=u;null!==$o;){var d=$o;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,$o=h;else for(;null!==$o;){var f=(d=$o).sibling,p=d.return;if(sl(d),d===u){$o=null;break}if(null!==f){f.return=p,$o=f;break}$o=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$o=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,$o=o;else e:for(;null!==$o;){if(0!==(2048&(a=$o).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,$o=y;break e}$o=a.return}}var w=e.current;for($o=w;null!==$o;){var b=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,$o=b;else e:for(o=w;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Tc(l,l.return,S)}if(l===o){$o=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,$o=x;break e}$o=l.return}}if(Al=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function _c(e,t,n){e=Fs(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Tc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Fs(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(jl&n)===n&&(4===Dl||3===Dl&&(130023424&jl)===jl&&500>Xe()-zl?hc(e,0):Ml|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(vt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ec(e,n)}function Ic(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Oc(n.children,i,a,t);case T:o=8,i|=8;break;case k:return(e=jc(12,n,t,2|i)).elementType=k,e.lanes=a,e;case I:return(e=jc(13,n,t,i)).elementType=I,e.lanes=a,e;case N:return(e=jc(19,n,t,i)).elementType=N,e.lanes=a,e;case P:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case C:o=9;break e;case A:o=11;break e;case j:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=jc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=jc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function zc(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Oi(e,n,t)}return t}function Bc(e,t,n,r,i,s,a,o,l){return(e=Vc(n,r,!0,e,0,s,0,o,l)).context=zc(null),n=e.current,(s=Ms(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Fs(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ms(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fs(i,t,a))&&(nc(e,i,a,s),Vs(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),fs();break;case 5:Xs(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Ei(Zs,1&Zs.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ei(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,To(e,t,n)}return Ho(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=ji(t,Ai.current);Is(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Ao(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===j)return 14}return 2}(r),e=to(r,e),i){case 0:t=Eo(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=So(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Io(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Us(e,t),Bs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=No(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=No(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),ko(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Uo(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ei(Ss,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ii.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Ms(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),As(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),As(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ns(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),So(e,t,r,i=to(r.type,i),n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),qo(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Is(t,n),so(t,r,i),oo(t,r,i,n),Ao(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return To(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){qc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(a)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){qc(null,e,null,null)}),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ut(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Al)&&(Bl=Xe()+500,Bi()))}break;case 13:uc(function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},St=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},Tt=function(){return wt},kt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));G(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[wi,bi,xi,Ee,Ce,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},776:(e,t,n)=>{n.d(t,{cY:()=>m,FA:()=>D,g:()=>P,u:()=>l,Uj:()=>o,Fy:()=>y,tD:()=>B,bD:()=>U,hp:()=>z,T9:()=>f,Tj:()=>d,yU:()=>h,XA:()=>p,mS:()=>c,Ku:()=>W,ZQ:()=>S,sr:()=>E,zJ:()=>g,c1:()=>k,Im:()=>L,lT:()=>A,zW:()=>j,jZ:()=>_,lV:()=>C,nr:()=>I,Ov:()=>N,gE:()=>v,Am:()=>F,I9:()=>V,P1:()=>x,eX:()=>R});var r=n(555);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://autopromote.onrender.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyASTUuMkz821PoHRopZ8yy1dW5COrAQPZY",REACT_APP_FIREBASE_APP_ID:"1:317746682241:web:f363e099d55ffd1af1b080",REACT_APP_FIREBASE_AUTH_DOMAIN:"autopromote-464de.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-8QDQXF0FPQ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"317746682241",REACT_APP_FIREBASE_PROJECT_ID:"autopromote-464de",REACT_APP_FIREBASE_STORAGE_BUCKET:"autopromote-cc6d3.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function v(e){return(await fetch(e,{credentials:"include"})).ok}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}const w={};let b=!1;function x(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||w[e]===t||w[e]||b)return;function n(e){return"__firebase__banner__".concat(e)}w[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(w))w[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function S(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function _(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S())}function T(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function k(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function E(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function A(){const e=S();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function I(){return!T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N(){return!T()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function j(){try{return"object"===typeof indexedDB}catch(e){return!1}}function R(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(O,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new P(n,s,t)}}const O=/\{\$([^}]+)}/g;function L(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function U(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(M(n)&&M(s)){if(!U(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function M(e){return null!==e&&"object"===typeof e}function F(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function V(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function z(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function B(e,t){const n=new q(e,t);return n.subscribe.bind(n)}class q{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H(){}function W(e){return e&&e._delegate?e._delegate:e}},834:(e,t,n)=>{n.d(t,{j2:()=>l,db:()=>c,IG:()=>u});var r=n(232);(0,r.KO)("firebase","12.2.1","app");var i=n(982),s=n(667),a=n(68);const o=(0,r.Wp)({apiKey:"AIzaSyASTUuMkz821PoHRopZ8yy1dW5COrAQPZY",authDomain:"autopromote-464de.firebaseapp.com",projectId:"autopromote-464de",storageBucket:"autopromote-cc6d3.firebasestorage.app",messagingSenderId:"317746682241",appId:"1:317746682241:web:f363e099d55ffd1af1b080",measurementId:"G-8QDQXF0FPQ"}),l=(0,i.xI)(o),c=(0,s.aU)(o),u=(0,a.c7)(o)},847:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(555),i=n(43),s=(n(521),n(579));const a=e=>{let{onLogin:t,onClose:n}=e;const[a,o]=(0,i.useState)({email:"",password:""}),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1),[g,v]=(0,i.useState)(""),[y,w]=(0,i.useState)(""),b=(0,i.useCallback)(e=>{const{name:t,value:n}=e.target;o(e=>(0,r.A)((0,r.A)({},e),{},{[t]:n})),l&&c("")},[l]);return(0,s.jsx)("div",{className:"auth-container",children:(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c(""),h){d(!0);try{const{email:e,password:r}=a;console.log("Attempting login with:",e);try{localStorage.setItem("tosAgreed","true")}catch(n){}await t(e,r)}catch(r){console.error("Login error:",r),console.error("Error details:",{code:r.code,message:r.message});let e="Login failed. ";if(r.code)switch(r.code){case"auth/invalid-credential":e+="Invalid email or password.";break;case"auth/user-not-found":e+="No account exists with this email.";break;case"auth/wrong-password":e+="Incorrect password.";break;case"auth/invalid-api-key":e+="Invalid Firebase configuration. Please check the setup.";break;case"auth/network-request-failed":e+="Network error. Please check your connection.";break;case"auth/too-many-requests":e+="Too many failed login attempts. Please try again later.";break;default:e+=r.message}else e+=r.message||"Unknown error occurred";c(e)}finally{d(!1)}}else c("Please agree to the Terms of Service and Privacy Policy before continuing.")},className:"auth-form",children:[(0,s.jsx)("h2",{className:"auth-title",children:"Welcome Back"}),l&&(0,s.jsx)("div",{className:"error-message",children:l}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Email"}),(0,s.jsx)("input",{type:"email",name:"email",value:a.email,onChange:b,className:"form-input",placeholder:"Enter your email",required:!0,autoComplete:"email"})]}),(0,s.jsxs)("div",{className:"form-group terms-row",children:[(0,s.jsx)("input",{id:"agreeTerms",type:"checkbox",checked:h,onChange:e=>f(e.target.checked)}),(0,s.jsxs)("label",{htmlFor:"agreeTerms",className:"form-label",children:["I agree to the ",(0,s.jsx)("a",{href:"/terms",target:"_blank",rel:"noreferrer",children:"Terms of Service"})," and ",(0,s.jsx)("a",{href:"/privacy",target:"_blank",rel:"noreferrer",children:"Privacy Policy"}),"."]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Password"}),(0,s.jsx)("input",{type:"password",name:"password",value:a.password,onChange:b,className:"form-input",placeholder:"Enter your password",required:!0,autoComplete:"current-password"})]}),(0,s.jsx)("div",{className:"form-group",style:{marginTop:8},children:(0,s.jsx)("small",{children:(0,s.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),m(e=>!e)},children:p?"Hide password reset":"Forgot password?"})})}),p&&(0,s.jsxs)("div",{style:{marginBottom:12},children:[(0,s.jsx)("input",{type:"email",placeholder:"Email for reset",className:"form-input",value:g,onChange:e=>v(e.target.value)}),(0,s.jsx)("button",{type:"button",className:"auth-button",style:{marginTop:8},onClick:async e=>{e.preventDefault(),w("");const t=g||a.email;if(t)try{const e=await fetch(({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://autopromote.onrender.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyASTUuMkz821PoHRopZ8yy1dW5COrAQPZY",REACT_APP_FIREBASE_APP_ID:"1:317746682241:web:f363e099d55ffd1af1b080",REACT_APP_FIREBASE_AUTH_DOMAIN:"autopromote-464de.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-8QDQXF0FPQ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"317746682241",REACT_APP_FIREBASE_PROJECT_ID:"autopromote-464de",REACT_APP_FIREBASE_STORAGE_BUCKET:"autopromote-cc6d3.firebasestorage.app"}.REACT_APP_API_BASE||"")+"/api/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),n=await e.json().catch(()=>({}));e.ok?w(n.message||"If the email exists, a reset link has been sent."):w(n.error||"Request failed")}catch(n){w(n.message)}else w("Enter email first")},children:"Send Reset Email"}),y&&(0,s.jsx)("div",{style:{marginTop:6,fontSize:12,color:"#1976d2"},children:y})]}),(0,s.jsx)("button",{type:"submit",disabled:u||!h,className:"auth-button",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"loading-spinner"}),"Signing in..."]}):"Sign In"}),(0,s.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),n&&n()},className:"auth-link",children:"Don't have an account? Create one"})]})})}},853:(e,t,n)=>{e.exports=n(234)},889:(e,t,n)=>{n.d(t,{A:()=>i});n(43);var r=n(579);const i=e=>{let{onGetStarted:t,onSignIn:n}=e;return(0,r.jsxs)("div",{className:"new-welcome-root",children:[(0,r.jsx)("div",{className:"new-welcome-bg-gradient"}),(0,r.jsxs)("div",{className:"new-welcome-content",children:[(0,r.jsxs)("div",{className:"new-welcome-logo-row",children:[(0,r.jsx)("img",{src:"/image.png",alt:"AutoPromote Logo",className:"new-welcome-logo"}),(0,r.jsx)("h1",{className:"new-welcome-title",children:"AutoPromote"})]}),(0,r.jsx)("h2",{className:"new-welcome-headline",children:"Promote. Monetize. Grow."}),(0,r.jsxs)("p",{className:"new-welcome-tagline",children:[(0,r.jsx)("span",{style:{fontWeight:600,color:"#6c4cf7"},children:"Your AI-powered platform for creators and businesses."}),(0,r.jsx)("br",{}),"Automate your success, reach new audiences, and boost your revenue."]}),(0,r.jsxs)("div",{className:"new-welcome-btn-row",children:[(0,r.jsx)("button",{className:"new-welcome-btn primary",onClick:t,children:"Get Started"}),(0,r.jsx)("button",{className:"new-welcome-btn",onClick:n,children:"Login"})]}),(0,r.jsxs)("div",{className:"new-welcome-features",children:[(0,r.jsxs)("div",{className:"feature-card",children:[(0,r.jsx)("span",{className:"feature-icon",style:{color:"#6c4cf7"},children:"\ud83d\ude80"}),(0,r.jsx)("span",{children:"Instant Promotion"})]}),(0,r.jsxs)("div",{className:"feature-card",children:[(0,r.jsx)("span",{className:"feature-icon",style:{color:"#6c4cf7"},children:"\ud83d\udcb8"}),(0,r.jsx)("span",{children:"Monetize Content"})]}),(0,r.jsxs)("div",{className:"feature-card",children:[(0,r.jsx)("span",{className:"feature-icon",style:{color:"#6c4cf7"},children:"\ud83d\udcca"}),(0,r.jsx)("span",{children:"Smart Analytics"})]})]}),(0,r.jsx)("div",{className:"new-welcome-footer",children:(0,r.jsxs)("span",{style:{fontSize:"0.95rem",color:"#888"},children:["\xa9 ",(new Date).getFullYear()," AutoPromote. All rights reserved."]})})]})]})}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},965:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,o={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},970:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(555),i=n(43),s=n(488),a=n(834),o=n(667);const l={totalUsers:256,newUsersToday:12,totalContent:478,newContentToday:23,totalRevenue:12458.9,revenueToday:567.45,activePromotions:124,scheduledPromotions:47,activeUsers:134,activeUsersLastWeek:127,engagementRate:.62,engagementChange:.08,userSegmentation:{powerUsers:32,regularUsers:156,occasionalUsers:68,total:256},contentPerformance:{high:97,medium:286,low:95},avgRevenuePerContent:26.07,avgRevenuePerUser:48.67,projectedMonthlyRevenue:15780,promotionsCompleted:287,topContent:[{id:"content1",title:"Ultimate Guide to Social Media Marketing",type:"Article",views:12540,engagementRate:.78,createdAt:{seconds:Date.now()/1e3-1209600,nanoseconds:0},status:"active"},{id:"content2",title:"How to Grow Your Audience in 2025",type:"Video",views:8972,engagementRate:.65,createdAt:{seconds:Date.now()/1e3-604800,nanoseconds:0},status:"active"},{id:"content3",title:"Viral Marketing Techniques",type:"Article",views:7632,engagementRate:.53,createdAt:{seconds:Date.now()/1e3-1814400,nanoseconds:0},status:"active"},{id:"content4",title:"10 Ways to Monetize Your Content",type:"Video",views:6943,engagementRate:.71,createdAt:{seconds:Date.now()/1e3-432e3,nanoseconds:0},status:"active"},{id:"content5",title:"Building a Loyal Audience",type:"Article",views:5421,engagementRate:.62,createdAt:{seconds:Date.now()/1e3-864e3,nanoseconds:0},status:"pending"}],recentActivities:[{id:"activity1",type:"user",title:"New User Registration",description:"User johnsmith@example.com registered",timestamp:{seconds:Date.now()/1e3-3600,nanoseconds:0}},{id:"activity2",type:"content",title:"Content Published",description:'New article "SEO Strategies for 2025" published',timestamp:{seconds:Date.now()/1e3-7200,nanoseconds:0}},{id:"activity3",type:"promotion",title:"Promotion Started",description:'Promotion "Summer Special" is now active',timestamp:{seconds:Date.now()/1e3-10800,nanoseconds:0}},{id:"activity4",type:"user",title:"Subscription Upgraded",description:"User sarahj@example.com upgraded to premium plan",timestamp:{seconds:Date.now()/1e3-14400,nanoseconds:0}},{id:"activity5",type:"content",title:"Content Trending",description:'Video "Marketing Tips" is trending with high engagement',timestamp:{seconds:Date.now()/1e3-18e3,nanoseconds:0}},{id:"activity6",type:"promotion",title:"Promotion Ended",description:'Promotion "Spring Sale" has ended with 87% success rate',timestamp:{seconds:Date.now()/1e3-21600,nanoseconds:0}},{id:"activity7",type:"user",title:"User Milestone",description:"User mikeb@example.com reached 1000 followers",timestamp:{seconds:Date.now()/1e3-25200,nanoseconds:0}}],performanceMetrics:{conversionRate:3.2,bounceRate:42.8,averageSessionDuration:187,returnVisitorRate:28.5,engagementByPlatform:{mobile:64,desktop:31,tablet:5}},demographics:{ageGroups:{"18-24":15,"25-34":32,"35-44":28,"45-54":18,"55+":7},geoDistribution:{"North America":42,Europe:28,Asia:18,"South America":8,Africa:3,Oceania:1},deviceTypes:{iOS:38,Android:41,Windows:16,Mac:4,Other:1}},financialMetrics:{revenueByMonth:[{month:"Jan",revenue:8450},{month:"Feb",revenue:9120},{month:"Mar",revenue:8790},{month:"Apr",revenue:9840},{month:"May",revenue:10380},{month:"Jun",revenue:11200},{month:"Jul",revenue:12150},{month:"Aug",revenue:12458}],revenueByContentType:{Article:42,Video:28,Image:18,Audio:12},transactionTrends:{averageOrderValue:38.72,conversionRate:2.8,repeatPurchaseRate:18.5}}};var c=n(579);function u(){const[e,t]=(0,i.useState)([]),[n,s]=(0,i.useState)(!1),[o,l]=(0,i.useState)(null),[u,d]=(0,i.useState)(null);async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=a.j2.currentUser;if(!n)throw new Error("Not authenticated");const i=await n.getIdToken(!0);return await fetch("".concat("https://autopromote.onrender.com").concat(e),(0,r.A)((0,r.A)({},t),{},{headers:(0,r.A)({"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},t.headers||{})}))}const f=async()=>{s(!0),l(null);try{const e=await h("/api/admin/variants/anomalies");if(!e.ok)throw new Error("HTTP ".concat(e.status));const n=await e.json();t(n.anomalies||[])}catch(e){l(e.message)}finally{s(!1)}};(0,i.useEffect)(()=>{f()},[]);const p=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const n=t?"/api/admin/variants/quarantine":"/api/admin/variants/unquarantine";if(!(await h(n,{method:"POST",body:JSON.stringify({contentId:e.contentId,platform:e.platform,variant:e.variant})})).ok)throw new Error("Failed");d(t?"Variant quarantined":"Variant unquarantined"),await f()}catch(n){l(n.message)}};return(0,c.jsxs)("div",{style:{border:"1px solid #ccc",padding:16,borderRadius:8,marginTop:24},children:[(0,c.jsx)("h3",{children:"Variant Anomalies"}),n&&(0,c.jsx)("div",{children:"Loading anomalies..."}),o&&(0,c.jsxs)("div",{style:{color:"red"},children:["Error: ",o]}),u&&(0,c.jsx)("div",{style:{color:"green"},children:u}),(0,c.jsx)("button",{onClick:f,disabled:n,children:"Refresh"}),(0,c.jsxs)("table",{style:{width:"100%",marginTop:12,fontSize:14},children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Content"}),(0,c.jsx)("th",{children:"Platform"}),(0,c.jsx)("th",{children:"Variant"}),(0,c.jsx)("th",{children:"Posts"}),(0,c.jsx)("th",{children:"Clicks"}),(0,c.jsx)("th",{children:"Decayed CTR"}),(0,c.jsx)("th",{children:"Suppressed"}),(0,c.jsx)("th",{children:"Quarantined"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsxs)("tbody",{children:[e.map(e=>(0,c.jsxs)("tr",{style:{background:e.quarantined?"#fff4e5":e.suppressed?"#ffeaea":void 0},children:[(0,c.jsx)("td",{children:e.contentId}),(0,c.jsx)("td",{children:e.platform}),(0,c.jsx)("td",{children:e.variant}),(0,c.jsx)("td",{children:e.posts}),(0,c.jsx)("td",{children:e.clicks}),(0,c.jsx)("td",{children:null!=e.decayedCtr?e.decayedCtr.toFixed(3):"-"}),(0,c.jsx)("td",{children:e.suppressed?"Yes":"No"}),(0,c.jsx)("td",{children:e.quarantined?"Yes":"No"}),(0,c.jsxs)("td",{children:[(0,c.jsx)("button",{onClick:()=>(async e=>{try{if(!(await h("/api/admin/variants/clear-anomaly",{method:"POST",body:JSON.stringify({contentId:e.contentId,platform:e.platform,variant:e.variant})})).ok)throw new Error("Failed");d("Anomaly cleared"),await f()}catch(t){l(t.message)}})(e),style:{marginRight:8},children:"Clear"}),e.suppressed&&(0,c.jsx)("button",{onClick:()=>(async e=>{try{if(!(await h("/api/admin/variants/unsuppress",{method:"POST",body:JSON.stringify({contentId:e.contentId,platform:e.platform,variant:e.variant})})).ok)throw new Error("Failed");d("Variant unsuppressed"),await f()}catch(t){l(t.message)}})(e),style:{marginRight:8},children:"Unsuppress"}),e.quarantined&&(0,c.jsx)("button",{onClick:()=>p(e,!1),style:{marginRight:8},children:"Unquarantine"}),!e.quarantined&&(0,c.jsx)("button",{onClick:()=>p(e,!0),children:"Quarantine"})]})]},"".concat(e.contentId,":").concat(e.platform,":").concat(e.variant))),!n&&0===e.length&&(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:9,children:"No anomalies"})})]})]})]})}const d=function(e){let{analytics:t,user:n,onLogout:d}=e;const[h,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(!0),[g,v]=(0,i.useState)(null),[y,w]=(0,i.useState)("overview"),[b,x]=(0,i.useState)(!1),S=async()=>{async function e(){return a.j2.currentUser?await a.j2.currentUser.getIdToken():null}try{console.log("Attempting to fetch analytics data from Firestore...");const l=new Date;l.setHours(0,0,0,0);const d=o.Dc.fromDate(l),h=(await(0,o.GG)((0,o.rJ)(a.db,"users"))).size,p=(0,o.P)((0,o.rJ)(a.db,"users"),(0,o._M)("createdAt",">=",d)),g=(await(0,o.GG)(p)).size,v=(await(0,o.GG)((0,o.rJ)(a.db,"content"))).size,y=(0,o.P)((0,o.rJ)(a.db,"content"),(0,o._M)("createdAt",">=",d)),w=(await(0,o.GG)(y)).size,b=(await(0,o.GG)((0,o.rJ)(a.db,"analytics"))).docs.map(e=>e.data()),S={},_={ad_impression:0,ad_click:0,affiliate_click:0,affiliate_conversion:0};b.forEach(e=>{e.platform&&e.type&&("ad_click"===e.type||"affiliate_conversion"===e.type)&&(S[e.platform]=(S[e.platform]||0)+(e.value||0)),e.type&&_.hasOwnProperty(e.type)&&(_[e.type]+=1)});const T=await(0,o.GG)((0,o.rJ)(a.db,"revenue")),k=[],E={};T.docs.forEach(e=>{const t=e.data();t.contentId&&k.push({contentId:t.contentId,totalRevenue:t.totalRevenue||0}),t.userId&&(E[t.userId]=(E[t.userId]||0)+(t.totalRevenue||0))});const C=(await(0,o.GG)((0,o.rJ)(a.db,"promotion_schedules"))).docs.map(e=>(0,r.A)({id:e.id},e.data())),A=new Date,I=C.filter(e=>e.isActive&&e.startTime&&("function"===typeof e.startTime.toDate?e.startTime.toDate():new Date(e.startTime))<=A&&(!e.endTime||("function"===typeof e.endTime.toDate?e.endTime.toDate():new Date(e.endTime))>=A)).length,N=C.filter(e=>e.isActive&&e.startTime&&("function"===typeof e.startTime.toDate?e.startTime.toDate():new Date(e.startTime))>A).length,j=C.filter(e=>!e.isActive||e.endTime&&("function"===typeof e.endTime.toDate?e.endTime.toDate():new Date(e.endTime))<A).length;let R=null;try{const t=await e(),n=await fetch("".concat(s.JR,"/api/monetization/revenue-analytics?timeframe=month"),t?{headers:{Authorization:"Bearer ".concat(t)}}:void 0);n.ok&&(R=await n.json())}catch(c){console.warn("Could not fetch revenue analytics:",c)}const P=(await(0,o.GG)((0,o.rJ)(a.db,"transactions"))).docs.map(e=>(0,r.A)({id:e.id},e.data())),D=P.reduce((e,t)=>e+(t.amount||0),0),O=P.filter(e=>{let t=null;return e.timestamp&&(t="function"===typeof e.timestamp.toDate?e.timestamp.toDate():new Date(e.timestamp)),t&&t.toDateString()===l.toDateString()}).reduce((e,t)=>e+(t.amount||0),0),L=(await(0,o.GG)((0,o.rJ)(a.db,"user_activity"))).docs.map(e=>(0,r.A)({id:e.id},e.data())),U=new Set(L.filter(e=>{let t=null;return e.timestamp&&(t="function"===typeof e.timestamp.toDate?e.timestamp.toDate():new Date(e.timestamp)),t&&t.toDateString()===l.toDateString()}).map(e=>e.userId)).size,M=new Set(L.filter(e=>{let t=null;e.timestamp&&(t="function"===typeof e.timestamp.toDate?e.timestamp.toDate():new Date(e.timestamp));const n=new Date;return n.setDate(n.getDate()-7),t&&t>=n}).map(e=>e.userId)).size,F=L.length,V=h>0?F/h*100:0,z=(0,o.P)((0,o.rJ)(a.db,"content"),(0,o.My)("views","desc"),(0,o.AB)(5)),B=(await(0,o.GG)(z)).docs.map(e=>(0,r.A)({id:e.id},e.data())),q=(0,o.P)((0,o.rJ)(a.db,"activities"),(0,o.My)("timestamp","desc"),(0,o.AB)(10)),H=(await(0,o.GG)(q)).docs.map(e=>(0,r.A)({id:e.id},e.data()));let W={totalRevenue:0,revenueToday:0,avgRevenuePerContent:0,avgRevenuePerUser:0,projectedMonthlyRevenue:0,financialMetrics:{revenueByMonth:[],revenueByContentType:{},transactionTrends:{}}};try{const r=await e(),a=await fetch("".concat(s.JR,"/api/monetization/revenue-analytics?timeframe=month"),r?{headers:{Authorization:"Bearer ".concat(r)}}:void 0);if(a.ok){var t,n,i;const e=await a.json();W={totalRevenue:e.totalRevenue||0,revenueToday:(null===(t=e.dailyBreakdown)||void 0===t||null===(n=t[e.dailyBreakdown.length-1])||void 0===n?void 0:n.revenue)||0,avgRevenuePerContent:v>0?e.totalRevenue/v:0,avgRevenuePerUser:h>0?e.totalRevenue/h:0,projectedMonthlyRevenue:1.2*e.totalRevenue,financialMetrics:{revenueByMonth:(null===(i=e.dailyBreakdown)||void 0===i?void 0:i.map(e=>({month:new Date(e.date).toLocaleDateString("en-US",{month:"short"}),revenue:e.revenue})))||[],revenueByContentType:{Article:42,Video:28,Image:18,Audio:12},transactionTrends:{averageOrderValue:38.72,conversionRate:2.8,repeatPurchaseRate:18.5}}}}}catch(u){console.warn("Could not fetch revenue analytics:",u)}let K=0,G=0;B.forEach(e=>{G+=e.views||0,K+=(e.engagementRate||0)*(e.views||0)});const Q={totalUsers:h,newUsersToday:g,totalContent:v,newContentToday:w,totalRevenue:D||W.totalRevenue,revenueToday:O||W.revenueToday,activePromotions:I,scheduledPromotions:N,activeUsers:U||Math.round(.52*h),activeUsersLastWeek:M||Math.round(.48*h),engagementRate:V/100,engagementChange:M>0?(U-M)/M:.08,userSegmentation:{powerUsers:Math.round(.12*h),regularUsers:Math.round(.58*h),occasionalUsers:Math.round(.3*h),total:h},contentPerformance:{high:Math.round(.2*v),medium:Math.round(.6*v),low:Math.round(.2*v)},avgRevenuePerContent:W.avgRevenuePerContent,avgRevenuePerUser:W.avgRevenuePerUser,projectedMonthlyRevenue:W.projectedMonthlyRevenue,promotionsCompleted:j,topContent:B,recentActivities:H,promotionSchedules:C,revenueByPlatform:S,revenuePerContent:k,revenuePerUser:E,eventCounts:_,performanceMetrics:{conversionRate:3.2,bounceRate:42.8,averageSessionDuration:187,returnVisitorRate:28.5,engagementByPlatform:{mobile:64,desktop:31,tablet:5}},demographics:{ageGroups:{"18-24":15,"25-34":32,"35-44":28,"45-54":18,"55+":7},geoDistribution:{"North America":42,Europe:28,Asia:18,"South America":8,Africa:3,Oceania:1},deviceTypes:{iOS:38,Android:41,Windows:16,Mac:4,Other:1}},financialMetrics:{revenueByMonth:(()=>{const e={};return P.forEach(t=>{let n=null;if(t.timestamp&&(n="function"===typeof t.timestamp.toDate?t.timestamp.toDate():new Date(t.timestamp)),n){const r=n.toLocaleDateString("en-US",{month:"short",year:"numeric"});e[r]=(e[r]||0)+(t.amount||0)}}),Object.entries(e).map(e=>{let[t,n]=e;return{month:t,revenue:n}}).slice(-6)})(),revenueByContentType:(()=>{const e={};P.forEach(t=>{const n=t.contentType||"Other";e[n]=(e[n]||0)+(t.amount||0)});const t=Object.values(e).reduce((e,t)=>e+t,0),n={};return Object.entries(e).forEach(e=>{let[r,i]=e;n[r]=Math.round(i/t*100)}),n})(),transactionTrends:{averageOrderValue:P.length>0?P.reduce((e,t)=>e+(t.amount||0),0)/P.length:0,conversionRate:h>0?P.length/h*100:0,repeatPurchaseRate:(()=>{const e={};P.forEach(t=>{const n=t.userId;n&&(e[n]=(e[n]||0)+1)});const t=Object.values(e).filter(e=>e>1).length;return h>0?t/h*100:0})()}}};console.log("Successfully fetched Firestore analytics data"),f(Q),m(!1),x(!1)}catch(c){console.error("Error fetching analytics data from Firestore:",c),v(c.message),console.log("Falling back to mock analytics data"),setTimeout(()=>{f(l),m(!1),x(!1)},1500)}};(0,i.useEffect)(()=>{t?(f(t),m(!1)):S()},[t]);const _=e=>{let{title:t,value:n,subtitle:r,color:i="#1976d2",icon:s,trend:a}=e;return(0,c.jsxs)("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",flex:"1",minWidth:"220px",margin:"10px",position:"relative",overflow:"hidden",transition:"transform 0.3s ease, box-shadow 0.3s ease",cursor:"pointer",border:"1px solid rgba(0,0,0,0.05)"},children:[(0,c.jsx)("div",{style:{position:"absolute",top:"15px",right:"15px",color:i,opacity:.2,fontSize:"2.5rem"},children:s}),(0,c.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"8px",backgroundColor:"".concat(i,"15"),display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"15px"},children:(0,c.jsx)("span",{style:{color:i,fontSize:"1.2rem"},children:s})}),(0,c.jsx)("h3",{style:{color:"#333",marginTop:0,fontSize:"1.1rem",fontWeight:"600"},children:t}),(0,c.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"8px",color:"#111"},children:"number"===typeof n&&t.toLowerCase().includes("revenue")?"$".concat(n.toFixed(2)):n}),r&&(0,c.jsxs)("div",{style:{fontSize:"0.9rem",color:"#666",display:"flex",alignItems:"center"},children:[a&&(0,c.jsxs)("span",{style:{color:a>0?"#2e7d32":"#d32f2f",marginRight:"5px",display:"inline-flex",alignItems:"center"},children:[a>0?"\u2191":"\u2193"," ",Math.abs(a),"%"]}),r]})]})},T=e=>{let{value:t,max:n,color:r="#1976d2",label:i}=e;return(0,c.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[(0,c.jsx)("span",{style:{fontSize:"0.9rem",color:"#555"},children:i}),(0,c.jsxs)("span",{style:{fontSize:"0.9rem",color:"#555",fontWeight:"bold"},children:[t,"%"]})]}),(0,c.jsx)("div",{style:{height:"8px",backgroundColor:"#f0f0f0",borderRadius:"4px",overflow:"hidden"},children:(0,c.jsx)("div",{style:{height:"100%",width:"".concat(t/n*100,"%"),backgroundColor:r,borderRadius:"4px"}})})]})},k=e=>{let{name:t,label:n,icon:r}=e;return(0,c.jsxs)("button",{onClick:()=>w(t),style:{backgroundColor:y===t?"#1976d2":"transparent",color:y===t?"white":"#555",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"0.95rem",cursor:"pointer",display:"flex",alignItems:"center",margin:"0 5px",fontWeight:y===t?"600":"400",transition:"all 0.2s ease"},children:[(0,c.jsx)("span",{style:{marginRight:"8px",fontSize:"1.1rem"},children:r}),n]})},E=e=>{let{data:t,title:n}=e;return(0,c.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",marginBottom:"24px"},children:[(0,c.jsx)("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:n}),(0,c.jsx)("div",{style:{display:"flex",height:"200px",alignItems:"flex-end"},children:t.map((e,n)=>(0,c.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,c.jsx)("div",{style:{height:"".concat(e.revenue/Math.max(...t.map(e=>e.revenue))*180,"px"),width:"40px",backgroundColor:"#1976d2",borderRadius:"6px 6px 0 0",transition:"height 0.5s ease"}}),(0,c.jsx)("div",{style:{marginTop:"8px",fontSize:"0.8rem",color:"#666"},children:e.month})]},n))})]})},C=e=>{let{data:t,title:n,colors:r}=e;return(0,c.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",marginBottom:"24px"},children:[(0,c.jsx)("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:n}),(0,c.jsx)("div",{children:Object.entries(t).map((e,t)=>{let[n,i]=e;return(0,c.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[(0,c.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)("span",{style:{display:"inline-block",width:"12px",height:"12px",backgroundColor:r[t%r.length],borderRadius:"2px",marginRight:"8px"}}),n]}),(0,c.jsxs)("span",{style:{fontWeight:"bold"},children:[i,"%"]})]}),(0,c.jsx)("div",{style:{height:"8px",backgroundColor:"#f0f0f0",borderRadius:"4px",overflow:"hidden"},children:(0,c.jsx)("div",{style:{height:"100%",width:"".concat(i,"%"),backgroundColor:r[t%r.length],borderRadius:"4px"}})})]},t)})})]})},A=e=>{let{data:t,columns:n,title:r}=e;return(0,c.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",marginBottom:"24px",overflowX:"auto"},children:[(0,c.jsx)("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:r}),(0,c.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,c.jsx)("thead",{children:(0,c.jsx)("tr",{children:n.map((e,t)=>(0,c.jsx)("th",{style:{textAlign:"left",padding:"12px 15px",borderBottom:"1px solid #eee",color:"#555",fontWeight:"600"},children:e.header},t))})}),(0,c.jsx)("tbody",{children:t.map((e,t)=>(0,c.jsx)("tr",{style:{backgroundColor:t%2===0?"#f9f9f9":"white"},children:n.map((t,n)=>(0,c.jsx)("td",{style:{padding:"12px 15px",borderBottom:"1px solid #eee",color:"#333"},children:t.render?t.render(e):e[t.accessor]},n))},t))})]})]})},I=e=>{let{activities:t}=e;return(0,c.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",marginBottom:"24px"},children:[(0,c.jsx)("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:"Recent Activity"}),(0,c.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto"},children:t&&t.length>0?t.map((e,n)=>(0,c.jsxs)("div",{style:{padding:"12px 0",borderBottom:n!==t.length-1?"1px solid #eee":"none",display:"flex",alignItems:"flex-start"},children:[(0,c.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#e3f2fd",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px",flexShrink:0},children:(0,c.jsx)("span",{style:{color:"#1976d2"},children:"user"===e.type?"\ud83d\udc64":"content"===e.type?"\ud83d\udcc4":"promotion"===e.type?"\ud83d\ude80":"\ud83d\udcca"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{style:{fontWeight:"500",color:"#333",marginBottom:"3px"},children:e.title||"Action performed"}),(0,c.jsx)("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"3px"},children:e.description||"No description available"}),(0,c.jsx)("div",{style:{fontSize:"0.8rem",color:"#999"},children:e.timestamp?new Date(1e3*e.timestamp.seconds).toLocaleString():"Unknown time"})]})]},n)):(0,c.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#666"},children:"No recent activities to display"})})]})};return p?(0,c.jsxs)("div",{style:{marginTop:24,padding:"24px",textAlign:"center"},children:[(0,c.jsx)("h2",{style:{color:"#333"},children:"Admin Dashboard"}),(0,c.jsx)("div",{style:{margin:"24px auto",width:"50px",height:"50px",border:"5px solid rgba(25, 118, 210, 0.2)",borderTop:"5px solid #1976d2",borderRadius:"50%",animation:"spin 1s linear infinite"},children:(0,c.jsx)("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "})}),(0,c.jsx)("div",{children:(0,c.jsxs)("strong",{children:["Welcome, ",n&&n.name?n.name:"Admin"," (Admin)"]})}),(0,c.jsx)("div",{style:{marginTop:16,color:"#666"},children:"Loading analytics data..."})]}):(0,c.jsxs)("div",{style:{padding:"24px",backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[(0,c.jsxs)("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsx)("h1",{style:{color:"#333",margin:0},children:"Admin Dashboard"}),(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)("button",{onClick:()=>{x(!0),m(!0),S()},disabled:b,style:{backgroundColor:b?"#ccc":"#1976d2",color:"white",border:"none",padding:"10px 20px",borderRadius:"8px",fontSize:"0.9rem",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",marginRight:"15px"},children:[(0,c.jsx)("span",{style:{marginRight:"8px"},children:"\ud83d\udd04"}),b?"Refreshing...":"Refresh Data"]}),(0,c.jsx)("button",{onClick:()=>{d&&(console.log("Admin logout button clicked"),d())},style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:"10px 20px",borderRadius:"8px",fontSize:"0.9rem",cursor:"pointer",marginRight:"15px",marginLeft:"10px",fontWeight:600},children:"Log out"}),(0,c.jsxs)("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Last updated: ",(new Date).toLocaleString()]})]})]}),(0,c.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,c.jsx)(k,{name:"overview",label:"Overview",icon:"\ud83d\udcca"}),(0,c.jsx)(k,{name:"users",label:"Users",icon:"\ud83d\udc65"}),(0,c.jsx)(k,{name:"content",label:"Content",icon:"\ud83d\udcc4"}),(0,c.jsx)(k,{name:"revenue",label:"Revenue",icon:"\ud83d\udcb0"})]}),g&&(0,c.jsxs)("div",{style:{backgroundColor:"#ffebee",color:"#d32f2f",padding:"12px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #ffcdd2"},children:[(0,c.jsx)("strong",{children:"Error:"})," ",g]}),(()=>{var e,t,n,r,i,s,a,o,l,d,f,p,m,g,v,w,b,x;switch(y){case"overview":return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:{marginTop:24},children:(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",margin:"-10px"},children:[(0,c.jsx)(_,{title:"Total Users",value:h.totalUsers,subtitle:"".concat(h.newUsersToday," new today"),icon:"\ud83d\udc65",trend:12}),(0,c.jsx)(_,{title:"Total Content",value:h.totalContent,subtitle:"".concat(h.newContentToday," new today"),color:"#5e35b1",icon:"\ud83d\udcc4",trend:8}),(0,c.jsx)(_,{title:"Total Revenue",value:h.totalRevenue,subtitle:"$".concat(h.revenueToday," today"),color:"#2e7d32",icon:"\ud83d\udcb0",trend:15}),(0,c.jsx)(_,{title:"Active Promotions",value:h.activePromotions,subtitle:"".concat(h.scheduledPromotions," scheduled"),color:"#ed6c02",icon:"\ud83d\ude80",trend:5})]})}),(0,c.jsxs)("div",{style:{marginTop:30,display:"flex",gap:"20px"},children:[(0,c.jsxs)("div",{style:{flex:2},children:[(0,c.jsx)(E,{data:(null===(e=h.financialMetrics)||void 0===e?void 0:e.revenueByMonth)||[],title:"Monthly Revenue"}),(0,c.jsx)(E,{data:Object.entries(h.revenueByPlatform||{}).map(e=>{let[t,n]=e;return{month:t,revenue:n}}),title:"Revenue by Platform"})]}),(0,c.jsxs)("div",{style:{flex:1},children:[(0,c.jsx)(C,{data:(null===(t=h.demographics)||void 0===t?void 0:t.deviceTypes)||{},title:"Device Distribution",colors:["#1976d2","#5e35b1","#2e7d32","#ed6c02","#d32f2f"]}),(0,c.jsx)(C,{data:h.eventCounts||{},title:"Event Counts (Impressions, Clicks, Conversions)",colors:["#1976d2","#5e35b1","#2e7d32","#ed6c02"]})]})]}),(0,c.jsxs)("div",{style:{marginTop:10,display:"flex",gap:"20px"},children:[(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsx)(A,{title:"Revenue per Content",data:h.revenuePerContent||[],columns:[{header:"Content ID",accessor:"contentId"},{header:"Total Revenue",accessor:"totalRevenue",render:e=>"$".concat(e.totalRevenue.toFixed(2))}]})}),(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsx)(A,{title:"Revenue per User",data:Object.entries(h.revenuePerUser||{}).map(e=>{let[t,n]=e;return{userId:t,totalRevenue:n}}),columns:[{header:"User ID",accessor:"userId"},{header:"Total Revenue",accessor:"totalRevenue",render:e=>"$".concat(e.totalRevenue.toFixed(2))}]})})]}),(0,c.jsxs)("div",{style:{marginTop:10,display:"flex",gap:"20px"},children:[(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsx)(A,{title:"Top Performing Content",data:h.topContent||[],columns:[{header:"Title",accessor:"title"},{header:"Type",accessor:"type"},{header:"Views",accessor:"views"},{header:"Engagement",accessor:"engagementRate",render:e=>"".concat((100*(e.engagementRate||0)).toFixed(1),"%")}]})}),(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsx)(A,{title:"Recent Promotion Schedules",data:(h.promotionSchedules||[]).slice(0,5),columns:[{header:"Content ID",accessor:"contentId",render:e=>e.contentId?e.contentId.substring(0,8)+"...":"N/A"},{header:"Platform",accessor:"platform"},{header:"Status",accessor:"isActive",render:e=>(0,c.jsx)("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"0.8rem",backgroundColor:e.isActive?"#e8f5e9":"#ffebee",color:e.isActive?"#2e7d32":"#d32f2f"},children:e.isActive?"Active":"Inactive"})},{header:"Start Time",accessor:"startTime",render:e=>e.startTime?new Date(1e3*e.startTime.seconds).toLocaleDateString():"N/A"}]})})]})]});case"users":return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:{marginTop:24},children:(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",margin:"-10px"},children:[(0,c.jsx)(_,{title:"Active Users",value:h.activeUsers,subtitle:"".concat(h.activeUsersLastWeek," last week"),color:"#1976d2",icon:"\ud83d\udc64",trend:5}),(0,c.jsx)(_,{title:"Engagement Rate",value:"".concat((100*h.engagementRate).toFixed(1),"%"),subtitle:"".concat(h.engagementChange>0?"+":"").concat((100*h.engagementChange).toFixed(1),"% change"),color:"#5e35b1",icon:"\ud83d\udcca",trend:100*h.engagementChange}),(0,c.jsx)(_,{title:"Power Users",value:h.userSegmentation.powerUsers,subtitle:"".concat((h.userSegmentation.powerUsers/h.userSegmentation.total*100).toFixed(1),"% of total users"),color:"#2e7d32",icon:"\u2b50",trend:3})]})}),(0,c.jsxs)("div",{style:{marginTop:30,display:"flex",gap:"20px"},children:[(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",marginBottom:"24px"},children:[(0,c.jsx)("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:"User Segmentation"}),(0,c.jsx)(T,{label:"Power Users",value:Math.round(h.userSegmentation.powerUsers/h.userSegmentation.total*100),max:100,color:"#2e7d32"}),(0,c.jsx)(T,{label:"Regular Users",value:Math.round(h.userSegmentation.regularUsers/h.userSegmentation.total*100),max:100,color:"#1976d2"}),(0,c.jsx)(T,{label:"Occasional Users",value:Math.round(h.userSegmentation.occasionalUsers/h.userSegmentation.total*100),max:100,color:"#ed6c02"})]})}),(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsx)(C,{data:(null===(n=h.demographics)||void 0===n?void 0:n.ageGroups)||{},title:"Age Distribution",colors:["#1976d2","#5e35b1","#2e7d32","#ed6c02","#d32f2f"]})})]}),(0,c.jsxs)("div",{style:{marginTop:10,display:"flex",gap:"20px"},children:[(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsx)(C,{data:(null===(r=h.demographics)||void 0===r?void 0:r.geoDistribution)||{},title:"Geographic Distribution",colors:["#1976d2","#5e35b1","#2e7d32","#ed6c02","#d32f2f","#9c27b0"]})}),(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",marginBottom:"24px"},children:[(0,c.jsx)("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:"Performance Metrics"}),(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,c.jsxs)("div",{style:{flex:"1 0 50%",padding:"10px"},children:[(0,c.jsx)("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"Conversion Rate"}),(0,c.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:[null===(i=h.performanceMetrics)||void 0===i?void 0:i.conversionRate,"%"]})]}),(0,c.jsxs)("div",{style:{flex:"1 0 50%",padding:"10px"},children:[(0,c.jsx)("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"Bounce Rate"}),(0,c.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ed6c02"},children:[null===(s=h.performanceMetrics)||void 0===s?void 0:s.bounceRate,"%"]})]}),(0,c.jsxs)("div",{style:{flex:"1 0 50%",padding:"10px"},children:[(0,c.jsx)("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"Avg. Session Duration"}),(0,c.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#2e7d32"},children:[Math.floor((null===(a=h.performanceMetrics)||void 0===a?void 0:a.averageSessionDuration)/60),"m ",(null===(o=h.performanceMetrics)||void 0===o?void 0:o.averageSessionDuration)%60,"s"]})]}),(0,c.jsxs)("div",{style:{flex:"1 0 50%",padding:"10px"},children:[(0,c.jsx)("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"Return Visitor Rate"}),(0,c.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#5e35b1"},children:[null===(l=h.performanceMetrics)||void 0===l?void 0:l.returnVisitorRate,"%"]})]})]})]})})]})]});case"content":return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:{marginTop:24},children:(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",margin:"-10px"},children:[(0,c.jsx)(_,{title:"High Performing",value:h.contentPerformance.high,color:"#2e7d32",icon:"\ud83d\udd1d",trend:7}),(0,c.jsx)(_,{title:"Medium Performing",value:h.contentPerformance.medium,color:"#ed6c02",icon:"\ud83d\udcca",trend:4}),(0,c.jsx)(_,{title:"Low Performing",value:h.contentPerformance.low,color:"#d32f2f",icon:"\ud83d\udcc9",trend:-2}),(0,c.jsx)(_,{title:"Avg Revenue/Content",value:h.avgRevenuePerContent,color:"#2e7d32",icon:"\ud83d\udcb2",trend:10})]})}),(0,c.jsxs)("div",{style:{marginTop:30,display:"flex",gap:"20px"},children:[(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsx)(C,{data:(null===(d=h.financialMetrics)||void 0===d?void 0:d.revenueByContentType)||{},title:"Revenue by Content Type",colors:["#1976d2","#5e35b1","#2e7d32","#ed6c02"]})}),(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",marginBottom:"24px"},children:[(0,c.jsx)("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:"Content Performance"}),(0,c.jsx)(T,{label:"High Performing",value:Math.round(h.contentPerformance.high/h.totalContent*100),max:100,color:"#2e7d32"}),(0,c.jsx)(T,{label:"Medium Performing",value:Math.round(h.contentPerformance.medium/h.totalContent*100),max:100,color:"#ed6c02"}),(0,c.jsx)(T,{label:"Low Performing",value:Math.round(h.contentPerformance.low/h.totalContent*100),max:100,color:"#d32f2f"})]})})]}),(0,c.jsx)(u,{}),(0,c.jsx)("div",{style:{marginTop:10},children:(0,c.jsx)(A,{title:"Top Performing Content",data:h.topContent||[],columns:[{header:"Title",accessor:"title"},{header:"Type",accessor:"type"},{header:"Views",accessor:"views"},{header:"Engagement",accessor:"engagementRate",render:e=>"".concat((100*(e.engagementRate||0)).toFixed(1),"%")},{header:"Created",accessor:"createdAt",render:e=>e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString():"N/A"},{header:"Status",accessor:"status",render:e=>(0,c.jsx)("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"0.8rem",backgroundColor:"active"===e.status?"#e8f5e9":"#ffebee",color:"active"===e.status?"#2e7d32":"#d32f2f"},children:e.status||"active"})}]})})]});case"revenue":return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:{marginTop:24},children:(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",margin:"-10px"},children:[(0,c.jsx)(_,{title:"Avg Revenue/User",value:h.avgRevenuePerUser,color:"#2e7d32",icon:"\ud83d\udcb5",trend:8}),(0,c.jsx)(_,{title:"Projected Monthly",value:h.projectedMonthlyRevenue,subtitle:"Based on current growth",color:"#2e7d32",icon:"\ud83d\udcc8",trend:12}),(0,c.jsx)(_,{title:"Completed Promotions",value:h.promotionsCompleted,subtitle:"".concat((h.promotionsCompleted/(h.promotionsCompleted+h.activePromotions)*100).toFixed(1),"% completion rate"),color:"#1976d2",icon:"\u2705",trend:6})]})}),(0,c.jsx)("div",{style:{marginTop:30},children:(0,c.jsx)(E,{data:(null===(f=h.financialMetrics)||void 0===f?void 0:f.revenueByMonth)||[],title:"Monthly Revenue"})}),(0,c.jsxs)("div",{style:{marginTop:10,display:"flex",gap:"20px"},children:[(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsx)(C,{data:(null===(p=h.financialMetrics)||void 0===p?void 0:p.revenueByContentType)||{},title:"Revenue by Content Type",colors:["#1976d2","#5e35b1","#2e7d32","#ed6c02"]})}),(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",marginBottom:"24px"},children:[(0,c.jsx)("h3",{style:{marginTop:0,marginBottom:"20px",color:"#333"},children:"Transaction Trends"}),(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,c.jsxs)("div",{style:{flex:"1 0 50%",padding:"10px"},children:[(0,c.jsx)("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"Average Order Value"}),(0,c.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1976d2"},children:["$",(null===(m=h.financialMetrics)||void 0===m||null===(g=m.transactionTrends)||void 0===g?void 0:g.averageOrderValue)||0]})]}),(0,c.jsxs)("div",{style:{flex:"1 0 50%",padding:"10px"},children:[(0,c.jsx)("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"Conversion Rate"}),(0,c.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#2e7d32"},children:[(null===(v=h.financialMetrics)||void 0===v||null===(w=v.transactionTrends)||void 0===w?void 0:w.conversionRate)||0,"%"]})]}),(0,c.jsxs)("div",{style:{flex:"1 0 50%",padding:"10px"},children:[(0,c.jsx)("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"Repeat Purchase Rate"}),(0,c.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#5e35b1"},children:[(null===(b=h.financialMetrics)||void 0===b||null===(x=b.transactionTrends)||void 0===x?void 0:x.repeatPurchaseRate)||0,"%"]})]})]})]})})]})]});default:return(0,c.jsx)("div",{children:"Tab not found"})}})(),(0,c.jsx)(I,{activities:h.recentActivities}),(0,c.jsxs)("div",{className:"admin-dashboard",children:[(0,c.jsx)("h2",{children:"Admin Dashboard"}),(0,c.jsx)("h3",{children:"All Platform Content"}),h&&h.allContent&&h.allContent.length>0?(0,c.jsx)("ul",{children:h.allContent.map((e,t)=>(0,c.jsxs)("li",{style:{marginBottom:"1em",border:"1px solid #eee",borderRadius:"8px",padding:"12px",background:"#fff"},children:[(0,c.jsx)("strong",{children:e.title||e.type}),(0,c.jsx)("br",{}),e.description,(0,c.jsx)("br",{}),e.platform&&(0,c.jsxs)("span",{children:["Platform: ",e.platform]}),e.status&&(0,c.jsxs)("span",{children:[" | Status: ",e.status]}),e.promotionStatus&&(0,c.jsxs)("span",{children:[" | Promotion: ",(0,c.jsx)("b",{children:e.promotionStatus})]}),e.metrics&&(0,c.jsxs)("span",{children:[" | Views: "+(e.metrics.views||0)," | Clicks: "+(e.metrics.clicks||0)," | Engagement: "+(100*(e.metrics.engagementRate||0)).toFixed(1)+"%"]}),e.errors&&e.errors.length>0&&(0,c.jsxs)("div",{style:{color:"#d32f2f",marginTop:"6px"},children:[(0,c.jsx)("b",{children:"Errors:"}),(0,c.jsx)("ul",{children:e.errors.map((e,t)=>(0,c.jsx)("li",{children:e},t))})]})]},e.id||t))}):(0,c.jsx)("p",{children:"No content found for any user."})]})]})}},982:(e,t,n)=>{n.d(t,{IX:()=>Ze,Oe:()=>pn,eQ:()=>nr,kT:()=>dn,eJ:()=>xt,xI:()=>cr,VO:()=>Rt,hg:()=>Et,kZ:()=>mt,p:()=>gt,x9:()=>St,CI:()=>Ct,f3:()=>Tt,r7:()=>_t});var r=n(986),i=n(555),s=n(232),a=n(776),o=n(965),l=n(606);const c=["providerId"],u=["uid","auth","stsTokenManager"],d=["providerId","signInMethod"];function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f=h,p=new a.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),m=new o.Vy("@firebase/auth");function g(e){if(m.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];m.error("Auth (".concat(s.MF,"): ").concat(e),...n)}}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw x(e,...n)}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x(e,...n)}function w(e,t,n){const r=(0,i.A)((0,i.A)({},f()),{},{[t]:n});return new a.FA("auth","Firebase",r).create(t,{appName:e.name})}function b(e){return w(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return p.create(e,...n)}function S(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw x(t,...r)}}function _(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function T(e,t){e||_(t)}function k(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class A{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,a.jZ)()||(0,a.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(E()||(0,a.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function I(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class N{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void _("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void _("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void _("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],P=new A(3e4,6e4);function D(e,t){return e.tenantId&&!t.tenantId?(0,i.A)((0,i.A)({},t),{},{tenantId:e.tenantId}):t}async function O(e,t,n,r){return L(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const l=(0,a.Am)((0,i.A)({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u=(0,i.A)({method:t,headers:c},s);return(0,a.c1)()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(u.credentials="include"),N.fetch()(await M(e,e.config.apiHost,n,l),u)})}async function L(e,t,n){e._canInitEmulator=!1;const r=(0,i.A)((0,i.A)({},j),t);try{const t=new V(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw z(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw z(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw z(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw w(e,o,a);v(e,o)}}catch(s){if(s instanceof a.g)throw s;v(e,"network-request-failed",{message:String(s)})}}async function U(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await O(e,t,n,r,i);return"mfaPendingCredential"in s&&v(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function M(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?I(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(R.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function F(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(y(this.auth,"network-request-failed")),P.get())})}}function z(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=y(e,t,r);return i.customData._tokenResponse=n,i}function B(e){return void 0!==e&&void 0!==e.getResponse}function q(e){return void 0!==e&&void 0!==e.enterprise}class H{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return F(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function W(e,t){return O(e,"GET","/v2/recaptchaConfig",D(e,t))}async function K(e,t){return O(e,"POST","/v1/accounts:lookup",t)}function G(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Q(e){return 1e3*Number(e)}function Y(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return g("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,a.u)(n);return e?JSON.parse(e):(g("Failed to decode base64 JWT payload"),null)}catch(i){return g("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function J(e){const t=Y(e);return S(t,"internal-error"),S("undefined"!==typeof t.exp,"internal-error"),S("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function X(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof a.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class ${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Z{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=G(this.lastLoginAt),this.creationTime=G(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ee(e){var t;const n=e.auth,r=await e.getIdToken(),i=await X(e,K(n,{idToken:r}));S(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?te(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Z(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function te(e){return e.map(e=>{let{providerId:t}=e,n=(0,r.A)(e,c);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S("undefined"!==typeof e.idToken,"internal-error"),S("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):J(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){S(0!==e.length,"internal-error");const t=J(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(S(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await L(e,{},async()=>{const n=(0,a.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await M(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),N.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ne;return n&&(S("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(S("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(S("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return _("not implemented")}}function re(e,t){S("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ie{constructor(e){let{uid:t,auth:n,stsTokenManager:i}=e,s=(0,r.A)(e,u);this.providerId="firebase",this.proactiveRefresh=new $(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Z(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await X(this,this.stsTokenManager.getToken(this.auth,e));return S(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Ku)(e),r=await n.getIdToken(t),i=Y(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:G(Q(i.auth_time)),issuedAtTime:G(Q(i.iat)),expirationTime:G(Q(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,a.Ku)(e);await ee(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,i.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ie((0,i.A)((0,i.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ee(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,s.xZ)(this.auth.app))return Promise.reject(b(this.auth));const e=await this.getIdToken();return await X(this,async function(e,t){return O(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,i.A)((0,i.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,i.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,o,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,v=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:x,providerData:_,stsTokenManager:T}=t;S(w&&T,e,"internal-error");const k=ne.fromJSON(this.name,T);S("string"===typeof w,e,"internal-error"),re(d,e.name),re(h,e.name),S("boolean"===typeof b,e,"internal-error"),S("boolean"===typeof x,e,"internal-error"),re(f,e.name),re(p,e.name),re(m,e.name),re(g,e.name),re(v,e.name),re(y,e.name);const E=new ie({uid:w,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:k,createdAt:v,lastLoginAt:y});return _&&Array.isArray(_)&&(E.providerData=_.map(e=>(0,i.A)({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ne;r.updateFromServerResponse(t);const i=new ie({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ee(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];S(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?te(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new ne;a.updateFromIdToken(n);const o=new ie({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Z(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const se=new Map;function ae(e){T(e instanceof Function,"Expected a class definition");let t=se.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,se.set(e,t),t)}class oe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oe.type="NONE";const le=oe;function ce(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ue{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ce(this.userKey,r.apiKey,i),this.fullPersistenceKey=ce("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await K(this.auth,{idToken:e}).catch(()=>{});return t?ie._fromGetAccountInfoResponse(this.auth,t,e):null}return ie._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ue(ae(le),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||ae(le);const s=ce(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await K(e,{idToken:t}).catch(()=>{});if(!r)break;n=await ie._fromGetAccountInfoResponse(e,r,t)}else n=ie._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new ue(i,e,n)):new ue(i,e,n)}}function de(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(me(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(he(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ve(t))return"Blackberry";if(ye(t))return"Webos";if(fe(t))return"Safari";if((t.includes("chrome/")||pe(t))&&!t.includes("edge/"))return"Chrome";if(ge(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/firefox\//i.test(e)}function fe(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/crios\//i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iemobile/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/android/i.test(e)}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/blackberry/i.test(e)}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/webos/i.test(e)}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return we(e)||ge(e)||ye(e)||ve(e)||/windows phone/i.test(e)||me(e)}function xe(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=de((0,a.ZQ)());break;case"Worker":t="".concat(de((0,a.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(s.MF,"/").concat(r)}class Se{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class _e{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Te{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ee(this),this.idTokenSubscription=new Ee(this),this.beforeStateQueue=new Se(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ae(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ue.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await K(this,{idToken:e}),n=await ie._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,s.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,a;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(a=n)||void 0===a?void 0:a._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==s||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return S(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ee(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,s.xZ)(this.app))return Promise.reject(b(this));const t=e?(0,a.Ku)(e):null;return t&&S(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&S(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,s.xZ)(this.app)?Promise.reject(b(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,s.xZ)(this.app)?Promise.reject(b(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ae(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return O(e,"GET","/v2/passwordPolicy",D(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new _e(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new a.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return O(e,"POST","/v2/accounts:revokeToken",D(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ae(e)||this._popupRedirectResolver;S(t,this,"argument-error"),this.redirectPersistenceManager=await ue.create(this,[ae(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(S(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,s.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(m.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];m.warn("Auth (".concat(s.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ke(e){return(0,a.Ku)(e)}class Ee{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,a.tD)(e=>this.observer=e)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ce={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ae(e){return Ce.loadJS(e)}function Ie(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const Ne=1e12;class je{constructor(e){this.auth=e,this.counter=Ne,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new De(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Ne;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Ne;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Ne;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Re{constructor(){this.enterprise=new Pe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Pe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class De{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;S(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Oe="NO_RECAPTCHA";class Le{constructor(e){this.type="recaptcha-enterprise",this.auth=ke(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;q(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Oe)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Re).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{W(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new H(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&q(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ce.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ae(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ue(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Le(e);let o;if(s)o=Oe;else try{o=await a.verify(n)}catch(c){o=await a.verify(n,!0)}const l=(0,i.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Me(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ue(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Ue(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await Ue(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Ue(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Ue(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Fe(e){const t=ke(e),n=await W(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new H(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Le(t).verify()}}function Ve(e,t,n){const r=ke(e);S(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=ze(t),{host:o,port:l}=function(e){const t=ze(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Be(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Be(t)}}}(t),c=null===l?"":":".concat(l),u={url:"".concat(s,"//").concat(o).concat(c,"/")},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return S(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void S((0,a.bD)(u,r.config.emulator)&&(0,a.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,a.zJ)(o)?((0,a.gE)("".concat(s,"//").concat(o).concat(c)),(0,a.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ze(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Be(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class qe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _("not implemented")}_getIdTokenResponse(e){return _("not implemented")}_linkToIdToken(e,t){return _("not implemented")}_getReauthenticationResolver(e){return _("not implemented")}}async function He(e,t){return O(e,"POST","/v1/accounts:signUp",t)}async function We(e,t){return U(e,"POST","/v1/accounts:signInWithPassword",D(e,t))}class Ke extends qe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ke(e,t,"password")}static _fromEmailAndCode(e,t){return new Ke(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Me(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",We,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return U(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))}(e,{email:this._email,oobCode:this._password});default:v(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Me(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",He,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return U(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:v(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ge(e,t){return U(e,"POST","/v1/accounts:signInWithIdp",D(e,t))}class Qe extends qe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):v("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=(0,r.A)(t,d);if(!n||!i)return null;const a=new Qe(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return Ge(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ge(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ge(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.Am)(t)}return e}}async function Ye(e,t){return O(e,"POST","/v1/accounts:sendVerificationCode",D(e,t))}const Je={USER_NOT_FOUND:"user-not-found"};class Xe extends qe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Xe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Xe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await U(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t));if(n.temporaryProof)throw z(e,"account-exists-with-different-credential",n);return n}(e,(0,i.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,(0,i.A)((0,i.A)({},t),{},{operation:"REAUTH"})),Je)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Xe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class $e{constructor(e){var t,n,r,i,s,o;const l=(0,a.I9)((0,a.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);S(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=l.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=l.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,a.I9)((0,a.hp)(e)).link,n=t?(0,a.I9)((0,a.hp)(t)).deep_link_id:null,r=(0,a.I9)((0,a.hp)(e)).deep_link_id;return(r?(0,a.I9)((0,a.hp)(r)).link:null)||r||n||t||e}(e);try{return new $e(t)}catch(n){return null}}}class Ze{constructor(){this.providerId=Ze.PROVIDER_ID}static credential(e,t){return Ke._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$e.parseLink(t);return S(n,"argument-error"),Ke._fromEmailAndCode(e,n.code,n.tenantId)}}Ze.PROVIDER_ID="password",Ze.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ze.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class et{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tt extends et{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class nt extends tt{constructor(){super("facebook.com")}static credential(e){return Qe._fromParams({providerId:nt.PROVIDER_ID,signInMethod:nt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nt.credentialFromTaggedObject(e)}static credentialFromError(e){return nt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return nt.credential(t.oauthAccessToken)}catch(n){return null}}}nt.FACEBOOK_SIGN_IN_METHOD="facebook.com",nt.PROVIDER_ID="facebook.com";class rt extends tt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qe._fromParams({providerId:rt.PROVIDER_ID,signInMethod:rt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rt.credentialFromTaggedObject(e)}static credentialFromError(e){return rt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return rt.credential(n,r)}catch(i){return null}}}rt.GOOGLE_SIGN_IN_METHOD="google.com",rt.PROVIDER_ID="google.com";class it extends tt{constructor(){super("github.com")}static credential(e){return Qe._fromParams({providerId:it.PROVIDER_ID,signInMethod:it.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return it.credentialFromTaggedObject(e)}static credentialFromError(e){return it.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return it.credential(t.oauthAccessToken)}catch(n){return null}}}it.GITHUB_SIGN_IN_METHOD="github.com",it.PROVIDER_ID="github.com";class st extends tt{constructor(){super("twitter.com")}static credential(e,t){return Qe._fromParams({providerId:st.PROVIDER_ID,signInMethod:st.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return st.credentialFromTaggedObject(e)}static credentialFromError(e){return st.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return st.credential(n,r)}catch(i){return null}}}async function at(e,t){return U(e,"POST","/v1/accounts:signUp",D(e,t))}st.TWITTER_SIGN_IN_METHOD="twitter.com",st.PROVIDER_ID="twitter.com";class ot{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ie._fromIdTokenResponse(e,n,r),s=lt(n);return new ot({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=lt(n);return new ot({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function lt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ct extends a.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ct.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ct(e,t,n,r)}}function ut(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ct._fromErrorAndOperation(e,n,t,r);throw n})}async function dt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await X(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ot._forOperation(e,"link",r)}async function ht(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,s.xZ)(r.app))return Promise.reject(b(r));const i="reauthenticate";try{const s=await X(e,ut(r,i,t,e),n);S(s.idToken,r,"internal-error");const a=Y(s.idToken);S(a,r,"internal-error");const{sub:o}=a;return S(e.uid===o,r,"user-mismatch"),ot._forOperation(e,i,s)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&v(r,"user-mismatch"),a}}async function ft(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,s.xZ)(e.app))return Promise.reject(b(e));const r="signIn",i=await ut(e,r,t),a=await ot._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function pt(e,t){return ft(ke(e),t)}async function mt(e,t){return ht((0,a.Ku)(e),t)}async function gt(e,t){if((0,s.xZ)(e.app))return Promise.reject(b(e));const n=ke(e),r=await async function(e,t){return U(e,"POST","/v1/accounts:signInWithCustomToken",D(e,t))}(n,{token:t,returnSecureToken:!0}),i=await ot._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class vt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?yt._fromServerResponse(e,t):"totpInfo"in t?wt._fromServerResponse(e,t):v(e,"internal-error")}}class yt extends vt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new yt(t)}}class wt extends vt{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new wt(t)}}async function bt(e){const t=ke(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function xt(e,t,n){if((0,s.xZ)(e.app))return Promise.reject(b(e));const r=ke(e),i=Me(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",at,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&bt(e),t}),o=await ot._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function St(e,t,n){return(0,s.xZ)(e.app)?Promise.reject(b(e)):pt((0,a.Ku)(e),Ze.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&bt(e),t})}async function _t(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=(0,a.Ku)(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await X(i,async function(e,t){return O(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const l=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function Tt(e,t){return kt((0,a.Ku)(e),null,t)}async function kt(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await X(e,async function(e,t){return O(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}function Et(e,t,n,r){return(0,a.Ku)(e).onAuthStateChanged(t,n,r)}function Ct(e){return(0,a.Ku)(e).signOut()}class At{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new At("enroll",e,t)}static _fromMfaPendingCredential(e){return new At("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){if(null!==e&&void 0!==e&&e.multiFactorSession){var t,n;if(null!==(t=e.multiFactorSession)&&void 0!==t&&t.pendingCredential)return At._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null!==(n=e.multiFactorSession)&&void 0!==n&&n.idToken)return At._fromIdtoken(e.multiFactorSession.idToken)}return null}}function It(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:start",D(e,t))}class Nt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>vt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Nt(e)}async getSession(){return At._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await X(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await X(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},O(r,"POST","/v2/accounts/mfaEnrollment:withdraw",D(r,i))));this.enrolledFactors=this.enrolledFactors.filter(e=>{let{uid:n}=e;return n!==t}),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(s){throw s}var r,i}}const jt=new WeakMap;function Rt(e){const t=(0,a.Ku)(e);return jt.has(t)||jt.set(t,Nt._fromUser(t)),jt.get(t)}const Pt="__sak";class Dt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pt,"1"),this.storage.removeItem(Pt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ot extends Dt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,a.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ot.type="LOCAL";const Lt=Ot;function Ut(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Mt(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Ft{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Mt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Ut(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Mt(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Mt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Ut(n);const i=setInterval(()=>{const e=Ut(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Ft.type="COOKIE";class Vt extends Dt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Vt.type="SESSION";const zt=Vt;class Bt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Bt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Bt.receivers=[];class Ht{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=qt("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Wt(){return window}function Kt(){return"undefined"!==typeof Wt().WorkerGlobalScope&&"function"===typeof Wt().importScripts}const Gt="firebaseLocalStorageDb",Qt="firebaseLocalStorage",Yt="fbase_key";class Jt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xt(e,t){return e.transaction([Qt],t?"readwrite":"readonly").objectStore(Qt)}function $t(){const e=indexedDB.open(Gt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Qt,{keyPath:Yt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Qt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Gt);return new Jt(e).toPromise()}(),t(await $t()))})})}async function Zt(e,t,n){const r=Xt(e,!0).put({[Yt]:t,value:n});return new Jt(r).toPromise()}function en(e,t){const n=Xt(e,!0).delete(t);return new Jt(n).toPromise()}class tn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await $t()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bt._getInstance(Kt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Ht(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $t();return await Zt(e,Pt,"1"),await en(e,Pt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Xt(e,!1).get(t),r=await new Jt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>en(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Xt(e,!1).getAll();return new Jt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}tn.type="LOCAL";const nn=tn;function rn(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:start",D(e,t))}const sn=Ie("rcb"),an=new A(3e4,6e4);class on{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=Wt().grecaptcha)||void 0===e||!e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return S(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&B(Wt().grecaptcha)?Promise.resolve(Wt().grecaptcha):new Promise((n,r)=>{const i=Wt().setTimeout(()=>{r(y(e,"network-request-failed"))},an.get());Wt()[sn]=()=>{Wt().clearTimeout(i),delete Wt()[sn];const s=Wt().grecaptcha;if(!s||!B(s))return void r(y(e,"internal-error"));const a=s.render;s.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Ae("".concat(Ce.recaptchaV2Script,"?").concat((0,a.Am)({onload:sn,render:"explicit",hl:t}))).catch(()=>{clearTimeout(i),r(y(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=Wt().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ln{async load(e){return new je(e)}clearedOneInstance(){}}const cn="recaptcha",un={theme:"light",type:"image"};class dn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.A)({},un);this.parameters=n,this.type=cn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ke(e),this.isInvisible="invisible"===this.parameters.size,S("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;S(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ln:new on,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){S(!this.parameters.sitekey,this.auth,"argument-error"),S(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),S("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"===typeof e)e(t);else if("string"===typeof e){const n=Wt()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){S(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){S(E()&&!Kt(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await O(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);S(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return S(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}async function hn(e,t,n){if(!e._getRecaptchaConfig())try{await Fe(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){S("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Me(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Oe){S((null===n||void 0===n?void 0:n.type)===cn,e,"argument-error");return It(e,await fn(e,t,n))}return It(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;S("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;S(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Me(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Oe){S((null===n||void 0===n?void 0:n.type)===cn,e,"argument-error");return rn(e,await fn(e,t,n))}return rn(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Me(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Oe){S((null===n||void 0===n?void 0:n.type)===cn,e,"argument-error");return Ye(e,await fn(e,t,n))}return Ye(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function fn(e,t,n){S(n.type===cn,e,"argument-error");const r=await n.verify();S("string"===typeof r,e,"argument-error");const s=(0,i.A)({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class pn{constructor(e){this.providerId=pn.PROVIDER_ID,this.auth=ke(e)}verifyPhoneNumber(e,t){return hn(this.auth,e,(0,a.Ku)(t))}static credential(e,t){return Xe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return pn.credentialFromTaggedObject(t)}static credentialFromError(e){return pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Xe._fromTokenResponse(n,r):null}}function mn(e,t){return t?ae(t):(S(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}pn.PROVIDER_ID="phone",pn.PHONE_SIGN_IN_METHOD="phone";class gn extends qe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ge(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ge(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ge(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vn(e){return ft(e.auth,new gn(e),e.bypassAuthState)}function yn(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),ht(n,new gn(e),e.bypassAuthState)}async function wn(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),dt(n,new gn(e),e.bypassAuthState)}class bn{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vn;case"linkViaPopup":case"linkViaRedirect":return wn;case"reauthViaPopup":case"reauthViaRedirect":return yn;default:v(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xn=new A(2e3,1e4);class Sn extends bn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Sn.currentPopupAction&&Sn.currentPopupAction.cancel(),Sn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return S(e,this.auth,"internal-error"),e}async onExecution(){T(1===this.filter.length,"Popup operations only handle one event");const e=qt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(y(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(y(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,xn.get())};e()}}Sn.currentPopupAction=null;const _n=new Map;class Tn extends bn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=_n.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Cn(t),r=En(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}_n.set(this.auth._key(),e)}return this.bypassAuthState||_n.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function kn(e,t){_n.set(e._key(),t)}function En(e){return ae(e._redirectPersistence)}function Cn(e){return ce("pendingRedirect",e.config.apiKey,e.name)}async function An(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,s.xZ)(e.app))return Promise.reject(b(e));const r=ke(e),i=mn(r,t),a=new Tn(r,i,n),o=await a.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class In{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!jn(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nn(e))}saveEventToCache(e){this.cachedEventUids.add(Nn(e)),this.lastProcessedEventTime=Date.now()}}function Nn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function jn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Rn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pn=/^https?/;async function Dn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return O(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(On(r))return}catch(n){}v(e,"unauthorized-domain")}function On(e){const t=k(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Pn.test(n))return!1;if(Rn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ln=new A(3e4,6e4);function Un(){const e=Wt().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Mn(e){return new Promise((t,n)=>{var r,i;function s(){Un(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Un(),n(y(e,"network-request-failed"))},timeout:Ln.get()})}if(null!==(r=Wt().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Wt().gapi)||void 0===i||!i.load){const t=Ie("iframefcb");return Wt()[t]=()=>{gapi.load?s():n(y(e,"network-request-failed"))},Ae("".concat(Ce.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Fn=null,e})}let Fn=null;const Vn=new A(5e3,15e3),zn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qn(e){const t=e.config;S(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?I(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:s.MF},i=Bn.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat((0,a.Am)(r).slice(1))}async function Hn(e){const t=await function(e){return Fn=Fn||Mn(e),Fn}(e),n=Wt().gapi;return S(n,e,"internal-error"),t.open({where:document.body,url:qn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=y(e,"network-request-failed"),s=Wt().setTimeout(()=>{r(i)},Vn.get());function a(){Wt().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Wn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Gn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=(0,i.A)((0,i.A)({},Wn),{},{width:r.toString(),height:s.toString(),top:o,left:l}),d=(0,a.ZQ)().toLowerCase();n&&(c=pe(d)?"_blank":n),he(d)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return we(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(d)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new Kn(null);const f=window.open(t||"",c,h);S(f,e,"popup-blocked");try{f.focus()}catch(p){}return new Kn(f)}const Qn="__/auth/handler",Yn="emulator/auth/handler",Jn=encodeURIComponent("fac");async function Xn(e,t,n,r,i,o){S(e.config.authDomain,e,"auth-domain-config-required"),S(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:s.MF,eventId:i};if(t instanceof et){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,a.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof tt){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];const u=await e._getAppCheckToken(),d=u?"#".concat(Jn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Qn);return I(t,Yn)}(e),"?").concat((0,a.Am)(c).slice(1)).concat(d)}const $n="webStorageSupport";const Zn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zt,this._completeRedirectFn=An,this._overrideRedirectResult=kn}async _openPopup(e,t,n,r){var i;T(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Gn(e,await Xn(e,t,n,k(),r),qt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Wt().location.href=e}(await Xn(e,t,n,k(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Hn(e),n=new In(e);return t.register("authEvent",t=>{S(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($n,{type:$n},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[$n];void 0!==i&&t(!!i),v(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Dn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return be()||fe()||we()}};class er{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _("unexpected MultiFactorSessionType")}}}class tr extends er{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new tr(e)}_finalizeEnroll(e,t,n){return function(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:finalize",D(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:finalize",D(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class nr{constructor(){}static assertion(e){return tr._fromCredential(e)}}nr.FACTOR_ID="phone";var rr="@firebase/auth",ir="1.11.0";class sr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ar=(0,a.XA)("authIdTokenMaxAge")||300;let or=null;const lr=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ar)return;const i=null===n||void 0===n?void 0:n.token;or!==i&&(or=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function cr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.Sx)();const t=(0,s.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,s.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,a.bD)(r,null!==t&&void 0!==t?t:{}))return e;v(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Zn,persistence:[nn,Lt,zt]}),r=(0,a.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=lr(e.toString());!function(e,t,n){(0,a.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,a.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const i=(0,a.Tj)("auth");return i&&Ve(n,"http://".concat(i)),n}var ur;Ce={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=y("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ur="Browser",(0,s.om)(new l.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;S(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:ur,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xe(ur)},c=new Te(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ae);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,s.om)(new l.uA("auth-internal",e=>(e=>new sr(e))(ke(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.KO)(rr,ir,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ur)),(0,s.KO)(rr,ir,"esm2020")},986:(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{A:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(43),s=n.t(i,2),a=n(391),o=n(950),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l=r.Pop,h=null,g=v();function v(){return(o.state||{idx:null}).idx}function y(){l=r.Pop;let e=v(),t=null==e?null:e-g;g=e,h&&h({action:l,location:b.location,delta:t})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let b={get action(){return l},get location(){return e(s,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(u,y),h=e,()=>{s.removeEventListener(u,y),h=null}},createHref:e=>t(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=p(b.location,e,t);n&&n(i,e),g=v()+1;let c=f(i,g),u=b.createHref(i);try{o.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;s.location.assign(u)}a&&h&&h({action:l,location:b.location,delta:1})},replace:function(e,t){l=r.Replace;let i=p(b.location,e,t);n&&n(i,e),g=v();let s=f(i,g),c=b.createHref(i);o.replaceState(s,"",c),a&&h&&h({action:l,location:b.location,delta:0})},go:e=>o.go(e)};return b}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function b(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function x(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function S(e,t){let n=x(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function _(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=c({},e),d(!i.pathname||!i.pathname.includes("?"),b("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),b("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),b("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:k(r),hash:E(i)}}(i,s),u=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const T=e=>e.join("/").replace(/\/\/+/g,"/"),k=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",E=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const C=["post","put","patch","delete"],A=(new Set(C),["get",...C]);new Set(A),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}const N=i.createContext(null);const j=i.createContext(null);const R=i.createContext(null);const P=i.createContext({outlet:null,matches:[],isDataRoute:!1});function D(){return null!=i.useContext(R)}function O(){return D()||d(!1),i.useContext(R).location}function L(e){i.useContext(j).static||i.useLayoutEffect(e)}function U(){let{isDataRoute:e}=i.useContext(P);return e?function(){let{router:e}=V(M.UseNavigateStable),t=z(F.UseNavigateStable),n=i.useRef(!1);return L(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,I({fromRouteId:t},i)))},[e,t])}():function(){D()||d(!1);let e=i.useContext(N),{basename:t,future:n,navigator:r}=i.useContext(j),{matches:s}=i.useContext(P),{pathname:a}=O(),o=JSON.stringify(S(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return L(()=>{l.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=_(n,JSON.parse(o),a,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:T([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,o,a,e])}()}i.Component;var M=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(M||{}),F=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(F||{});function V(e){let t=i.useContext(N);return t||d(!1),t}function z(e){let t=function(){let e=i.useContext(P);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}function B(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function q(e){let{basename:t="/",children:n=null,location:s,navigationType:a=r.Pop,navigator:o,static:l=!1,future:c}=e;D()&&d(!1);let u=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:u,navigator:o,static:l,future:I({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:y="default"}=s,b=i.useMemo(()=>{let e=w(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:v,key:y},navigationType:a}},[u,f,p,m,v,y,a]);return null==b?null:i.createElement(j.Provider,{value:h},i.createElement(R.Provider,{children:n,value:b}))}new Promise(()=>{});i.Component;new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(se){}new Map;const H=s.startTransition;l.flushSync,s.useId;function W(e){let{basename:t,children:n,future:r,window:s}=e,a=i.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),v(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=g(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:m(t))},function(e,t){h("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},f=i.useCallback(e=>{d&&H?H(()=>u(e)):u(e)},[u,d]);return i.useLayoutEffect(()=>l.listen(f),[l,f]),i.useEffect(()=>B(r),[r]),i.createElement(q,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var K,G;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(K||(K={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(G||(G={}));var Q=n(986),Y=n(555),J=n(834),X=n(982),$=(n(667),n(68)),Z=n(488),ee=n(339),te=n(579);const ne=()=>{const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)([]),f=(0,i.useRef)(null);(0,i.useEffect)(()=>{e&&0===n.length&&(m(),r([{role:"assistant",content:"\ud83d\udc4b Hi! I'm your AutoPromote AI Assistant. I speak all 11 South African languages! How can I help you today?\n\nSawubona! (Zulu) | Molo! (Xhosa) | Hallo! (Afrikaans)",timestamp:(new Date).toISOString()}]))},[e]),(0,i.useEffect)(()=>{p()},[n]);const p=()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},m=async()=>{try{var e;const t=await(null===(e=J.j2.currentUser)||void 0===e?void 0:e.getIdToken());if(!t)return;const n=await fetch("".concat(Z.JR,"/api/chat/suggestions"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();h(e.suggestions||[])}}catch(t){console.error("Failed to load suggestions:",t)}},g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!e.trim()||c)return;const t={role:"user",content:e,timestamp:(new Date).toISOString()};r(e=>[...e,t]),a(""),u(!0);try{var n;const t=await(null===(n=J.j2.currentUser)||void 0===n?void 0:n.getIdToken()),i=await fetch("".concat(Z.JR,"/api/chat/message"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({conversationId:o,message:e})});if(!i.ok)throw new Error("Failed to send message");const s=await i.json();s.conversationId&&!o&&l(s.conversationId);const a={role:"assistant",content:s.message,timestamp:(new Date).toISOString()};r(e=>[...e,a])}catch(i){console.error("Chat error:",i),ee.Ay.error("Failed to send message"),r(e=>[...e,{role:"assistant",content:"Sorry, I'm having trouble responding right now. Please try again in a moment.",timestamp:(new Date).toISOString()}])}finally{u(!1)}};return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("button",{className:"chat-widget-button ".concat(e?"open":""),onClick:()=>t(!e),"aria-label":"Open chat",children:e?"\u2715":"\ud83d\udcac"}),e&&(0,te.jsxs)("div",{className:"chat-widget-panel",children:[(0,te.jsxs)("div",{className:"chat-widget-header",children:[(0,te.jsxs)("div",{className:"chat-widget-header-content",children:[(0,te.jsx)("div",{className:"chat-widget-avatar",children:"\ud83e\udd16"}),(0,te.jsxs)("div",{children:[(0,te.jsx)("h3",{children:"AI Assistant"}),(0,te.jsx)("p",{children:"All 11 SA Languages"})]})]}),(0,te.jsx)("button",{onClick:()=>{r([{role:"assistant",content:"\ud83d\udc4b Chat cleared! How can I help you?",timestamp:(new Date).toISOString()}]),l(null)},className:"chat-clear-btn",title:"Clear chat",children:"\ud83d\udd04"})]}),(0,te.jsxs)("div",{className:"chat-widget-messages",children:[n.map((e,t)=>{return(0,te.jsxs)("div",{className:"chat-message ".concat("user"===e.role?"user":"assistant"),children:[(0,te.jsx)("div",{className:"chat-message-content",children:e.content}),(0,te.jsx)("div",{className:"chat-message-time",children:(n=e.timestamp,new Date(n).toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit"}))})]},t);var n}),c&&(0,te.jsx)("div",{className:"chat-message assistant",children:(0,te.jsx)("div",{className:"chat-message-content",children:(0,te.jsxs)("div",{className:"typing-indicator",children:[(0,te.jsx)("span",{}),(0,te.jsx)("span",{}),(0,te.jsx)("span",{})]})})}),(0,te.jsx)("div",{ref:f})]}),1===n.length&&d.length>0&&(0,te.jsx)("div",{className:"chat-suggestions",children:d.map((e,t)=>(0,te.jsxs)("button",{className:"chat-suggestion-btn",onClick:()=>(e=>{g(e.text)})(e),children:[(0,te.jsx)("span",{className:"suggestion-icon",children:e.icon}),e.text]},t))}),(0,te.jsxs)("div",{className:"chat-widget-input",children:[(0,te.jsx)("textarea",{value:s,onChange:e=>a(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:"Type your message... (Any language)",rows:1,disabled:c}),(0,te.jsx)("button",{onClick:()=>g(),disabled:!s.trim()||c,className:"chat-send-btn",children:"\u27a4"})]}),(0,te.jsx)("div",{className:"chat-widget-footer",children:"Powered by OpenAI GPT-4o"})]})]})},re=["token"];const ie=function(){const[e,t]=(0,i.useState)(null),[r,s]=(0,i.useState)(!1),[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!1),[h,f]=(0,i.useState)([]),[p,m]=(0,i.useState)([]),[g,v]=(0,i.useState)(null),[y,w]=(0,i.useState)({timezone:"UTC",defaultPlatforms:[],defaultFrequency:"once"}),b=void 0==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://autopromote.onrender.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyASTUuMkz821PoHRopZ8yy1dW5COrAQPZY",REACT_APP_FIREBASE_APP_ID:"1:317746682241:web:f363e099d55ffd1af1b080",REACT_APP_FIREBASE_AUTH_DOMAIN:"autopromote-464de.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-8QDQXF0FPQ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"317746682241",REACT_APP_FIREBASE_PROJECT_ID:"autopromote-464de",REACT_APP_FIREBASE_STORAGE_BUCKET:"autopromote-cc6d3.firebasestorage.app"}.REACT_APP_DISABLE_IMMEDIATE_POSTS||"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://autopromote.onrender.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyASTUuMkz821PoHRopZ8yy1dW5COrAQPZY",REACT_APP_FIREBASE_APP_ID:"1:317746682241:web:f363e099d55ffd1af1b080",REACT_APP_FIREBASE_AUTH_DOMAIN:"autopromote-464de.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-8QDQXF0FPQ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"317746682241",REACT_APP_FIREBASE_PROJECT_ID:"autopromote-464de",REACT_APP_FIREBASE_STORAGE_BUCKET:"autopromote-cc6d3.firebasestorage.app"}.REACT_APP_DISABLE_IMMEDIATE_POSTS,[x,S]=(0,i.useState)(!1),[_,T]=(0,i.useState)(!1),[k,E]=(0,i.useState)(null),[C,A]=(0,i.useState)(!1),[I,N]=(0,i.useState)(null),j=U();(0,i.useEffect)(()=>{const e=(0,X.hg)(J.j2,async e=>{if(!e)return t(null),s(!1),localStorage.clear(),void f([]);try{const n=await e.getIdToken(!0),r=await e.getIdTokenResult(!0),i=!0===r.claims.admin||"admin"===r.claims.role,a={uid:e.uid,email:e.email,name:e.displayName,isAdmin:i,role:i?"admin":"user"};if(!await M(n,a,"authState"))return;t((0,Y.A)((0,Y.A)({},a),{},{token:n})),s(i);const o=(0,Y.A)({},a);localStorage.setItem("user",JSON.stringify(o)),console.log("Current UID:",e.uid),await R(n)}catch(n){t(null),s(!1),localStorage.clear(),f([])}});return"/admin-login"===window.location.pathname&&(o(!0),c(!1),d(!1)),()=>e()},[]);const R=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let r=t;if(!r){const t=J.j2.currentUser;if(t)r=await t.getIdToken(!0);else{if(!e||!e.token)return;r=e.token}}const i=await fetch(Z.Sn.MY_CONTENT,{method:"GET",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json",Accept:"application/json"},mode:"cors"});if(!i.ok){let e=null;try{e=await i.json()}catch(n){e=null}if(401===i.status&&J.j2.currentUser){const e=await J.j2.currentUser.getIdToken(!0);return R(e)}return 403===i.status&&e&&"terms_not_accepted"===e.error?(T(!0),E(e.requiredVersion||null),void A(!0)):void 0}const s=await i.json();f(s.content||[]),await P(r)}catch(r){}},P=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let n=t;if(!n){const t=J.j2.currentUser;if(t)n=await t.getIdToken(!0);else{if(!e||!e.token)return;n=e.token}}const r=await fetch(Z.Sn.MY_SCHEDULES,{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json",Accept:"application/json"}});if(r.ok){const e=await r.json();m(Array.isArray(e.schedules)?e.schedules:[])}}catch(n){}},D=async()=>{await P()},O=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t){const n=J.j2.currentUser;if(n)t=await n.getIdToken(!0);else{if(!e||!e.token)return;t=e.token}}if(!e||!e.role)return void s(!1);if("admin"===e.role||!0===e.isAdmin)try{const e=await fetch(Z.Sn.ADMIN_ANALYTICS,{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok){let t=null;try{t=await e.json()}catch(n){t=null}if(401===e.status&&J.j2.currentUser){const e=await J.j2.currentUser.getIdToken(!0);return O(e)}return 403===e.status&&t&&"terms_not_accepted"===t.error?(T(!0),void E(t.requiredVersion||null)):void s(!1)}const r=await e.json();v(r)}catch(r){}},L=async(e,t)=>{try{const r=await(0,X.x9)(J.j2,e,t),{user:i}=r,s=await i.getIdToken();console.log("LOGIN API ENDPOINT:",Z.Sn.LOGIN);const a=await fetch(Z.Sn.LOGIN,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({idToken:s})});if(!a.ok){const e=await a.json();throw new Error(e.message||"Login failed")}{const e=await a.json();if(e.customToken){const t=await(0,X.p)(J.j2,e.customToken),r=await t.user.getIdToken();try{if("true"===localStorage.getItem("tosAgreed")){const e="".concat(Z.JR,"/api/users/me/accept-terms");await fetch(e,{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})}).catch(()=>{}),localStorage.removeItem("tosAgreed")}}catch(n){}const i=(0,Y.A)((0,Y.A)({},e.user),{},{token:r});await M(r,i,"login")&&V(i)}else{try{if("true"===localStorage.getItem("tosAgreed")){const e="".concat(Z.JR,"/api/users/me/accept-terms");await fetch(e,{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})}).catch(()=>{}),localStorage.removeItem("tosAgreed")}}catch(n){}const t=(0,Y.A)((0,Y.A)({},e.user),{},{token:s});await M(s,t,"login")&&V(t)}}}catch(r){alert(r.message||"Login failed")}},M=async(e,t,n)=>{try{const n=await fetch(Z.Sn.MY_CONTENT,{method:"GET",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});if(n.ok)return!0;let i=null;try{i=await n.json()}catch(r){}return 403!==n.status||!i||"terms_not_accepted"!==i.error||(E(i.requiredVersion||null),T(!0),N({userData:t,token:e}),A(!0),!1)}catch(r){return!0}},F=async(e,t,n)=>{try{const r=(await(0,X.eJ)(J.j2,t,n)).user;await(0,X.r7)(r,{displayName:e});const i=await r.getIdToken(),s=await fetch(Z.Sn.REGISTER,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({name:e,email:t,uid:r.uid,idToken:i})});if(s.ok){const e=await s.json();z((0,Y.A)((0,Y.A)({},e.user),{},{token:i,uid:r.uid})),alert("Registration successful! You are now logged in.")}else z({uid:r.uid,email:t,name:e,token:i,role:"user"}),alert("Registration partially successful. Some features may be limited.")}catch(r){alert("Registration failed: "+(r.message||"Unknown error"))}},V=async e=>{try{if(localStorage.clear(),!e||!e.role)return c(!0),t(null),void s(!1);if(!e.token)return;const n="admin"===e.role||!0===e.isAdmin,r=(0,Y.A)((0,Y.A)({},e),{},{role:n?"admin":e.role,isAdmin:n}),{token:i}=r,a=(0,Q.A)(r,re);localStorage.setItem("user",JSON.stringify(a)),t(e=>!e||"admin"!==e.role&&!0!==e.isAdmin?r:(0,Y.A)((0,Y.A)((0,Y.A)({},e),r),{},{role:"admin",isAdmin:!0})),s(n),c(!1),n?(await O(),j("/admin-dashboard")):(await R(),j("/"))}catch(n){q()}},z=e=>{t(e),d(!1)},B=async e=>{let{timezone:t,defaultPlatforms:n,defaultFrequency:r}=e;try{const e=J.j2.currentUser;if(!e)throw new Error("Not authenticated");const i=await e.getIdToken(!0),s=await fetch(Z.Sn.USERS_ME,{method:"PUT",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({timezone:t,defaultPlatforms:n,defaultFrequency:r})});if(!s.ok){const e=await s.json().catch(()=>({}));throw new Error(e.error||e.message||"Failed to save defaults")}const a=await s.json(),o=a&&a.user?a.user:{},l=o.schedulingDefaults||{};return w({timezone:o.timezone||t||"UTC",schedulingDefaults:l,defaultPlatforms:l.platforms||n||[],defaultFrequency:l.frequency||r||"once"}),!0}catch(se){return alert(se.message||"Could not save settings"),!1}},q=async()=>{try{console.log("handleLogout called"),await(0,X.CI)(J.j2),t(null),f([]),s(!1),c(!1),d(!1),o(!1),localStorage.clear(),S(!0),T(!1),E(null)}catch(e){console.error("Logout error:",e)}};i.useEffect(()=>{x&&!e&&(j("/"),S(!1))},[x,e,j]);const H=async e=>{try{const{file:t,platforms:n,title:r,description:i,type:s,schedule:a,isDryRun:o,trimStart:l,trimEnd:c,template:u,rotate:d,flipH:f,flipV:p}=e,m=await J.j2.currentUser.getIdToken(!0);let g="";if(("video"===s||"image"===s||"audio"===s)&&t){const e="uploads/".concat(s,"s/").concat(Date.now(),"_").concat(t.name),n=(0,$.KR)(J.IG,e);await(0,$.D)(n,t),g=await(0,$.qk)(n)}o&&t&&(g="preview://".concat(t.name));const v=(0,Y.A)((0,Y.A)({},a),{},{frequency:(null===a||void 0===a?void 0:a.frequency)||y.defaultFrequency||"once",timezone:y.timezone||"UTC"}),w={title:r||(t?t.name:""),type:s||"video",url:g,description:i||"",target_platforms:n&&n.length?n:y.defaultPlatforms||["youtube","tiktok","instagram"],platform_options:e.platformOptions||e.platform_options||{},schedule_hint:v,meta:(0,Y.A)((0,Y.A)((0,Y.A)((0,Y.A)((0,Y.A)((0,Y.A)((0,Y.A)({},e.meta||{}),"undefined"!==typeof l?{trimStart:l}:{}),"undefined"!==typeof c?{trimEnd:c}:{}),"undefined"!==typeof d?{rotate:d}:{}),"undefined"!==typeof f?{flipH:f}:{}),"undefined"!==typeof p?{flipV:p}:{}),u?{template:u}:{})},x=await fetch(Z.Sn.CONTENT_UPLOAD,{method:"POST",headers:{Authorization:"Bearer ".concat(m),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(w)}),S=await x.json();if(!x.ok)throw new Error(S.message||"Upload/preview failed");if(o)return S;try{const e=Array.isArray(n)?n:[],a=async()=>{if(b)console.log("[Upload] Skipping immediate YouTube post (disabled via flag)");else if(e.includes("youtube"))try{var n,s,a;let e=(null===S||void 0===S?void 0:S.contentId)||(null===S||void 0===S||null===(n=S.promotion_schedule)||void 0===n?void 0:n.contentId);if(!e&&Array.isArray(h)){const t=h.find(e=>e.url===w.url);if(t&&t.id)e=t.id;else{const t=h[h.length-1];t&&t.id&&(e=t.id)}}console.log("YouTube upload: contentId",e,"fileUrl",w.url,"result",S);const o=w.url;if(!e||!o)return void console.warn("Missing contentId or fileUrl for YouTube upload");(await fetch(Z.Sn.YOUTUBE_UPLOAD,{method:"POST",headers:{Authorization:"Bearer ".concat(m),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({contentId:e,videoUrl:w.url,title:r||(t?t.name:""),description:i||"",shortsMode:null===(s=w.platform_options)||void 0===s||null===(a=s.youtube)||void 0===a?void 0:a.shortsMode})})).ok||console.warn("YouTube upload failed")}catch(o){}},o=async()=>{const e=await fetch(Z.Sn.FACEBOOK_STATUS,{headers:{Authorization:"Bearer ".concat(m),Accept:"application/json"}});return e.ok?e.json():null},l=async()=>{if(e.includes("facebook"))try{var n,a;const e=await o(),l=null===e||void 0===e||null===(n=e.pages)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.id;if(!l)return;const c={pageId:l,content:{type:s||"video",url:w.url,title:r||(t?t.name:""),description:i||""}};(await fetch(Z.Sn.FACEBOOK_UPLOAD,{method:"POST",headers:{Authorization:"Bearer ".concat(m),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c)})).ok||console.warn("Facebook upload failed")}catch(l){}},c=async()=>{if(e.includes("instagram"))try{var t,n;const e=await o(),a=null===e||void 0===e||null===(t=e.pages)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;if(!a)return;const l=(s||"video").toLowerCase();(await fetch(Z.Sn.INSTAGRAM_UPLOAD,{method:"POST",headers:{Authorization:"Bearer ".concat(m),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({pageId:a,mediaUrl:w.url,caption:"".concat(r||"","\n").concat(i||"").trim(),mediaType:l})})).ok||console.warn("Instagram upload failed")}catch(a){}};b?console.log("[Upload] Immediate platform posts disabled; posts will be processed by backend queued tasks"):(await a(),await l(),await c())}catch(se){console.warn("Auto-post skipped or partial:",null===se||void 0===se?void 0:se.message)}await R(m),alert("Content uploaded! Posting to connected platforms has been triggered.")}catch(t){alert("Error uploading content: "+t.message)}};return(0,te.jsxs)("div",{children:[C&&(0,te.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,te.jsxs)("div",{style:{background:"#fff",borderRadius:16,boxShadow:"0 12px 36px rgba(0,0,0,0.2)",padding:"24px 22px",maxWidth:560,width:"90%"},children:[(0,te.jsx)("h3",{style:{marginTop:0,marginBottom:8},children:"Accept Terms of Service"}),(0,te.jsxs)("p",{style:{marginTop:0,color:"#444"},children:["Please accept the latest Terms of Service",k?" (".concat(k,")"):""," to continue."]}),(0,te.jsxs)("div",{style:{display:"flex",gap:12,marginTop:16,alignItems:"center"},children:[(0,te.jsx)("button",{onClick:async()=>{try{let e=(null===I||void 0===I?void 0:I.token)||null;if(!e){const t=J.j2.currentUser;if(!t)return;e=await t.getIdToken(!0)}const t="".concat(Z.JR,"/api/users/me/accept-terms"),n=k?{acceptedTermsVersion:k}:{},i=await fetch(t,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)}),s=await i.json().catch(()=>({}));if(!i.ok)return void alert("Failed to accept terms: "+(s.error||i.status));if(T(!1),E(null),A(!1),I&&I.userData){const e=I.userData;N(null),V(e)}else await R(),r&&await O()}catch(se){alert("Could not accept terms. Please try again.")}},style:{background:"#111827",color:"#fff",border:"none",padding:"10px 16px",borderRadius:8,cursor:"pointer"},children:"Accept and Continue"}),(0,te.jsx)("a",{href:"".concat(Z.JR,"/terms"),target:"_blank",rel:"noreferrer",children:"View Terms"})]})]})}),e?!e||"admin"!==e.role&&!0!==e.isAdmin?(()=>{try{const t=n(412).A;return(0,te.jsx)(t,{user:e,content:h,userDefaults:y,onSaveDefaults:B,onLogout:q,onUpload:H,mySchedules:p,onSchedulesChanged:D})}catch(se){return(0,te.jsx)("div",{style:{color:"red"},children:"User dashboard not found."})}})():(()=>{try{const t=n(970).A;return(0,te.jsx)(t,{analytics:g,user:e,onLogout:q})}catch(se){return(0,te.jsx)("div",{style:{color:"red"},children:"Admin dashboard not found."})}})():(0,te.jsxs)(te.Fragment,{children:[!l&&!u&&(()=>{try{const e=n(889).A;return(0,te.jsx)(e,{onGetStarted:()=>d(!0),onSignIn:()=>c(!0)})}catch(se){return(0,te.jsx)("div",{style:{color:"red"},children:"Welcome page not found."})}})(),l&&(()=>{try{const e=n(847).A;return(0,te.jsx)("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",zIndex:9999,overflowY:"auto"},children:(0,te.jsx)("div",{style:{minHeight:"100%",display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"3rem 1.25rem"},children:(0,te.jsx)(e,{onLogin:L,onClose:()=>c(!1)})})})}catch(se){return(0,te.jsx)("div",{style:{color:"red"},children:"Login form not found."})}})(),u&&(()=>{try{const e=n(653).A;return(0,te.jsx)("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",zIndex:9999,overflowY:"auto"},children:(0,te.jsx)("div",{style:{minHeight:"100%",display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"3rem 1.25rem"},children:(0,te.jsx)(e,{onRegister:F,onClose:()=>d(!1)})})})}catch(se){return(0,te.jsx)("div",{style:{color:"red"},children:"Register form not found."})}})()]}),e&&(0,te.jsx)(ne,{})]})};a.createRoot(document.getElementById("root")).render((0,te.jsx)(W,{children:(0,te.jsx)(ie,{})}))})();
//# sourceMappingURL=main.700a76ad.js.map