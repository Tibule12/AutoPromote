const {
  optimizeForAlgorithm,
  generateHook,
  generateEngagementBait,
  optimizeCaption,
  calculateOptimalPostingTime,
  optimizeContentFormat,
  calculateOptimizationScore
} = require('./src/services/algorithmExploitationEngine');

console.log('üöÄ Testing Algorithm Exploitation Engine\n');

// Test content
const testContent = {
  title: 'Amazing Travel Tips',
  description: 'Learn how to travel the world on a budget with these incredible tips that nobody tells you about.',
  category: 'travel',
  type: 'video',
  duration: 45,
  aspectRatio: '9:16',
  tags: ['travel', 'budget', 'tips']
};

// Test 1: Generate Hook
console.log('1Ô∏è‚É£ Testing Hook Generator:');
console.log('TikTok Hook:', generateHook(testContent, 'tiktok'));
console.log('YouTube Hook:', generateHook(testContent, 'youtube'));
console.log('Twitter Hook:', generateHook(testContent, 'twitter'));
console.log('');

// Test 2: Generate Engagement Bait
console.log('2Ô∏è‚É£ Testing Engagement Bait Generator:');
console.log('TikTok Bait:', generateEngagementBait(testContent, 'tiktok'));
console.log('YouTube Bait:', generateEngagementBait(testContent, 'youtube'));
console.log('Twitter Bait:', generateEngagementBait(testContent, 'twitter'));
console.log('');

// Test 3: Optimize Caption
console.log('3Ô∏è‚É£ Testing Caption Optimizer:');
const tiktokCaption = optimizeCaption(testContent, 'tiktok');
console.log('TikTok Caption:', tiktokCaption.caption);
console.log('Max Length:', tiktokCaption.maxLength);
console.log('Recommended Hashtags:', tiktokCaption.recommendedHashtagCount);
console.log('');

// Test 4: Calculate Optimal Posting Time
console.log('4Ô∏è‚É£ Testing Optimal Posting Time:');
const tiktokTiming = calculateOptimalPostingTime('tiktok');
console.log('TikTok:', tiktokTiming.recommendation);
const youtubeTiming = calculateOptimalPostingTime('youtube');
console.log('YouTube:', youtubeTiming.recommendation);
const twitterTiming = calculateOptimalPostingTime('twitter');
console.log('Twitter:', twitterTiming.recommendation);
console.log('');

// Test 5: Optimize Content Format
console.log('5Ô∏è‚É£ Testing Content Format Optimizer:');
const tiktokFormat = optimizeContentFormat(testContent, 'tiktok');
console.log('TikTok Format Check:');
console.log('  Is Optimal:', tiktokFormat.isOptimal);
console.log('  Recommendations:', tiktokFormat.recommendations);
console.log('  Rules:', tiktokFormat.rules);
console.log('');

// Test 6: Full Optimization
console.log('6Ô∏è‚É£ Testing Full Optimization:');
optimizeForAlgorithm(testContent, 'tiktok').then(optimized => {
  console.log('‚úÖ TikTok Optimization Complete:');
  console.log('  Hook:', optimized.hook);
  console.log('  Engagement Bait:', optimized.engagementBait);
  console.log('  Optimized Caption:', optimized.optimizedCaption);
  console.log('  Hashtags:', optimized.hashtags);
  console.log('  Optimal Time:', optimized.optimalTiming.recommendation);
  console.log('  Optimization Score:', optimized.optimizationScore);
  console.log('');
  
  // Test YouTube Shorts
  return optimizeForAlgorithm(testContent, 'youtube_shorts');
}).then(optimized => {
  console.log('‚úÖ YouTube Shorts Optimization Complete:');
  console.log('  Hook:', optimized.hook);
  console.log('  Engagement Bait:', optimized.engagementBait);
  console.log('  Optimization Score:', optimized.optimizationScore);
  console.log('');
  
  // Test Twitter
  return optimizeForAlgorithm(testContent, 'twitter');
}).then(optimized => {
  console.log('‚úÖ Twitter Optimization Complete:');
  console.log('  Hook:', optimized.hook);
  console.log('  Engagement Bait:', optimized.engagementBait);
  console.log('  Optimization Score:', optimized.optimizationScore);
  console.log('');
  
  console.log('üéâ All Algorithm Exploitation Engine tests passed!');
}).catch(error => {
  console.error('‚ùå Error during optimization:', error);
});
